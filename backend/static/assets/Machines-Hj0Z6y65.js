import{r as a,h as J,o as ue,c as n,a as e,i as I,f as b,w as x,v as M,F as k,e as _,t as l,j as K,k as A,g as r,n as me}from"./index-C_eu1tB3.js";import{a as m}from"./api-CnOhYW_x.js";const pe={class:"bg-white p-5 shadow-lg rounded-xl mb-6"},fe={class:"flex flex-wrap items-center gap-4"},ge=["value"],ve=["value"],ye={key:0,class:"flex justify-center py-20"},xe={key:1,class:"bg-red-50 border-l-4 border-red-400 p-4 mb-6 rounded-r-lg shadow-sm"},he={class:"flex"},we={class:"ml-3"},be={class:"text-sm text-red-700"},ke={key:2,class:"bg-white shadow-lg rounded-xl overflow-hidden"},_e={key:3,class:"space-y-6"},Se={class:"px-6 py-4 bg-gray-50 border-b border-gray-200 flex justify-between items-center"},Me={class:"text-lg font-medium text-gray-900"},Ce={class:"text-sm text-gray-500"},Pe=["onClick"],Ie={role:"list",class:"divide-y divide-gray-200"},Ve={class:"flex items-center justify-between"},Fe={class:"flex items-center"},$e={class:"text-sm font-medium text-primary-600"},Ae={key:0,class:"text-sm text-gray-500 mt-1"},Re={key:1,class:"text-sm text-primary-600 mt-1"},je={class:"inline-flex items-center"},De={class:"text-sm text-gray-500 mt-1"},Ne={key:0,class:"text-primary-600 font-medium"},Ue={key:1,class:"text-gray-400 italic"},Ee={class:"flex space-x-2"},Le=["onClick"],Be=["onClick"],ze=["onClick"],Te={key:4,class:"fixed inset-0 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},He={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},qe={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},Ge={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},Oe={class:"sm:flex sm:items-start"},Je={class:"mt-3 text-center sm:mt-0 sm:text-left w-full"},Ke={class:"text-lg leading-6 font-medium text-gray-900",id:"modal-title"},Qe={class:"mt-4 space-y-4"},We=["value"],Xe=["value"],Ye={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},Ze={type:"submit",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary-600 text-base font-medium text-white hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:ml-3 sm:w-auto sm:text-sm"},et={key:5,class:"fixed inset-0 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},tt={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},ot={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},st={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},nt={class:"sm:flex sm:items-start"},rt={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},lt={class:"mt-2"},at={class:"text-sm text-gray-500"},it={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},dt={key:6,class:"fixed inset-0 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},ct={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},ut={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-3xl sm:w-full"},mt={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},pt={class:"sm:flex sm:items-start"},ft={class:"mt-3 text-center sm:mt-0 sm:text-left w-full"},gt={class:"text-lg leading-6 font-medium text-gray-900",id:"modal-title"},vt={class:"mt-4"},yt={class:"bg-gray-50 rounded-lg p-4 mb-4"},xt={key:0,class:"mb-4 bg-red-50 border-l-4 border-red-400 p-4 rounded-r-lg"},ht={class:"flex"},wt={class:"ml-3"},bt={class:"text-sm text-red-700"},kt={class:"sm:col-span-6"},_t=["value"],St={class:"sm:col-span-2"},Mt={class:"sm:col-span-2"},Ct={class:"mt-1 relative rounded-md shadow-sm"},Pt={key:0,class:"border border-gray-200 rounded-md overflow-hidden"},It={class:"overflow-x-auto -mx-4 sm:mx-0"},Vt={class:"inline-block min-w-full align-middle"},Ft={class:"min-w-full divide-y divide-gray-200"},$t={class:"bg-white divide-y divide-gray-200"},At={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},Rt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},jt={class:"flex items-center"},Dt={key:0},Nt={class:"relative rounded-md shadow-sm"},Ut=["onUpdate:modelValue"],Et={key:1},Lt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Bt={class:"flex items-center"},zt={key:0},Tt={class:"relative rounded-md shadow-sm"},Ht=["onUpdate:modelValue"],qt={key:1},Gt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Ot={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2"},Jt=["onClick"],Kt=["onClick"],Qt=["onClick"],Wt=["onClick"],Xt=["onClick"],Yt={key:1,class:"text-center p-6 bg-gray-50 rounded-md"},oo={__name:"Machines",setup(Zt){const E=a([]),j=a([]),D=a(!0),d=a(null),L=a({}),N=a({}),B=a([]),w=a([]),z=a(!1),T=a(!1),Q=J(()=>{const s=w.value.map(t=>t.product);return B.value.filter(t=>!s.includes(t.id))}),g=a({location:"",machineType:"",route:""}),H=a([]),q=J(()=>{const s={};return E.value.forEach(t=>{s[t.location]||(s[t.location]=[]),s[t.location].push(t)}),s}),W=a(["3D14","AMS 39640","AMS GB624","AMS-LB9 Combo","AP Snack Shop 111","AP Snack Shop 133","AP Snack Shop 152-D","AP Snack Shop 6600","AP Snack Shop III D20C","AP Studio 3","Crane 147","Crane 148","Crane 157","Crane 158","Crane 168","Crane 172","Crane 180","Crane 181","Crane 452","Crane 784","Dixie Narco","Dixie Narco 276E","Dixie Narco 348C","Dixie Narco 368","Dixie Narco 368 12","Dixie Narco 368 R","Dixie Narco 36812","Dixie Narco 414 CC","Dixie Narco 501-C","Dixie Narco 501E","ISI 3177","Lektro Vending V599C Serie II","Royal Vendor 390-9","Royal Vendor 462-9","Royal Vendor 550-6","Royal Vendor 630-10","Royal Vendor 650-10","Royal Vendor 660","Royal Vendor 660-8","Royal Vendor 660-9","Royal Vendor 804-","Royal Vendor 804-13","Royal Vendor 804-9","Snack Mart 111 3000/Model: 301A","Snack Shop 111","Snack Shop 111 D206","Snack Shop 113","Snack Shop 6000","Snack Shop 6600","Snack Shop III 400 / Model:3014","Snack Shop LCM2","USA 3129","USI 3014A","USI 3166"]),C=a(!1),V=a(!1),F=a(!1),$=a(null),U=a(!1),S=a(null),v=a({id:null,name:"",location:"",machine_type:"",model:""}),f=a({product:"",price:"",slot:""}),P=async()=>{D.value=!0,d.value=null,console.log("Fetching machines with filters:",g.value);try{const s={};g.value.location&&(s.location=g.value.location),g.value.route&&(s.route=g.value.route),g.value.machineType&&(s.machine_type=g.value.machineType);const t=await m.getMachines(s);console.log("Machines fetched successfully:",t.data),E.value=t.data.map(c=>({...c,location_name:c.location_name||N.value[c.location]||"Unknown"}))}catch(s){console.error("Error fetching machines:",s),d.value="Failed to load machines. Please try again."}finally{D.value=!1}},X=async()=>{try{const s=await m.getLocations();j.value=s.data,s.data.forEach(t=>{N.value[t.id]=t.name,L.value[t.id]=t})}catch(s){console.error("Error fetching locations:",s)}},Y=async()=>{try{const s=await m.getRoutes();H.value=s.data.routes}catch(s){console.error("Error fetching routes:",s)}},R=()=>{P()},Z=s=>{if(!s||!s.address)return;const c=`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(s.address)}`;window.open(c,"_blank")},G=()=>{F.value=!1,v.value={id:null,name:"",location:"",machine_type:"",model:""},C.value=!0},ee=s=>{F.value=!0,v.value={id:s.id,name:s.name,location:s.location,machine_type:s.machine_type,model:s.model},C.value=!0},te=async()=>{try{F.value?await m.updateMachine(v.value.id,v.value):await m.createMachine(v.value),C.value=!1,await P()}catch(s){console.error("Error saving machine:",s),d.value="Failed to save machine. Please try again."}},oe=s=>{$.value=s,V.value=!0},se=async()=>{if($.value)try{await m.deleteMachine($.value.id),V.value=!1,await P()}catch(s){console.error("Error deleting machine:",s),d.value="Failed to delete machine. Please try again."}},ne=async s=>{w.value=[],S.value=s,z.value=!0,f.value={product:"",price:"",slot:""};try{const t=await m.getProducts();B.value=t.data;const c={machine:s.id},i=await m.getMachineItems(c);if(i&&i.data){const p=i.data.filter(o=>o.machine==s.id);w.value=p.map(o=>({...o,editing:!1,editingSlot:!1,newPrice:o.price,newSlot:o.slot,price:typeof o.price=="string"?parseFloat(o.price):o.price}))}U.value=!0}catch(t){console.error("Error fetching machine products:",t),d.value="Failed to load machine products. Please try again."}finally{z.value=!1}},O=()=>{U.value=!1,w.value=[],S.value=null,f.value={product:"",price:"",slot:""},d.value=null},re=async()=>{T.value=!0,d.value=null;try{const s=S.value.id,t=parseInt(f.value.product),c=parseFloat(f.value.price),i=parseInt(f.value.slot),p={machine:s,product:t,price:c,slot:i};await m.createMachineItem(p),f.value.product="",f.value.price="",f.value.slot="";const o={machine:s},u=(await m.getMachineItems(o)).data.filter(h=>h.machine==s);w.value=u.map(h=>({...h,editing:!1,editingSlot:!1,newPrice:h.price,newSlot:h.slot,price:typeof h.price=="string"?parseFloat(h.price):h.price})),await P()}catch(s){console.error("Error adding product to machine:",s),s.response&&s.response.data?d.value=`Failed to add product: ${JSON.stringify(s.response.data)}`:d.value="Failed to add product to machine. Please try again."}finally{T.value=!1}},le=s=>{s.editingSlot=!0,s.newSlot=s.slot},ae=async s=>{d.value=null;try{const t=S.value.id;await m.updateMachineItem(s.id,{machine:t,product:s.product,price:s.price,slot:parseInt(s.newSlot)}),s.slot=parseInt(s.newSlot),s.editingSlot=!1,console.log(`Reloading products after slot update for machine ID: ${t}`);const c={machine:t},i=await m.getMachineItems(c);console.log(`Got response for machine ${t} after slot update:`,i.data);const p=i.data.filter(o=>o.machine==t);console.log(`Filtered ${i.data.length} items to ${p.length} for machine ${t}`),w.value=p.map(o=>({...o,editing:!1,editingSlot:!1,newPrice:o.price,newSlot:o.slot,price:typeof o.price=="string"?parseFloat(o.price):o.price}))}catch(t){console.error("Error updating product slot:",t),d.value="Failed to update product slot. Please try again.",t.response&&t.response.data&&t.response.data.non_field_errors&&(d.value=t.response.data.non_field_errors[0])}},ie=s=>{s.editing=!0,s.newPrice=s.price},de=async s=>{d.value=null;try{const t=S.value.id;await m.updateMachineItem(s.id,{machine:t,product:s.product,price:parseFloat(s.newPrice),slot:s.slot}),s.price=parseFloat(s.newPrice),s.editing=!1,console.log(`Reloading products after price update for machine ID: ${t}`);const c={machine:t},i=await m.getMachineItems(c);console.log(`Got response for machine ${t} after price update:`,i.data);const p=i.data.filter(o=>o.machine==t);console.log(`Filtered ${i.data.length} items to ${p.length} for machine ${t}`),w.value=p.map(o=>({...o,editing:!1,editingSlot:!1,newPrice:o.price,newSlot:o.slot,price:typeof o.price=="string"?parseFloat(o.price):o.price}))}catch(t){console.error("Error updating product price:",t),d.value="Failed to update product price. Please try again."}},ce=async s=>{if(confirm(`Are you sure you want to remove ${s.product_name} from this machine?`))try{const t=S.value.id;await m.deleteMachineItem(s.id),console.log(`Reloading products after deletion for machine ID: ${t}`);const c={machine:t},i=await m.getMachineItems(c);console.log(`Got response for machine ${t} after deletion:`,i.data);const p=i.data.filter(o=>o.machine==t);console.log(`Filtered ${i.data.length} items to ${p.length} for machine ${t}`),w.value=p.map(o=>({...o,editing:!1,editingSlot:!1,newPrice:o.price,newSlot:o.slot,price:typeof o.price=="string"?parseFloat(o.price):o.price})),await P()}catch(t){console.error("Error removing product from machine:",t),d.value="Failed to remove product from machine. Please try again."}};return ue(async()=>{console.log("Machines component mounted - fetching data"),await Promise.all([X(),Y()]),await P()}),(s,t)=>{var c,i,p;return r(),n("div",null,[e("div",{class:"flex justify-between items-center mb-6"},[t[15]||(t[15]=e("h1",{class:"text-2xl font-bold text-gray-900"},"Machines",-1)),e("button",{onClick:G,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-150"},t[14]||(t[14]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),b(" Add Machine ")]))]),e("div",pe,[e("div",fe,[e("div",null,[t[17]||(t[17]=e("label",{for:"locationFilter",class:"block text-sm font-medium text-gray-700 mb-1"},"Location",-1)),x(e("select",{id:"locationFilter","onUpdate:modelValue":t[0]||(t[0]=o=>g.value.location=o),class:"block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm",onChange:R},[t[16]||(t[16]=e("option",{value:""},"All Locations",-1)),(r(!0),n(k,null,_(j.value,o=>(r(),n("option",{key:o.id,value:o.id},l(o.name),9,ge))),128))],544),[[M,g.value.location]])]),e("div",null,[t[19]||(t[19]=e("label",{for:"typeFilter",class:"block text-sm font-medium text-gray-700 mb-1"},"Machine Type",-1)),x(e("select",{id:"typeFilter","onUpdate:modelValue":t[1]||(t[1]=o=>g.value.machineType=o),class:"block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm",onChange:R},t[18]||(t[18]=[e("option",{value:""},"All Types",-1),e("option",{value:"Snack"},"Snack",-1),e("option",{value:"Soda"},"Soda",-1),e("option",{value:"Combo"},"Combo",-1)]),544),[[M,g.value.machineType]])]),e("div",null,[t[22]||(t[22]=e("label",{for:"routeFilter",class:"block text-sm font-medium text-gray-700 mb-1"},"Route",-1)),x(e("select",{id:"routeFilter","onUpdate:modelValue":t[2]||(t[2]=o=>g.value.route=o),class:"block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm",onChange:R},[t[20]||(t[20]=e("option",{value:""},"All Routes",-1)),t[21]||(t[21]=e("option",{value:"unassigned"},"Unassigned",-1)),(r(!0),n(k,null,_(H.value,o=>(r(),n("option",{key:o,value:o},l(o),9,ve))),128))],544),[[M,g.value.route]])]),e("div",{class:"self-end ml-auto mt-4"},[e("button",{type:"button",onClick:R,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-150"},t[23]||(t[23]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})],-1),b(" Apply Filters ")]))])])]),D.value?(r(),n("div",ye,t[24]||(t[24]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-500"},null,-1)]))):d.value?(r(),n("div",xe,[e("div",he,[t[25]||(t[25]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})])],-1)),e("div",we,[e("p",be,l(d.value),1)])])])):Object.keys(q.value).length===0?(r(),n("div",ke,[e("div",{class:"px-6 py-8 text-center"},[t[27]||(t[27]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-16 w-16 mx-auto text-gray-400 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"})],-1)),t[28]||(t[28]=e("h3",{class:"text-lg leading-6 font-medium text-gray-900 mb-2"},"No machines found",-1)),t[29]||(t[29]=e("div",{class:"mt-2 max-w-xl text-sm text-gray-500 mx-auto mb-6"},[e("p",null,"Get started by adding your first machine.")],-1)),e("button",{onClick:G,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-150"},t[26]||(t[26]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),b(" Add Machine ")]))])])):(r(),n("div",_e,[(r(!0),n(k,null,_(q.value,(o,y)=>(r(),n("div",{key:y,class:"bg-white shadow-lg rounded-xl overflow-hidden"},[e("div",Se,[e("div",null,[e("h2",Me,l(N.value[y]),1),e("p",Ce,l(o.length)+" machines",1)]),e("button",{onClick:u=>Z(L.value[y]),class:"inline-flex items-center px-3 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-150"},t[30]||(t[30]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1),b(" View on Maps ")]),8,Pe)]),e("ul",Ie,[(r(!0),n(k,null,_(o,u=>(r(),n("li",{key:u.id,class:"px-6 py-5 hover:bg-gray-50 transition-colors duration-150"},[e("div",Ve,[e("div",null,[e("div",Fe,[e("p",$e,l(u.name),1),e("span",{class:me(["ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",{"bg-blue-100 text-blue-800":u.machine_type==="Soda","bg-green-100 text-green-800":u.machine_type==="Snack","bg-purple-100 text-purple-800":u.machine_type==="Combo"}])},l(u.machine_type),3)]),u.model?(r(),n("p",Ae,"Model: "+l(u.model),1)):I("",!0),u.route?(r(),n("p",Re,[e("span",je,[t[31]||(t[31]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1 text-primary-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})],-1)),b(" Route: "+l(u.route),1)])])):I("",!0),e("p",De,[u.product_count?(r(),n("span",Ne,l(u.product_count)+" products",1)):(r(),n("span",Ue,"No products"))])]),e("div",Ee,[e("button",{onClick:h=>ee(u),class:"inline-flex items-center px-3 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-150"},t[32]||(t[32]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),b(" Edit ")]),8,Le),e("button",{onClick:h=>ne(u),class:"inline-flex items-center px-3 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-150"},t[33]||(t[33]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})],-1),b(" Products ")]),8,Be),e("button",{onClick:h=>oe(u),class:"inline-flex items-center px-3 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded-md text-gray-700 bg-white hover:bg-red-50 hover:text-red-700 hover:border-red-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors duration-150"},t[34]||(t[34]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),b(" Delete ")]),8,ze)])])]))),128))])]))),128))])),C.value?(r(),n("div",Te,[e("div",He,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:t[3]||(t[3]=o=>C.value=!1)}),t[42]||(t[42]=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"​",-1)),e("div",qe,[e("form",{onSubmit:K(te,["prevent"])},[e("div",Ge,[e("div",Oe,[e("div",Je,[e("h3",Ke,l(F.value?"Edit Machine":"Add New Machine"),1),e("div",Qe,[e("div",null,[t[35]||(t[35]=e("label",{for:"name",class:"block text-sm font-medium text-gray-700"},"Machine Name",-1)),x(e("input",{type:"text",name:"name",id:"name","onUpdate:modelValue":t[4]||(t[4]=o=>v.value.name=o),placeholder:"e.g. Building A Snack Machine",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",required:""},null,512),[[A,v.value.name]])]),e("div",null,[t[37]||(t[37]=e("label",{for:"location",class:"block text-sm font-medium text-gray-700"},"Location",-1)),x(e("select",{id:"location",name:"location","onUpdate:modelValue":t[5]||(t[5]=o=>v.value.location=o),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md",required:""},[t[36]||(t[36]=e("option",{value:"",disabled:""},"Select a location",-1)),(r(!0),n(k,null,_(j.value,o=>(r(),n("option",{key:o.id,value:o.id},l(o.name),9,We))),128))],512),[[M,v.value.location]])]),e("div",null,[t[39]||(t[39]=e("label",{for:"machine_type",class:"block text-sm font-medium text-gray-700"},"Machine Type",-1)),x(e("select",{id:"machine_type",name:"machine_type","onUpdate:modelValue":t[6]||(t[6]=o=>v.value.machine_type=o),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md",required:""},t[38]||(t[38]=[e("option",{value:"",disabled:""},"Select a machine type",-1),e("option",{value:"Snack"},"Snack",-1),e("option",{value:"Soda"},"Soda",-1),e("option",{value:"Combo"},"Combo",-1)]),512),[[M,v.value.machine_type]])]),e("div",null,[t[41]||(t[41]=e("label",{for:"model",class:"block text-sm font-medium text-gray-700"},"Model (Optional)",-1)),x(e("select",{id:"model",name:"model","onUpdate:modelValue":t[7]||(t[7]=o=>v.value.model=o),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[t[40]||(t[40]=e("option",{value:""},"Select a model (optional)",-1)),(r(!0),n(k,null,_(W.value,o=>(r(),n("option",{key:o,value:o},l(o),9,Xe))),128))],512),[[M,v.value.model]])])])])])]),e("div",Ye,[e("button",Ze,l(F.value?"Update":"Add"),1),e("button",{type:"button",onClick:t[8]||(t[8]=o=>C.value=!1),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"}," Cancel ")])],32)])])])):I("",!0),V.value?(r(),n("div",et,[e("div",tt,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:t[9]||(t[9]=o=>V.value=!1)}),t[45]||(t[45]=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"​",-1)),e("div",ot,[e("div",st,[e("div",nt,[t[44]||(t[44]=e("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10"},[e("svg",{class:"h-6 w-6 text-red-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1)),e("div",rt,[t[43]||(t[43]=e("h3",{class:"text-lg leading-6 font-medium text-gray-900",id:"modal-title"}," Delete Machine ",-1)),e("div",lt,[e("p",at," Are you sure you want to delete the "+l((c=$.value)==null?void 0:c.name)+" ("+l((i=$.value)==null?void 0:i.machine_type)+")? This action cannot be undone. ",1)])])])]),e("div",it,[e("button",{type:"button",onClick:se,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm"}," Delete "),e("button",{type:"button",onClick:t[10]||(t[10]=o=>V.value=!1),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"}," Cancel ")])])])])):I("",!0),U.value?(r(),n("div",dt,[e("div",ct,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:O}),t[57]||(t[57]=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"​",-1)),e("div",ut,[e("div",mt,[e("div",pt,[e("div",ft,[e("h3",gt," Manage Products for "+l((p=S.value)==null?void 0:p.name),1),e("div",vt,[e("div",yt,[t[53]||(t[53]=e("h4",{class:"text-sm font-medium text-gray-700 mb-2"},"Add Product to Machine",-1)),d.value?(r(),n("div",xt,[e("div",ht,[t[46]||(t[46]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})])],-1)),e("div",wt,[e("p",bt,l(d.value),1)])])])):I("",!0),e("form",{onSubmit:K(re,["prevent"]),class:"grid grid-cols-1 gap-y-3 sm:grid-cols-12 sm:gap-x-3"},[e("div",kt,[t[48]||(t[48]=e("label",{for:"product",class:"block text-xs font-medium text-gray-700"},"Product",-1)),x(e("select",{id:"product","onUpdate:modelValue":t[11]||(t[11]=o=>f.value.product=o),class:"mt-1 block w-full pl-3 pr-10 py-2 text-sm border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 rounded-md",required:""},[t[47]||(t[47]=e("option",{value:"",disabled:""},"Select a product",-1)),(r(!0),n(k,null,_(Q.value,o=>(r(),n("option",{key:o.id,value:o.id},l(o.name),9,_t))),128))],512),[[M,f.value.product]])]),e("div",St,[t[49]||(t[49]=e("label",{for:"slot",class:"block text-xs font-medium text-gray-700"},"Slot #",-1)),x(e("input",{type:"number",id:"slot",min:"1","onUpdate:modelValue":t[12]||(t[12]=o=>f.value.slot=o),placeholder:"1",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full py-2 px-3 sm:text-sm border-gray-300 rounded-md",required:""},null,512),[[A,f.value.slot]])]),e("div",Mt,[t[51]||(t[51]=e("label",{for:"price",class:"block text-xs font-medium text-gray-700"},"Price",-1)),e("div",Ct,[t[50]||(t[50]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("span",{class:"text-gray-500 sm:text-sm"},"$")],-1)),x(e("input",{type:"number",id:"price",step:"0.01",min:"0.01","onUpdate:modelValue":t[13]||(t[13]=o=>f.value.price=o),placeholder:"0.00",class:"focus:ring-primary-500 focus:border-primary-500 block w-full pl-7 pr-3 py-2 sm:text-sm border-gray-300 rounded-md",required:""},null,512),[[A,f.value.price]])])]),t[52]||(t[52]=e("div",{class:"sm:col-span-2 flex items-end"},[e("button",{type:"submit",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary-600 text-sm font-medium text-white hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"}," Add ")],-1))],32)]),w.value.length>0?(r(),n("div",Pt,[e("div",It,[e("div",Vt,[e("table",Ft,[t[55]||(t[55]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Product "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Slot "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Price "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Current Stock "),e("th",{scope:"col",class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),e("tbody",$t,[(r(!0),n(k,null,_(w.value,o=>(r(),n("tr",{key:o.id},[e("td",At,l(o.product_name),1),e("td",Rt,[e("div",jt,[o.editingSlot?(r(),n("span",Dt,[e("div",Nt,[x(e("input",{type:"number",min:"1","onUpdate:modelValue":y=>o.newSlot=y,class:"focus:ring-primary-500 focus:border-primary-500 block w-full py-1 px-3 sm:text-sm border-gray-300 rounded-md"},null,8,Ut),[[A,o.newSlot]])])])):(r(),n("span",Et,l(o.slot),1))])]),e("td",Lt,[e("div",Bt,[o.editing?(r(),n("span",zt,[e("div",Tt,[t[54]||(t[54]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("span",{class:"text-gray-500 sm:text-sm"},"$")],-1)),x(e("input",{type:"number",step:"0.01",min:"0.01","onUpdate:modelValue":y=>o.newPrice=y,class:"focus:ring-primary-500 focus:border-primary-500 block w-full pl-7 pr-3 py-1 sm:text-sm border-gray-300 rounded-md"},null,8,Ht),[[A,o.newPrice]])])])):(r(),n("span",qt,"$"+l(typeof o.price=="number"?o.price.toFixed(2):Number(o.price).toFixed(2)),1))])]),e("td",Gt,l(o.current_stock||"Not set"),1),e("td",Ot,[o.editingSlot?(r(),n("button",{key:0,onClick:y=>ae(o),class:"text-primary-600 hover:text-primary-900"}," Save Slot ",8,Jt)):(r(),n("button",{key:1,onClick:y=>le(o),class:"text-primary-600 hover:text-primary-900"}," Edit Slot ",8,Kt)),o.editing?(r(),n("button",{key:2,onClick:y=>de(o),class:"text-primary-600 hover:text-primary-900"}," Save Price ",8,Qt)):(r(),n("button",{key:3,onClick:y=>ie(o),class:"text-primary-600 hover:text-primary-900"}," Edit Price ",8,Wt)),e("button",{onClick:y=>ce(o),class:"text-red-600 hover:text-red-900"}," Remove ",8,Xt)])]))),128))])])])])])):(r(),n("div",Yt,t[56]||(t[56]=[e("p",{class:"text-sm text-gray-500"},"No products added to this machine yet.",-1)])))])])])]),e("div",{class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},[e("button",{type:"button",onClick:O,class:"w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:ml-3 sm:w-auto sm:text-sm"}," Close ")])])])])):I("",!0)])}}};export{oo as default};
