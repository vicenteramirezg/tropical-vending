import{r as b,a as q,c as R,p as G,b as i,o as d,d as t,l as H,w as $,v as F,F as _,f as k,t as o,e as W,s as I,n as h,g as L,k as J,u as f,i as T,A as O}from"./index-BonLqaAG.js";import{a as D}from"./api-DXLxWSa1.js";function K(){const n=b(!1),x=b(""),m=b({locations:!1,products:!1,currentStock:!1,restockSummary:!1,stockCoverage:!1}),g=b([]),u=b([]),p=b(null),r=b(null),e=b(null),s=q({location:"",product:"",machine:"",startDate:"",endDate:"",days:"7",analysisDays:"30"}),a=R(()=>Object.values(m.value).some(l=>l)||n.value),c=R(()=>s.location||s.product||s.machine),y=()=>{const l={};return s.location&&(l.location=s.location),s.product&&(l.product=s.product),s.machine&&(l.machine=s.machine),l},z=()=>{const l={};return s.location&&(l.location=s.location),s.product&&(l.product=s.product),s.startDate&&s.endDate?(l.start_date=s.startDate,l.end_date=s.endDate):s.days&&(l.days=s.days),l},A=()=>{const l={};return s.location&&(l.location=s.location),s.product&&(l.product=s.product),s.analysisDays&&(l.analysis_days=s.analysisDays),l},V=async()=>{if(!(g.value.length>0)){m.value.locations=!0;try{const l=await D.getLocations();g.value=l.data.results||l.data||[]}catch(l){console.error("Error loading locations:",l)}finally{m.value.locations=!1}}},E=async()=>{if(!(u.value.length>0)){m.value.products=!0;try{const l=await D.getProducts();u.value=l.data.results||l.data||[]}catch(l){console.error("Error loading products:",l)}finally{m.value.products=!1}}},M=async()=>{m.value.currentStock=!0;try{const l=y(),w=await D.getCurrentStockReport(l);p.value=w.data}catch(l){throw console.error("Error loading current stock:",l),p.value=null,new Error("Failed to load current stock report")}finally{m.value.currentStock=!1}},C=async()=>{m.value.restockSummary=!0;try{const l=z(),w=await D.getRestockSummary(l);r.value=w.data}catch(l){throw console.error("Error loading restock summary:",l),r.value=null,new Error("Failed to load restock summary")}finally{m.value.restockSummary=!1}},v=async()=>{m.value.stockCoverage=!0;try{const l=A(),w=await D.getStockCoverageEstimate(l);e.value=w.data}catch(l){throw console.error("Error loading stock coverage:",l),e.value=null,new Error("Failed to load stock coverage estimate")}finally{m.value.stockCoverage=!1}},j=async()=>{n.value=!0,x.value="";try{const l=[V(),E()];await Promise.allSettled(l);const w=[M(),C(),v()],S=(await Promise.allSettled(w)).filter(P=>P.status==="rejected");S.length>0&&(console.warn(`${S.length} inventory reports failed to load:`,S.map(P=>{var N;return(N=P.reason)==null?void 0:N.message})),x.value=`Some reports could not be loaded. ${S.length} of ${w.length} reports failed.`)}catch(l){console.error("Error initializing inventory reports:",l),x.value="Failed to load inventory data. Please try again."}finally{n.value=!1}},U=async()=>{n.value=!0,x.value="";try{const l=[M(),C(),v()],B=(await Promise.allSettled(l)).filter(S=>S.status==="rejected");B.length>0&&(console.warn(`${B.length} inventory reports failed to reload:`,B.map(S=>{var P;return(P=S.reason)==null?void 0:P.message})),x.value="Some reports could not be reloaded with the new filters.")}catch(l){console.error("Error applying filters:",l),x.value="Failed to apply filters. Please try again."}finally{n.value=!1}};return{loading:n,error:x,locations:g,products:u,currentStockData:p,restockSummaryData:r,stockCoverageData:e,filters:s,loadingStates:m,isAnyLoading:a,hasFilters:c,loadCurrentStock:M,loadRestockSummary:C,loadStockCoverage:v,initialize:j,applyFilters:U,refreshReport:async l=>{try{switch(l){case"currentStock":await M();break;case"restockSummary":await C();break;case"stockCoverage":await v();break;default:await U()}}catch(w){console.error(`Error refreshing ${l}:`,w),x.value=`Failed to refresh ${l} report`}},forceRefresh:async()=>{n.value=!0,x.value="";try{D.invalidateCache("/inventory"),D.invalidateCache("/locations"),D.invalidateCache("/products"),g.value=[],u.value=[],await j()}catch(l){console.error("Error force refreshing inventory reports:",l),x.value="Failed to refresh inventory data"}finally{n.value=!1}},clearData:()=>{p.value=null,r.value=null,e.value=null,x.value=""},resetFilters:()=>{Object.assign(s,{location:"",product:"",machine:"",startDate:"",endDate:"",days:"7",analysisDays:"30"})}}}const Q={class:"bg-white shadow rounded-lg p-6 mb-6"},X={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},Y=["value"],Z=["value"],tt={key:0,class:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4"},et={__name:"InventoryFilterControls",props:{filters:{type:Object,required:!0},locations:{type:Array,default:()=>[]},products:{type:Array,default:()=>[]}},emits:["apply-filters","update-filters"],setup(n,{emit:x}){const m=n,g=x,u=q({location:m.filters.location||"",product:m.filters.product||"",startDate:m.filters.startDate||"",endDate:m.filters.endDate||"",days:m.filters.days||"7",analysisDays:m.filters.analysisDays||"30"}),p=b(m.filters.days||"7"),r=()=>{if(p.value!=="custom")u.days=p.value,u.startDate="",u.endDate="";else{u.days="";const a=new Date,c=new Date(a);c.setDate(a.getDate()-7),u.endDate=a.toISOString().split("T")[0],u.startDate=c.toISOString().split("T")[0]}},e=()=>{Object.assign(m.filters,u),g("apply-filters")},s=()=>{u.location="",u.product="",u.startDate="",u.endDate="",u.days="7",u.analysisDays="30",p.value="7",Object.assign(m.filters,u),g("apply-filters")};return G(()=>m.filters,a=>{Object.assign(u,a),p.value=a.days||(a.startDate&&a.endDate?"custom":"7")},{deep:!0}),(a,c)=>(d(),i("div",Q,[c[16]||(c[16]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Filter Options",-1)),t("div",X,[t("div",null,[c[7]||(c[7]=t("label",{for:"location",class:"block text-sm font-medium text-gray-700 mb-1"}," Location ",-1)),$(t("select",{id:"location","onUpdate:modelValue":c[0]||(c[0]=y=>u.location=y),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},[c[6]||(c[6]=t("option",{value:""},"All Locations",-1)),(d(!0),i(_,null,k(n.locations,y=>(d(),i("option",{key:y.id,value:y.id},o(y.name),9,Y))),128))],512),[[F,u.location]])]),t("div",null,[c[9]||(c[9]=t("label",{for:"product",class:"block text-sm font-medium text-gray-700 mb-1"}," Product ",-1)),$(t("select",{id:"product","onUpdate:modelValue":c[1]||(c[1]=y=>u.product=y),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},[c[8]||(c[8]=t("option",{value:""},"All Products",-1)),(d(!0),i(_,null,k(n.products,y=>(d(),i("option",{key:y.id,value:y.id},o(y.name),9,Z))),128))],512),[[F,u.product]])]),t("div",null,[c[11]||(c[11]=t("label",{for:"timePeriod",class:"block text-sm font-medium text-gray-700 mb-1"}," Time Period ",-1)),$(t("select",{id:"timePeriod","onUpdate:modelValue":c[2]||(c[2]=y=>p.value=y),onChange:r,class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},c[10]||(c[10]=[W('<option value="7">Past 7 days</option><option value="14">Past 2 weeks</option><option value="30">Past month</option><option value="90">Past 3 months</option><option value="custom">Custom range</option>',5)]),544),[[F,p.value]])]),t("div",null,[c[13]||(c[13]=t("label",{for:"analysisDays",class:"block text-sm font-medium text-gray-700 mb-1"}," Analysis Period ",-1)),$(t("select",{id:"analysisDays","onUpdate:modelValue":c[3]||(c[3]=y=>u.analysisDays=y),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},c[12]||(c[12]=[W('<option value="7">7 days</option><option value="14">2 weeks</option><option value="30">30 days</option><option value="60">60 days</option><option value="90">90 days</option>',5)]),512),[[F,u.analysisDays]])])]),p.value==="custom"?(d(),i("div",tt,[t("div",null,[c[14]||(c[14]=t("label",{for:"startDate",class:"block text-sm font-medium text-gray-700 mb-1"}," Start Date ",-1)),$(t("input",{id:"startDate",type:"date","onUpdate:modelValue":c[4]||(c[4]=y=>u.startDate=y),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[I,u.startDate]])]),t("div",null,[c[15]||(c[15]=t("label",{for:"endDate",class:"block text-sm font-medium text-gray-700 mb-1"}," End Date ",-1)),$(t("input",{id:"endDate",type:"date","onUpdate:modelValue":c[5]||(c[5]=y=>u.endDate=y),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[I,u.endDate]])])])):H("",!0),t("div",{class:"mt-6 flex justify-end space-x-3"},[t("button",{onClick:s,class:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"}," Clear Filters "),t("button",{onClick:e,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"}," Apply Filters ")])]))}},st={class:"space-y-6"},ot={key:0,class:"flex justify-center py-12"},at={key:1},rt={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"},lt={class:"bg-white overflow-hidden shadow rounded-lg"},nt={class:"p-5"},it={class:"flex items-center"},dt={class:"ml-5 w-0 flex-1"},ct={class:"text-lg font-medium text-gray-900"},ut={class:"bg-white overflow-hidden shadow rounded-lg"},mt={class:"p-5"},xt={class:"flex items-center"},pt={class:"ml-5 w-0 flex-1"},yt={class:"text-lg font-medium text-gray-900"},gt={class:"bg-white overflow-hidden shadow rounded-lg"},ft={class:"p-5"},ht={class:"flex items-center"},vt={class:"ml-5 w-0 flex-1"},wt={class:"text-lg font-medium text-gray-900"},_t={class:"bg-white shadow overflow-hidden sm:rounded-md mb-8"},kt={class:"overflow-x-auto"},bt={class:"min-w-full divide-y divide-gray-200"},$t={class:"bg-white divide-y divide-gray-200"},St={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},Dt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Ct={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},jt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Mt={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},Pt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Lt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Rt={class:"flex flex-wrap gap-1"},Bt={class:"bg-white shadow overflow-hidden sm:rounded-md"},Ft={class:"overflow-x-auto"},Tt={class:"min-w-full divide-y divide-gray-200"},zt={class:"bg-white divide-y divide-gray-200"},At={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Vt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Et={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},Ut={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Ot={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Ht={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Nt={class:"text-center text-sm text-gray-500 mt-6"},Wt={key:2,class:"text-center py-12"},It={__name:"CurrentStockReport",props:{data:{type:Object,default:null},loading:{type:Boolean,default:!1}},setup(n){const x=n,m=R(()=>{var r;return(r=x.data)!=null&&r.product_summary?x.data.product_summary.reduce((e,s)=>e+s.warehouse_quantity,0):0}),g=R(()=>{var r;return(r=x.data)!=null&&r.product_summary?x.data.product_summary.reduce((e,s)=>e+s.total_machine_stock,0):0}),u=(r,e=5)=>r===0?"bg-red-100 text-red-800":r<e?"bg-orange-100 text-orange-800":"bg-green-100 text-green-800",p=r=>new Date(r).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return(r,e)=>{var s;return d(),i("div",st,[n.loading?(d(),i("div",ot,e[0]||(e[0]=[t("div",{class:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-primary-500"},null,-1)]))):n.data?(d(),i("div",at,[t("div",rt,[t("div",lt,[t("div",nt,[t("div",it,[e[2]||(e[2]=t("div",{class:"flex-shrink-0"},[t("div",{class:"w-8 h-8 bg-blue-500 rounded-md flex items-center justify-center"},[t("svg",{class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})])])],-1)),t("div",dt,[t("dl",null,[e[1]||(e[1]=t("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Total Products",-1)),t("dd",ct,o(((s=n.data.product_summary)==null?void 0:s.length)||0),1)])])])])]),t("div",ut,[t("div",mt,[t("div",xt,[e[4]||(e[4]=t("div",{class:"flex-shrink-0"},[t("div",{class:"w-8 h-8 bg-green-500 rounded-md flex items-center justify-center"},[t("svg",{class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])])],-1)),t("div",pt,[t("dl",null,[e[3]||(e[3]=t("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Total Warehouse Stock",-1)),t("dd",yt,o(m.value),1)])])])])]),t("div",gt,[t("div",ft,[t("div",ht,[e[6]||(e[6]=t("div",{class:"flex-shrink-0"},[t("div",{class:"w-8 h-8 bg-purple-500 rounded-md flex items-center justify-center"},[t("svg",{class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})])])],-1)),t("div",vt,[t("dl",null,[e[5]||(e[5]=t("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Total Machine Stock",-1)),t("dd",wt,o(g.value),1)])])])])])]),t("div",_t,[e[8]||(e[8]=t("div",{class:"px-4 py-5 sm:px-6"},[t("h3",{class:"text-lg leading-6 font-medium text-gray-900"},"Product Stock Summary"),t("p",{class:"mt-1 max-w-2xl text-sm text-gray-500"}," Current stock levels for all products across warehouse and machines. ")],-1)),t("div",kt,[t("table",bt,[e[7]||(e[7]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Product "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Type "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Warehouse Stock "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Machine Stock "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Total Stock "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Machines "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Locations ")])],-1)),t("tbody",$t,[(d(!0),i(_,null,k(n.data.product_summary,a=>(d(),i("tr",{key:a.product_id,class:"hover:bg-gray-50"},[t("td",St,o(a.product_name),1),t("td",Dt,[t("span",{class:h(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",a.product_type==="Soda"?"bg-blue-100 text-blue-800":"bg-orange-100 text-orange-800"])},o(a.product_type),3)]),t("td",Ct,[t("span",{class:h([u(a.warehouse_quantity),"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"])},o(a.warehouse_quantity),3)]),t("td",jt,[t("span",{class:h([u(a.total_machine_stock),"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"])},o(a.total_machine_stock),3)]),t("td",Mt,o(a.total_stock),1),t("td",Pt,o(a.machine_count),1),t("td",Lt,[t("div",Rt,[(d(!0),i(_,null,k(a.locations,c=>(d(),i("span",{key:c,class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-800"},o(c),1))),128))])])]))),128))])])])]),t("div",Bt,[e[10]||(e[10]=t("div",{class:"px-4 py-5 sm:px-6"},[t("h3",{class:"text-lg leading-6 font-medium text-gray-900"},"Machine Stock Details"),t("p",{class:"mt-1 max-w-2xl text-sm text-gray-500"}," Detailed stock levels for each product in each machine. ")],-1)),t("div",Ft,[t("table",Tt,[e[9]||(e[9]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Location "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Machine "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Product "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Stock "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Price "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Slot ")])],-1)),t("tbody",zt,[(d(!0),i(_,null,k(n.data.machine_details,a=>(d(),i("tr",{key:`${a.machine_id}-${a.product_id}`,class:"hover:bg-gray-50"},[t("td",At,o(a.location_name),1),t("td",Vt,o(a.machine_name),1),t("td",Et,o(a.product_name),1),t("td",Ut,[t("span",{class:h([u(a.current_stock),"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"])},o(a.current_stock),3)]),t("td",Ot," $"+o(a.price.toFixed(2)),1),t("td",Ht,o(a.slot||"N/A"),1)]))),128))])])])]),t("div",Nt," Report generated on "+o(p(n.data.generated_at)),1)])):(d(),i("div",Wt,e[11]||(e[11]=[t("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m14 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m14 0H6m14 0l-2-2m0 0l-2-2m2 2l-2 2M6 13l2-2m0 0l2-2m-2 2l-2 2"})],-1),t("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No stock data available",-1),t("p",{class:"mt-1 text-sm text-gray-500"},"Try adjusting your filters or check if products have stock information.",-1)])))])}}},qt={class:"space-y-6"},Gt={key:0,class:"flex justify-center py-12"},Jt={key:1},Kt={class:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-6"},Qt={class:"flex"},Xt={class:"ml-3"},Yt={class:"text-sm text-blue-700"},Zt={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},te={class:"bg-white overflow-hidden shadow rounded-lg"},ee={class:"p-5"},se={class:"flex items-center"},oe={class:"ml-5 w-0 flex-1"},ae={class:"text-lg font-medium text-gray-900"},re={class:"bg-white overflow-hidden shadow rounded-lg"},le={class:"p-5"},ne={class:"flex items-center"},ie={class:"ml-5 w-0 flex-1"},de={class:"text-lg font-medium text-gray-900"},ce={class:"bg-white overflow-hidden shadow rounded-lg"},ue={class:"p-5"},me={class:"flex items-center"},xe={class:"ml-5 w-0 flex-1"},pe={class:"text-lg font-medium text-gray-900"},ye={class:"bg-white overflow-hidden shadow rounded-lg"},ge={class:"p-5"},fe={class:"flex items-center"},he={class:"ml-5 w-0 flex-1"},ve={class:"text-lg font-medium text-gray-900"},we={class:"bg-white shadow overflow-hidden sm:rounded-md mb-8"},_e={class:"overflow-x-auto"},ke={class:"min-w-full divide-y divide-gray-200"},be={class:"bg-white divide-y divide-gray-200"},$e={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},Se={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},De={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Ce={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800"},je={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Me={key:0,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800"},Pe={key:1,class:"text-gray-400"},Le={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Re={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Be={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Fe={class:"flex flex-wrap gap-1"},Te={class:"bg-white shadow overflow-hidden sm:rounded-md"},ze={class:"overflow-x-auto"},Ae={class:"min-w-full divide-y divide-gray-200"},Ve={class:"bg-white divide-y divide-gray-200"},Ee={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Ue={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Oe={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},He={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},Ne={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},We={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Ie={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800"},qe={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Ge={key:0,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800"},Je={key:1,class:"text-gray-400"},Ke={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},Qe={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Xe={class:"text-center text-sm text-gray-500 mt-6"},Ye={key:2,class:"text-center py-12"},Ze={__name:"RestockSummary",props:{data:{type:Object,default:null},loading:{type:Boolean,default:!1},filters:{type:Object,default:()=>({})}},setup(n){const x=n,m=R(()=>{var p;return(p=x.data)!=null&&p.product_summary?x.data.product_summary.reduce((r,e)=>r+e.total_discarded,0):0}),g=p=>new Date(p).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),u=p=>new Date(p).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return(p,r)=>(d(),i("div",qt,[n.loading?(d(),i("div",Gt,r[0]||(r[0]=[t("div",{class:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-primary-500"},null,-1)]))):n.data?(d(),i("div",Jt,[t("div",Kt,[t("div",Qt,[r[3]||(r[3]=t("div",{class:"flex-shrink-0"},[t("svg",{class:"h-5 w-5 text-blue-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"})])],-1)),t("div",Xt,[t("p",Yt,[r[1]||(r[1]=L(" Showing restock activity from ")),t("strong",null,o(g(n.data.date_range.start_date)),1),r[2]||(r[2]=L(" to ")),t("strong",null,o(g(n.data.date_range.end_date)),1),L(" ("+o(n.data.date_range.days)+" days) ",1)])])])]),t("div",Zt,[t("div",te,[t("div",ee,[t("div",se,[r[5]||(r[5]=t("div",{class:"flex-shrink-0"},[t("div",{class:"w-8 h-8 bg-blue-500 rounded-md flex items-center justify-center"},[t("svg",{class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})])])],-1)),t("div",oe,[t("dl",null,[r[4]||(r[4]=t("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Products Restocked",-1)),t("dd",ae,o(n.data.total_products),1)])])])])]),t("div",re,[t("div",le,[t("div",ne,[r[7]||(r[7]=t("div",{class:"flex-shrink-0"},[t("div",{class:"w-8 h-8 bg-green-500 rounded-md flex items-center justify-center"},[t("svg",{class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])])],-1)),t("div",ie,[t("dl",null,[r[6]||(r[6]=t("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Total Restocks",-1)),t("dd",de,o(n.data.total_restocks),1)])])])])]),t("div",ce,[t("div",ue,[t("div",me,[r[9]||(r[9]=t("div",{class:"flex-shrink-0"},[t("div",{class:"w-8 h-8 bg-purple-500 rounded-md flex items-center justify-center"},[t("svg",{class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 11l5-5m0 0l5 5m-5-5v12"})])])],-1)),t("div",xe,[t("dl",null,[r[8]||(r[8]=t("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Units Restocked",-1)),t("dd",pe,o(n.data.total_units_restocked),1)])])])])]),t("div",ye,[t("div",ge,[t("div",fe,[r[11]||(r[11]=t("div",{class:"flex-shrink-0"},[t("div",{class:"w-8 h-8 bg-red-500 rounded-md flex items-center justify-center"},[t("svg",{class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})])])],-1)),t("div",he,[t("dl",null,[r[10]||(r[10]=t("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Units Discarded",-1)),t("dd",ve,o(m.value),1)])])])])])]),t("div",we,[r[13]||(r[13]=t("div",{class:"px-4 py-5 sm:px-6"},[t("h3",{class:"text-lg leading-6 font-medium text-gray-900"},"Product Restock Summary"),t("p",{class:"mt-1 max-w-2xl text-sm text-gray-500"}," Summary of restock activities by product for the selected time period. ")],-1)),t("div",_e,[t("table",ke,[r[12]||(r[12]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Product "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Type "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Total Restocked "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Total Discarded "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Restock Count "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Machines "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Locations ")])],-1)),t("tbody",be,[(d(!0),i(_,null,k(n.data.product_summary,e=>(d(),i("tr",{key:e.product_id,class:"hover:bg-gray-50"},[t("td",$e,o(e.product_name),1),t("td",Se,[t("span",{class:h(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",e.product_type==="Soda"?"bg-blue-100 text-blue-800":"bg-orange-100 text-orange-800"])},o(e.product_type),3)]),t("td",De,[t("span",Ce,o(e.total_restocked),1)]),t("td",je,[e.total_discarded>0?(d(),i("span",Me,o(e.total_discarded),1)):(d(),i("span",Pe,"0"))]),t("td",Le,o(e.restock_count),1),t("td",Re,o(e.machines_restocked),1),t("td",Be,[t("div",Fe,[(d(!0),i(_,null,k(e.locations,s=>(d(),i("span",{key:s,class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-800"},o(s),1))),128))])])]))),128))])])])]),t("div",Te,[r[15]||(r[15]=t("div",{class:"px-4 py-5 sm:px-6"},[t("h3",{class:"text-lg leading-6 font-medium text-gray-900"},"Detailed Restock History"),t("p",{class:"mt-1 max-w-2xl text-sm text-gray-500"}," Complete history of all restock activities in the selected time period. ")],-1)),t("div",ze,[t("table",Ae,[r[14]||(r[14]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Date "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Location "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Machine "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Product "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Before "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Restocked "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Discarded "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," After "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," User ")])],-1)),t("tbody",Ve,[(d(!0),i(_,null,k(n.data.restock_details,e=>(d(),i("tr",{key:`${e.machine_id}-${e.product_id}-${e.visit_date}`,class:"hover:bg-gray-50"},[t("td",Ee,o(u(e.visit_date)),1),t("td",Ue,o(e.location_name),1),t("td",Oe,o(e.machine_name),1),t("td",He,o(e.product_name),1),t("td",Ne,o(e.stock_before),1),t("td",We,[t("span",Ie," +"+o(e.restocked),1)]),t("td",qe,[e.discarded>0?(d(),i("span",Ge," -"+o(e.discarded),1)):(d(),i("span",Je,"0"))]),t("td",Ke,o(e.stock_after),1),t("td",Qe,o(e.user),1)]))),128))])])])]),t("div",Xe," Report generated on "+o(u(n.data.generated_at)),1)])):(d(),i("div",Ye,r[16]||(r[16]=[t("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})],-1),t("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No restock data available",-1),t("p",{class:"mt-1 text-sm text-gray-500"},"Try adjusting your date range or filters to see restock activities.",-1)])))]))}},ts={class:"space-y-6"},es={key:0,class:"flex justify-center py-12"},ss={key:1},os={class:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-6"},as={class:"flex"},rs={class:"ml-3"},ls={class:"text-sm text-blue-700"},ns={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},is={class:"bg-white overflow-hidden shadow rounded-lg"},ds={class:"p-5"},cs={class:"flex items-center"},us={class:"ml-5 w-0 flex-1"},ms={class:"text-lg font-medium text-gray-900"},xs={class:"bg-white overflow-hidden shadow rounded-lg"},ps={class:"p-5"},ys={class:"flex items-center"},gs={class:"ml-5 w-0 flex-1"},fs={class:"text-lg font-medium text-gray-900"},hs={class:"bg-white overflow-hidden shadow rounded-lg"},vs={class:"p-5"},ws={class:"flex items-center"},_s={class:"ml-5 w-0 flex-1"},ks={class:"text-lg font-medium text-gray-900"},bs={class:"bg-white overflow-hidden shadow rounded-lg"},$s={class:"p-5"},Ss={class:"flex items-center"},Ds={class:"ml-5 w-0 flex-1"},Cs={class:"text-lg font-medium text-gray-900"},js={class:"bg-white shadow overflow-hidden sm:rounded-md mb-8"},Ms={class:"overflow-x-auto"},Ps={class:"min-w-full divide-y divide-gray-200"},Ls={class:"bg-white divide-y divide-gray-200"},Rs={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},Bs={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Fs={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Ts={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},zs={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},As={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Vs={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Es={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Us={class:"flex space-x-1"},Os={key:0,class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-red-100 text-red-800"},Hs={key:1,class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-orange-100 text-orange-800"},Ns={class:"bg-white shadow overflow-hidden sm:rounded-md"},Ws={class:"overflow-x-auto"},Is={class:"min-w-full divide-y divide-gray-200"},qs={class:"bg-white divide-y divide-gray-200"},Gs={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Js={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Ks={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},Qs={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Xs={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Ys={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Zs={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},to={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},eo={key:0,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800"},so={key:1,class:"text-gray-400"},oo={class:"text-center text-sm text-gray-500 mt-6"},ao={key:2,class:"text-center py-12"},ro={__name:"StockCoverageEstimate",props:{data:{type:Object,default:null},loading:{type:Boolean,default:!1}},setup(n){const x=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),m=e=>new Date(e).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),g=(e,s=5)=>e===0?"bg-red-100 text-red-800":e<s?"bg-orange-100 text-orange-800":"bg-green-100 text-green-800",u=e=>e<1?"bg-red-100 text-red-800":e<2?"bg-orange-100 text-orange-800":e<4?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800",p=e=>{switch(e){case"critical":return"bg-red-100 text-red-800";case"low":return"bg-orange-100 text-orange-800";case"moderate":return"bg-yellow-100 text-yellow-800";case"good":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},r=e=>{switch(e){case"critical":return"Critical";case"low":return"Low";case"moderate":return"Moderate";case"good":return"Good";default:return"Unknown"}};return(e,s)=>(d(),i("div",ts,[n.loading?(d(),i("div",es,s[0]||(s[0]=[t("div",{class:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-primary-500"},null,-1)]))):n.data?(d(),i("div",ss,[t("div",os,[t("div",as,[s[3]||(s[3]=t("div",{class:"flex-shrink-0"},[t("svg",{class:"h-5 w-5 text-blue-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"})])],-1)),t("div",rs,[t("p",ls,[s[1]||(s[1]=L(" Analysis based on consumption patterns from ")),t("strong",null,o(x(n.data.analysis_period.start_date)),1),s[2]||(s[2]=L(" to ")),t("strong",null,o(x(n.data.analysis_period.end_date)),1),L(" ("+o(n.data.analysis_period.days)+" days) ",1)])])])]),t("div",ns,[t("div",is,[t("div",ds,[t("div",cs,[s[5]||(s[5]=t("div",{class:"flex-shrink-0"},[t("div",{class:"w-8 h-8 bg-blue-500 rounded-md flex items-center justify-center"},[t("svg",{class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})])])],-1)),t("div",us,[t("dl",null,[s[4]||(s[4]=t("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Products Analyzed",-1)),t("dd",ms,o(n.data.summary_stats.total_products),1)])])])])]),t("div",xs,[t("div",ps,[t("div",ys,[s[7]||(s[7]=t("div",{class:"flex-shrink-0"},[t("div",{class:"w-8 h-8 bg-red-500 rounded-md flex items-center justify-center"},[t("svg",{class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})])])],-1)),t("div",gs,[t("dl",null,[s[6]||(s[6]=t("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Critical Stock",-1)),t("dd",fs,o(n.data.summary_stats.critical_count),1)])])])])]),t("div",hs,[t("div",vs,[t("div",ws,[s[9]||(s[9]=t("div",{class:"flex-shrink-0"},[t("div",{class:"w-8 h-8 bg-orange-500 rounded-md flex items-center justify-center"},[t("svg",{class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])])],-1)),t("div",_s,[t("dl",null,[s[8]||(s[8]=t("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Low Stock",-1)),t("dd",ks,o(n.data.summary_stats.low_count),1)])])])])]),t("div",bs,[t("div",$s,[t("div",Ss,[s[11]||(s[11]=t("div",{class:"flex-shrink-0"},[t("div",{class:"w-8 h-8 bg-green-500 rounded-md flex items-center justify-center"},[t("svg",{class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])])],-1)),t("div",Ds,[t("dl",null,[s[10]||(s[10]=t("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Restock Recommended",-1)),t("dd",Cs,o(n.data.summary_stats.restock_recommended),1)])])])])])]),t("div",js,[s[13]||(s[13]=t("div",{class:"px-4 py-5 sm:px-6"},[t("h3",{class:"text-lg leading-6 font-medium text-gray-900"},"Product Coverage Summary"),t("p",{class:"mt-1 max-w-2xl text-sm text-gray-500"}," Stock coverage estimates by product based on historical consumption patterns. ")],-1)),t("div",Ms,[t("table",Ps,[s[12]||(s[12]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Product "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Type "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Machine Stock "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Warehouse Stock "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Weekly Consumption "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Avg Weeks Remaining "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Machines "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Alerts ")])],-1)),t("tbody",Ls,[(d(!0),i(_,null,k(n.data.product_summary,a=>(d(),i("tr",{key:a.product_id,class:"hover:bg-gray-50"},[t("td",Rs,o(a.product_name),1),t("td",Bs,[t("span",{class:h(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",a.product_type==="Soda"?"bg-blue-100 text-blue-800":"bg-orange-100 text-orange-800"])},o(a.product_type),3)]),t("td",Fs,o(a.total_machine_stock),1),t("td",Ts,o(a.warehouse_quantity),1),t("td",zs,o(a.total_weekly_consumption.toFixed(1)),1),t("td",As,[t("span",{class:h([u(a.avg_weeks_remaining),"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"])},o(a.avg_weeks_remaining)+" weeks ",3)]),t("td",Vs,o(a.machine_count),1),t("td",Es,[t("div",Us,[a.critical_machines>0?(d(),i("span",Os,o(a.critical_machines)+" Critical ",1)):H("",!0),a.low_machines>0?(d(),i("span",Hs,o(a.low_machines)+" Low ",1)):H("",!0)])])]))),128))])])])]),t("div",Ns,[s[15]||(s[15]=t("div",{class:"px-4 py-5 sm:px-6"},[t("h3",{class:"text-lg leading-6 font-medium text-gray-900"},"Machine Coverage Details"),t("p",{class:"mt-1 max-w-2xl text-sm text-gray-500"}," Detailed stock coverage estimates for each product in each machine. ")],-1)),t("div",Ws,[t("table",Is,[s[14]||(s[14]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Location "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Machine "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Product "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Current Stock "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Weekly Consumption "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Weeks Remaining "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Action ")])],-1)),t("tbody",qs,[(d(!0),i(_,null,k(n.data.machine_estimates,a=>(d(),i("tr",{key:`${a.machine_id}-${a.product_id}`,class:h(a.status==="critical"?"bg-red-50":a.status==="low"?"bg-orange-50":"hover:bg-gray-50")},[t("td",Gs,o(a.location_name),1),t("td",Js,o(a.machine_name),1),t("td",Ks,o(a.product_name),1),t("td",Qs,[t("span",{class:h([g(a.current_stock),"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"])},o(a.current_stock),3)]),t("td",Xs,o(a.weekly_consumption),1),t("td",Ys,[t("span",{class:h([u(a.weeks_remaining),"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"])},o(a.weeks_remaining)+" weeks ",3)]),t("td",Zs,[t("span",{class:h([p(a.status),"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"])},o(r(a.status)),3)]),t("td",to,[a.restock_recommended?(d(),i("span",eo," Restock Soon ")):(d(),i("span",so,"No action needed"))])],2))),128))])])])]),t("div",oo," Report generated on "+o(m(n.data.generated_at)),1)])):(d(),i("div",ao,s[16]||(s[16]=[t("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})],-1),t("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No coverage data available",-1),t("p",{class:"mt-1 text-sm text-gray-500"}," Try adjusting your analysis period or ensure there is sufficient historical restock data. ",-1)])))]))}},lo={key:0,class:"flex justify-center py-20"},no={key:1,class:"bg-red-50 border-l-4 border-red-400 p-4 mb-6 rounded-r-lg shadow-sm"},io={class:"flex"},co={class:"ml-3"},uo={class:"text-sm text-red-700"},mo={key:2},xo={class:"mb-6"},po={class:"border-b border-gray-200"},yo={class:"-mb-px flex space-x-8","aria-label":"Tabs"},go=["onClick"],bo={__name:"Inventory",setup(n){const x=b("current-stock"),m=[{id:"current-stock",name:"Current Stock"},{id:"restock-summary",name:"Restock Summary"},{id:"stock-coverage",name:"Stock Coverage"}],{loading:g,error:u,locations:p,products:r,filters:e,currentStockData:s,currentStockLoading:a,restockSummaryData:c,restockSummaryLoading:y,stockCoverageData:z,stockCoverageLoading:A,applyFilters:V,initialize:E}=K(),M=C=>{Object.assign(e.value,C)};return J(()=>{E()}),(C,v)=>(d(),i("div",null,[v[2]||(v[2]=t("h1",{class:"text-2xl font-semibold text-gray-900 mb-6"},"Inventory Reports",-1)),f(g)?(d(),i("div",lo,v[0]||(v[0]=[t("div",{class:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-500"},null,-1)]))):f(u)?(d(),i("div",no,[t("div",io,[v[1]||(v[1]=t("div",{class:"flex-shrink-0"},[t("svg",{class:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})])],-1)),t("div",co,[t("p",uo,o(f(u)),1)])])])):(d(),i("div",mo,[T(et,{filters:f(e),locations:f(p),products:f(r),onApplyFilters:f(V),onUpdateFilters:M},null,8,["filters","locations","products","onApplyFilters"]),t("div",xo,[t("div",po,[t("nav",yo,[(d(),i(_,null,k(m,j=>t("button",{key:j.id,onClick:U=>x.value=j.id,class:h([x.value===j.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm"])},o(j.name),11,go)),64))])])]),$(T(It,{data:f(s),loading:f(a)},null,8,["data","loading"]),[[O,x.value==="current-stock"]]),$(T(Ze,{data:f(c),loading:f(y),filters:f(e)},null,8,["data","loading","filters"]),[[O,x.value==="restock-summary"]]),$(T(ro,{data:f(z),loading:f(A)},null,8,["data","loading"]),[[O,x.value==="stock-coverage"]])]))]))}};export{bo as default};
