import{u as J,r as x,o as K,c,a as e,i as E,t as d,F as M,e as j,j as X,w as C,v as Y,k as $,d as Z,g as m,f as I}from"./index-DasmOlQa.js";import{a as u}from"./api-Dk8E0-vH.js";const ee={key:0,class:"flex justify-center"},te={key:1,class:"bg-red-50 border-l-4 border-red-400 p-4 mb-4"},se={class:"flex"},oe={class:"ml-3"},ie={class:"text-sm text-red-700"},ne={key:2,class:"bg-white shadow overflow-hidden sm:rounded-lg"},ae={key:3,class:"bg-white shadow overflow-hidden sm:rounded-lg"},re={role:"list",class:"divide-y divide-gray-200"},de={class:"flex items-center justify-between"},le={class:"flex-1 min-w-0"},ce={class:"text-sm font-medium text-primary-600 truncate"},me={class:"text-sm text-gray-500"},ue={class:"ml-4 flex-shrink-0 flex space-x-2"},ve=["onClick"],fe=["onClick"],pe=["onClick"],ge={key:4,class:"fixed inset-0 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},xe={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},ye={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full"},be={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},he={class:"sm:flex sm:items-start"},_e={class:"mt-3 text-center sm:mt-0 sm:text-left w-full"},ke={class:"text-lg leading-6 font-medium text-gray-900",id:"modal-title"},we={class:"mt-4 space-y-4"},Re=["value"],Ce={key:0},Ie={class:"space-y-4"},De={class:"flex justify-between items-center mb-2"},Ve={class:"text-sm font-medium text-gray-900"},Ee={class:"text-sm text-gray-500"},Me={class:"space-y-2"},je={key:0,class:"text-sm text-gray-500 italic p-2 text-center"},$e={class:"col-span-1 text-sm font-medium text-gray-900 text-center bg-gray-100 rounded-md py-1"},qe={class:"col-span-3 text-sm font-medium text-gray-900"},Ne={class:"col-span-2"},Se={class:"mt-1 flex rounded-md shadow-sm"},Le=["onClick"],Fe=["onUpdate:modelValue"],Pe=["onClick"],Ue={class:"col-span-2"},Ae={class:"mt-1 flex rounded-md shadow-sm"},Be=["onClick"],Te=["onUpdate:modelValue"],Qe=["onClick"],We={class:"col-span-2"},ze={class:"mt-1 flex rounded-md shadow-sm"},Ge=["onClick"],Oe=["onUpdate:modelValue"],He=["onClick"],Je={class:"col-span-2 text-sm text-gray-500"},Ke={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},Xe={key:5,class:"fixed inset-0 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},Ye={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},Ze={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},et={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},tt={class:"sm:flex sm:items-start"},st={class:"mt-3 text-center sm:mt-0 sm:text-left w-full"},ot={class:"mt-4"},it={class:"grid grid-cols-1 gap-x-4 gap-y-6 sm:grid-cols-2"},nt={class:"sm:col-span-1"},at={class:"mt-1 text-sm text-gray-900"},rt={class:"sm:col-span-1"},dt={class:"mt-1 text-sm text-gray-900"},lt={class:"sm:col-span-1"},ct={class:"mt-1 text-sm text-gray-900"},mt={class:"sm:col-span-2"},ut={class:"mt-1 text-sm text-gray-900"},vt={class:"mt-6"},ft={class:"mt-2 border border-gray-200 rounded-md overflow-hidden"},pt={class:"divide-y divide-gray-200"},gt={class:"grid grid-cols-6 gap-2 items-center"},xt={class:"col-span-1 text-center bg-gray-100 rounded-md py-1 text-sm font-medium text-gray-900"},yt={class:"col-span-1 text-sm font-medium text-gray-900"},bt={class:"col-span-1 text-center text-sm text-gray-500"},ht={class:"col-span-1 text-center text-sm text-gray-500"},_t={class:"col-span-1 text-center text-sm text-green-600 font-medium"},kt={class:"col-span-1 text-center text-sm font-medium text-gray-900"},wt={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},Rt={key:6,class:"fixed inset-0 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},Ct={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},It={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},Dt={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},Vt={class:"sm:flex sm:items-start"},Et={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},Mt={class:"mt-2"},jt={class:"text-sm text-gray-500"},$t={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},Lt={__name:"Restocks",setup(qt){const D=J(),S=x([]),U=x([]),b=x([]),L=x(!0),h=x(null),w=x(!1),q=x(!1),R=x(!1),_=x(null),k=x(""),V=x(!1),N=x(null),y=x({id:null,visit_date:"",notes:"",location:"",machines:[]}),F=i=>i?new Date(i).toLocaleString():"",P=async()=>{L.value=!0;try{const i=await u.getVisits();S.value=i.data.map(t=>({id:t.id,location_id:t.location,location_name:t.location_name,visit_date:t.visit_date,notes:t.notes,user_name:t.user_name}))}catch(i){console.error("Error fetching visits:",i),h.value="Failed to load visits. Please try again later."}finally{L.value=!1}},T=async()=>{try{const i=await u.getLocations();U.value=i.data}catch(i){console.error("Error fetching locations:",i)}},A=async()=>{if(!k.value){b.value=[];return}try{const t=(await u.getMachines({location:k.value})).data,v=[];for(const f of t){const l=(await u.getMachineItems({machine:f.id})).data.map(o=>({id:o.product,name:o.product_name,price:o.price,slot:o.slot,current_stock:o.current_stock||0,stock_before:o.current_stock||0,discarded:0,restocked:0})).sort((o,r)=>o.slot-r.slot);v.push({...f,products:l})}b.value=v}catch(i){console.error("Error fetching machines and products:",i),h.value="Failed to load machine products. Please try again."}},B=()=>{R.value=!1,_.value=null,k.value="",b.value=[],y.value={id:null,visit_date:new Date().toISOString().slice(0,16),notes:"",location:"",machines:[]},w.value=!0},Q=async i=>{R.value=!0,_.value=i,k.value=i.location_id,y.value={id:i.id,visit_date:i.visit_date,notes:i.notes,location:i.location_id},await A();try{const v=(await u.getRestocks({visit:i.id})).data;for(const f of v){const l=(await u.getRestockEntries({visit_machine_restock:f.id})).data,o=b.value.findIndex(r=>r.id===f.machine);if(o!==-1){const r=b.value[o];l.forEach(p=>{const s=r.products.findIndex(n=>n.id===p.product);s!==-1&&(r.products[s].stock_before=p.stock_before,r.products[s].discarded=p.discarded||0,r.products[s].restocked=p.restocked)})}}w.value=!0}catch(t){console.error("Error loading visit for editing:",t),h.value="Failed to load visit details for editing. Please try again."}},W=async i=>{_.value=i;try{const v=(await u.getRestocks({visit:i.id})).data;let f=[];for(const a of v){const o=(await u.getRestockEntries({visit_machine_restock:a.id})).data,p=(await u.getMachineItems({machine:a.machine})).data,s=o.map(n=>{const g=p.find(H=>H.product===n.product);return{...n,slot:g?g.slot:null}});f.push(...s)}f.sort((a,l)=>a.visit_machine_restock!==l.visit_machine_restock?0:(a.slot||999)-(l.slot||999)),_.value={...i,entries:f.map(a=>({id:a.id,product_name:a.product_name,product_id:a.product,previous_quantity:a.stock_before,quantity_discarded:a.discarded,quantity_added:a.restocked,machine_info:a.machine_info,slot:a.slot}))},q.value=!0}catch(t){console.error("Error fetching visit details:",t),h.value="Failed to load visit details. Please try again."}},z=async()=>{var i;try{if(b.value.some(a=>a.products.some(l=>l.stock_before===""||l.restocked===""))){h.value="Please record stock levels for all products in all machines";return}let v;const f={location:k.value,visit_date:y.value.visit_date,notes:y.value.notes,user:(i=D.user)==null?void 0:i.id};console.log("Saving visit with data:",f),R.value&&y.value.id?v=(await u.updateVisit(y.value.id,f)).data.id:v=(await u.createVisit(f)).data.id;for(const a of b.value){let l;if(R.value)try{const o=await u.getRestocks({visit:v,machine:a.id});if(o.data.length>0){const r=o.data[0],p={visit:v,machine:a.id,notes:r.notes||""};await u.updateRestock(r.id,p),l=r.id}else{const r={visit:v,machine:a.id,notes:""};l=(await u.createRestock(r)).data.id}}catch(o){throw console.error("Error handling machine restock:",o),o}else{const o={visit:v,machine:a.id,notes:""};l=(await u.createRestock(o)).data.id}for(const o of a.products)try{if(R.value){const r=await u.getRestockEntries({visit_machine_restock:l,product:o.id}),p={visit_machine_restock:l,product:o.id,stock_before:parseInt(o.stock_before)||0,discarded:parseInt(o.discarded)||0,restocked:parseInt(o.restocked)||0};r.data.length>0?await u.updateRestockEntry(r.data[0].id,p):await u.createRestockEntry(p)}else{const r={visit_machine_restock:l,product:o.id,stock_before:parseInt(o.stock_before)||0,discarded:parseInt(o.discarded)||0,restocked:parseInt(o.restocked)||0};await u.createRestockEntry(r)}}catch(r){throw console.error("Error handling restock entry:",r),r}}w.value=!1,await P()}catch(t){console.error("Error saving restock visit:",t),h.value="Failed to save visit. Please try again."}},G=i=>{N.value=i,V.value=!0},O=async()=>{try{await u.deleteVisit(N.value.id),V.value=!1,await P()}catch(i){console.error("Error deleting visit:",i),h.value="Failed to delete visit. Please try again."}};return K(async()=>{D.isAuthenticated&&!D.user&&await D.fetchUser(),console.log("Current user:",D.user),await Promise.all([P(),T()])}),(i,t)=>{var v,f,a,l,o,r,p;return m(),c("div",null,[e("div",{class:"flex justify-between items-center mb-6"},[t[9]||(t[9]=e("h1",{class:"text-2xl font-semibold text-gray-900"},"Location Visits",-1)),e("button",{onClick:B,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"}," Record New Visit ")]),L.value?(m(),c("div",ee,t[10]||(t[10]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-500"},null,-1)]))):h.value?(m(),c("div",te,[e("div",se,[t[11]||(t[11]=e("div",{class:"flex-shrink-0"},[e("span",{class:"text-red-400"},"⚠")],-1)),e("div",oe,[e("p",ie,d(h.value),1)])])])):S.value.length===0?(m(),c("div",ne,[e("div",{class:"px-4 py-5 sm:p-6 text-center"},[t[12]||(t[12]=e("h3",{class:"text-lg leading-6 font-medium text-gray-900"},"No visits recorded",-1)),t[13]||(t[13]=e("div",{class:"mt-2 max-w-xl text-sm text-gray-500"},[e("p",null,"Get started by recording your first location visit.")],-1)),e("div",{class:"mt-5"},[e("button",{onClick:B,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"}," Record New Visit ")])])])):(m(),c("div",ae,[e("ul",re,[(m(!0),c(M,null,j(S.value,s=>(m(),c("li",{key:s.id,class:"px-4 py-4 sm:px-6"},[e("div",de,[e("div",le,[e("p",ce,d(s.location_name),1),e("p",me,d(F(s.visit_date)),1)]),e("div",ue,[e("button",{onClick:n=>W(s),class:"inline-flex items-center px-3 py-1 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"}," View Details ",8,ve),e("button",{onClick:n=>Q(s),class:"inline-flex items-center px-3 py-1 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"}," Edit ",8,fe),e("button",{onClick:n=>G(s),class:"inline-flex items-center px-3 py-1 border border-transparent text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"}," Delete ",8,pe)])])]))),128))])])),w.value?(m(),c("div",ge,[e("div",xe,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:t[0]||(t[0]=s=>w.value=!1)}),t[29]||(t[29]=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"​",-1)),e("div",ye,[e("form",{onSubmit:X(z,["prevent"])},[e("div",be,[e("div",he,[e("div",_e,[e("h3",ke,d(R.value?"Edit Visit":"Record New Visit"),1),e("div",we,[e("div",null,[t[15]||(t[15]=e("label",{for:"location",class:"block text-sm font-medium text-gray-700"},"Location",-1)),C(e("select",{id:"location",name:"location","onUpdate:modelValue":t[1]||(t[1]=s=>k.value=s),onChange:A,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md",required:""},[t[14]||(t[14]=e("option",{value:"",disabled:""},"Select a location",-1)),(m(!0),c(M,null,j(U.value,s=>(m(),c("option",{key:s.id,value:s.id},d(s.name),9,Re))),128))],544),[[Y,k.value]])]),e("div",null,[t[16]||(t[16]=e("label",{for:"visit_date",class:"block text-sm font-medium text-gray-700"},"Visit Date",-1)),C(e("input",{type:"datetime-local",name:"visit_date",id:"visit_date","onUpdate:modelValue":t[2]||(t[2]=s=>y.value.visit_date=s),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",required:""},null,512),[[$,y.value.visit_date]])]),b.value.length>0?(m(),c("div",Ce,[t[26]||(t[26]=e("h4",{class:"text-sm font-medium text-gray-700 mb-2"},"Machines at Location",-1)),e("div",Ie,[(m(!0),c(M,null,j(b.value,s=>(m(),c("div",{key:s.id,class:"border rounded-lg p-4"},[e("div",De,[e("h5",Ve,d(s.machine_type)+" ("+d(s.model)+") ",1),e("div",Ee,d(s.products.length)+" products ",1)]),e("div",Me,[s.products.length===0?(m(),c("div",je," No products in this machine ")):E("",!0),(m(!0),c(M,null,j(s.products,n=>(m(),c("div",{key:n.id,class:"grid grid-cols-12 gap-4 items-center"},[e("div",$e,d(n.slot),1),e("div",qe,d(n.name),1),e("div",Ne,[t[19]||(t[19]=e("label",{class:"block text-xs text-gray-500"},"Current Stock",-1)),e("div",Se,[e("button",{type:"button",onClick:g=>n.stock_before=Math.max(0,(parseInt(n.stock_before)||0)-1),class:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50"},t[17]||(t[17]=[e("span",{class:"sr-only"},"Decrease",-1),I(" - ")]),8,Le),C(e("input",{type:"number","onUpdate:modelValue":g=>n.stock_before=g,min:"0",class:"focus:ring-primary-500 focus:border-primary-500 block w-full border-gray-300 rounded-none text-center sm:text-sm",required:""},null,8,Fe),[[$,n.stock_before]]),e("button",{type:"button",onClick:g=>n.stock_before=(parseInt(n.stock_before)||0)+1,class:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50"},t[18]||(t[18]=[e("span",{class:"sr-only"},"Increase",-1),I(" + ")]),8,Pe)])]),e("div",Ue,[t[22]||(t[22]=e("label",{class:"block text-xs text-gray-500"},"Discarded Amount",-1)),e("div",Ae,[e("button",{type:"button",onClick:g=>n.discarded=Math.max(0,(parseInt(n.discarded)||0)-1),class:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50"},t[20]||(t[20]=[e("span",{class:"sr-only"},"Decrease",-1),I(" - ")]),8,Be),C(e("input",{type:"number","onUpdate:modelValue":g=>n.discarded=g,min:"0",class:"focus:ring-primary-500 focus:border-primary-500 block w-full border-gray-300 rounded-none text-center sm:text-sm",required:""},null,8,Te),[[$,n.discarded]]),e("button",{type:"button",onClick:g=>n.discarded=(parseInt(n.discarded)||0)+1,class:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50"},t[21]||(t[21]=[e("span",{class:"sr-only"},"Increase",-1),I(" + ")]),8,Qe)])]),e("div",We,[t[25]||(t[25]=e("label",{class:"block text-xs text-gray-500"},"Restock Amount",-1)),e("div",ze,[e("button",{type:"button",onClick:g=>n.restocked=Math.max(0,(parseInt(n.restocked)||0)-1),class:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50"},t[23]||(t[23]=[e("span",{class:"sr-only"},"Decrease",-1),I(" - ")]),8,Ge),C(e("input",{type:"number","onUpdate:modelValue":g=>n.restocked=g,min:"0",class:"focus:ring-primary-500 focus:border-primary-500 block w-full border-gray-300 rounded-none text-center sm:text-sm",required:""},null,8,Oe),[[$,n.restocked]]),e("button",{type:"button",onClick:g=>n.restocked=(parseInt(n.restocked)||0)+1,class:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50"},t[24]||(t[24]=[e("span",{class:"sr-only"},"Increase",-1),I(" + ")]),8,He)])]),e("div",Je," New Total: "+d((parseInt(n.stock_before)||0)-(parseInt(n.discarded)||0)+(parseInt(n.restocked)||0)),1)]))),128))])]))),128))])])):E("",!0),e("div",null,[t[27]||(t[27]=e("label",{for:"notes",class:"block text-sm font-medium text-gray-700"},"Visit Notes",-1)),C(e("textarea",{id:"notes",name:"notes",rows:"2","onUpdate:modelValue":t[3]||(t[3]=s=>y.value.notes=s),class:"shadow-sm focus:ring-primary-500 focus:border-primary-500 mt-1 block w-full sm:text-sm border border-gray-300 rounded-md"},null,512),[[$,y.value.notes]])])])])])]),e("div",Ke,[t[28]||(t[28]=e("button",{type:"submit",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary-600 text-base font-medium text-white hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:ml-3 sm:w-auto sm:text-sm"}," Save Visit ",-1)),e("button",{type:"button",onClick:t[4]||(t[4]=s=>w.value=!1),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"}," Cancel ")])],32)])])])):E("",!0),q.value?(m(),c("div",Xe,[e("div",Ye,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:t[5]||(t[5]=s=>q.value=!1)}),t[37]||(t[37]=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"​",-1)),e("div",Ze,[e("div",et,[e("div",tt,[e("div",st,[t[36]||(t[36]=e("h3",{class:"text-lg leading-6 font-medium text-gray-900",id:"modal-title"}," Restock Details ",-1)),e("div",ot,[e("dl",it,[e("div",nt,[t[30]||(t[30]=e("dt",{class:"text-sm font-medium text-gray-500"},"Location",-1)),e("dd",at,d((v=_.value)==null?void 0:v.location_name),1)]),e("div",rt,[t[31]||(t[31]=e("dt",{class:"text-sm font-medium text-gray-500"},"Visit Date",-1)),e("dd",dt,d(F((f=_.value)==null?void 0:f.visit_date)),1)]),e("div",lt,[t[32]||(t[32]=e("dt",{class:"text-sm font-medium text-gray-500"},"Restocked By",-1)),e("dd",ct,d((a=_.value)==null?void 0:a.user_name),1)]),e("div",mt,[t[33]||(t[33]=e("dt",{class:"text-sm font-medium text-gray-500"},"Notes",-1)),e("dd",ut,d(((l=_.value)==null?void 0:l.notes)||"No notes"),1)])]),e("div",vt,[t[35]||(t[35]=e("h4",{class:"text-sm font-medium text-gray-500"},"Restocked Items",-1)),e("div",ft,[t[34]||(t[34]=Z('<div class="px-4 py-3 bg-gray-50 text-xs font-medium text-gray-500 uppercase tracking-wider"><div class="grid grid-cols-6 gap-2"><div class="col-span-1 text-center">Slot</div><div class="col-span-1">Product</div><div class="col-span-1 text-center">Prev Qty</div><div class="col-span-1 text-center">Discarded</div><div class="col-span-1 text-center">Added</div><div class="col-span-1 text-center">New Qty</div></div></div>',1)),e("div",pt,[(m(!0),c(M,null,j((o=_.value)==null?void 0:o.entries,s=>(m(),c("div",{key:s.id,class:"px-4 py-3"},[e("div",gt,[e("div",xt,d(s.slot||"-"),1),e("div",yt,d(s.product_name),1),e("div",bt,d(s.previous_quantity),1),e("div",ht,d(s.quantity_discarded),1),e("div",_t," +"+d(s.quantity_added),1),e("div",kt,d(s.previous_quantity+s.quantity_added-s.quantity_discarded),1)])]))),128))])])])])])])]),e("div",wt,[e("button",{type:"button",onClick:t[6]||(t[6]=s=>q.value=!1),class:"w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:w-auto sm:text-sm"}," Close ")])])])])):E("",!0),V.value?(m(),c("div",Rt,[e("div",Ct,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:t[7]||(t[7]=s=>V.value=!1)}),t[40]||(t[40]=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"​",-1)),e("div",It,[e("div",Dt,[e("div",Vt,[t[39]||(t[39]=e("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10"},[e("svg",{class:"h-6 w-6 text-red-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1)),e("div",Et,[t[38]||(t[38]=e("h3",{class:"text-lg leading-6 font-medium text-gray-900",id:"modal-title"}," Delete Visit ",-1)),e("div",Mt,[e("p",jt," Are you sure you want to delete this visit to "+d((r=N.value)==null?void 0:r.location_name)+" on "+d(F((p=N.value)==null?void 0:p.visit_date))+"? This action will also reverse all inventory changes made during this visit. This action cannot be undone. ",1)])])])]),e("div",$t,[e("button",{type:"button",onClick:O,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm"}," Delete "),e("button",{type:"button",onClick:t[8]||(t[8]=s=>V.value=!1),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"}," Cancel ")])])])])):E("",!0)])}}};export{Lt as default};
