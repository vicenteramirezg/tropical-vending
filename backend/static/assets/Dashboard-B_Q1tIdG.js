import{a as b}from"./api-IWDa62Jn.js";import{r as f,a as C,c as n,o as a,b as t,w as y,v as g,d as L,F as _,e as k,t as i,f as $,g as S,h as u,n as w,i as T,j as F,k as j,l as R,u as m}from"./index-QfMVkJ_U.js";import{_ as V}from"./_plugin-vue_export-helper-DlAUqK2U.js";function D(){const o=f(!0),r=f(null),e=f([]),s=f({locations:0,machines:0,products:0,low_stock_items:[],low_stock_count:0,recent_restocks:0,revenue_total:0,profit_total:0,profit_margin:0}),l=C({timeRange:"30",location:"",machineType:""}),c=async()=>{try{const d=await b.getLocations();e.value=d.data}catch(d){console.error("Error fetching locations:",d),r.value="Failed to load locations"}},x=async()=>{o.value=!0,r.value=null;try{const d={days:l.timeRange,location:l.location||void 0,machine_type:l.machineType||void 0},p=await b.getDashboardData(d);s.value=p.data}catch(d){console.error("Error fetching dashboard data:",d),r.value="Failed to load dashboard data"}finally{o.value=!1}};return{loading:o,error:r,locations:e,data:s,filters:l,fetchLocations:c,applyFilters:x,initializeDashboard:async()=>{await c(),await x()},getStockLevelClass:d=>d<=0?"bg-red-100 text-red-800":d<=3?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"}}const z={class:"bg-white p-4 sm:p-5 shadow-lg rounded-xl mb-6"},M={class:"flex flex-col sm:flex-row flex-wrap items-start sm:items-center gap-4"},A={class:"w-full sm:w-auto"},B={class:"w-full sm:w-auto"},N=["value"],P={class:"w-full sm:w-auto"},q={class:"w-full sm:w-auto mt-2 sm:mt-0"},O={__name:"FilterControls",props:{filters:{type:Object,required:!0},locations:{type:Array,required:!0}},emits:["apply-filters"],setup(o){return(r,e)=>(a(),n("div",z,[t("div",M,[t("div",A,[e[8]||(e[8]=t("label",{for:"timeRange",class:"block text-sm font-medium text-gray-700 mb-1"},"Time Period",-1)),y(t("select",{id:"timeRange","onUpdate:modelValue":e[0]||(e[0]=s=>o.filters.timeRange=s),class:"block w-full sm:w-48 border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm",onChange:e[1]||(e[1]=s=>r.$emit("apply-filters"))},e[7]||(e[7]=[L('<option value="today">Today</option><option value="yesterday">Yesterday</option><option value="7">Last 7 days</option><option value="30">Last 30 days</option><option value="90">Last 90 days</option>',5)]),544),[[g,o.filters.timeRange]])]),t("div",B,[e[10]||(e[10]=t("label",{for:"location",class:"block text-sm font-medium text-gray-700 mb-1"},"Location",-1)),y(t("select",{id:"location","onUpdate:modelValue":e[2]||(e[2]=s=>o.filters.location=s),class:"block w-full sm:w-48 border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm",onChange:e[3]||(e[3]=s=>r.$emit("apply-filters"))},[e[9]||(e[9]=t("option",{value:""},"All Locations",-1)),(a(!0),n(_,null,k(o.locations,s=>(a(),n("option",{key:s.id,value:s.id},i(s.name),9,N))),128))],544),[[g,o.filters.location]])]),t("div",P,[e[12]||(e[12]=t("label",{for:"machineType",class:"block text-sm font-medium text-gray-700 mb-1"},"Machine Type",-1)),y(t("select",{id:"machineType","onUpdate:modelValue":e[4]||(e[4]=s=>o.filters.machineType=s),class:"block w-full sm:w-48 border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm",onChange:e[5]||(e[5]=s=>r.$emit("apply-filters"))},e[11]||(e[11]=[t("option",{value:""},"All Types",-1),t("option",{value:"Snack"},"Snack",-1),t("option",{value:"Soda"},"Soda",-1),t("option",{value:"Combo"},"Combo",-1)]),544),[[g,o.filters.machineType]])]),t("div",q,[t("button",{type:"button",onClick:e[6]||(e[6]=s=>r.$emit("apply-filters")),class:"w-full sm:w-auto inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-150"},e[13]||(e[13]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})],-1),$(" Apply Filters ")]))])])]))}},E={class:"grid grid-cols-1 gap-4 sm:gap-5 sm:grid-cols-2 lg:grid-cols-4 mb-8"},U={class:"bg-gradient-to-br from-white to-gray-50 overflow-hidden shadow-lg rounded-xl transition-transform duration-300 hover:scale-105 hover:shadow-xl"},I={class:"px-4 py-5 sm:p-6"},H={class:"mt-2 text-2xl sm:text-3xl font-bold text-primary-600"},K={class:"bg-gradient-to-br from-white to-gray-50 overflow-hidden shadow-lg rounded-xl transition-transform duration-300 hover:scale-105 hover:shadow-xl"},Y={class:"px-4 py-5 sm:p-6"},G={class:"mt-2 text-2xl sm:text-3xl font-bold text-primary-600"},J={class:"bg-gradient-to-br from-white to-gray-50 overflow-hidden shadow-lg rounded-xl transition-transform duration-300 hover:scale-105 hover:shadow-xl"},Q={class:"px-4 py-5 sm:p-6"},W={class:"mt-2 text-2xl sm:text-3xl font-bold text-primary-600"},X={class:"bg-gradient-to-br from-white to-gray-50 overflow-hidden shadow-lg rounded-xl transition-transform duration-300 hover:scale-105 hover:shadow-xl"},Z={class:"px-4 py-5 sm:p-6"},tt={class:"mt-2 text-2xl sm:text-3xl font-bold text-primary-600"},et={__name:"KpiCards",props:{data:{type:Object,required:!0}},setup(o){return(r,e)=>(a(),n("div",E,[t("div",U,[t("div",I,[t("dl",null,[e[0]||(e[0]=t("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Total Locations",-1)),t("dd",H,i(o.data.locations),1)])])]),t("div",K,[t("div",Y,[t("dl",null,[e[1]||(e[1]=t("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Total Machines",-1)),t("dd",G,i(o.data.machines),1)])])]),t("div",J,[t("div",Q,[t("dl",null,[e[2]||(e[2]=t("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Total Products",-1)),t("dd",W,i(o.data.products),1)])])]),t("div",X,[t("div",Z,[t("dl",null,[e[3]||(e[3]=t("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Recent Restocks",-1)),t("dd",tt,i(o.data.recent_restocks),1)])])])]))}},ot={class:"bg-white shadow-lg overflow-hidden sm:rounded-xl mb-8 transition-all duration-300 hover:shadow-xl"},st={class:"px-6 py-5 border-b border-gray-100 flex justify-between items-center"},rt={class:"flex items-center space-x-3"},at={key:0,class:"px-6 py-8 text-center text-gray-500"},lt={key:1,role:"list",class:"divide-y divide-gray-200"},nt={class:"flex items-center justify-between"},it={class:"text-sm font-medium text-primary-600 truncate"},dt={class:"text-sm text-gray-500"},mt={__name:"LowStockItems",props:{data:{type:Object,required:!0},getStockLevelClass:{type:Function,required:!0}},setup(o){return(r,e)=>{const s=S("router-link");return a(),n("div",ot,[t("div",st,[e[1]||(e[1]=t("div",null,[t("h3",{class:"text-lg leading-6 font-medium text-gray-900"},"Low Stock Items"),t("p",{class:"mt-1 text-sm text-gray-500"}," Products with stock level below threshold ")],-1)),t("div",rt,[t("span",{class:w(["inline-flex items-center px-3.5 py-1 rounded-full text-sm font-medium",o.data.low_stock_count>0?"bg-red-100 text-red-800":"bg-green-100 text-green-800"])},i(o.data.low_stock_count)+" items ",3),u(s,{to:"/inventory",class:"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-md text-primary-600 bg-primary-100 hover:bg-primary-200 transition-colors duration-150"},{default:T(()=>e[0]||(e[0]=[t("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})],-1),$(" Full Report ")])),_:1})])]),t("div",null,[o.data.low_stock_items.length===0?(a(),n("div",at,e[2]||(e[2]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-12 w-12 mx-auto text-green-400 mb-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),t("p",{class:"text-lg font-medium"},"No low stock items - everything is well stocked!",-1)]))):(a(),n("ul",lt,[(a(!0),n(_,null,k(o.data.low_stock_items,(l,c)=>(a(),n("li",{key:c,class:"px-6 py-4 hover:bg-gray-50 transition-colors duration-150"},[t("div",nt,[t("div",null,[t("p",it,i(l.product),1),t("p",dt,i(l.machine)+" ("+i(l.location)+")",1)]),t("div",null,[t("span",{class:w(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",o.getStockLevelClass(l.current_stock)])}," Stock: "+i(l.current_stock),3)])])]))),128))]))])])}}},ct={class:"bg-white shadow-lg overflow-hidden sm:rounded-xl transition-all duration-300 hover:shadow-xl"},ut={class:"grid grid-cols-1 md:grid-cols-3 divide-y md:divide-y-0 md:divide-x divide-gray-200"},xt={class:"px-6 py-5"},pt={class:"mt-2 text-3xl font-bold text-gray-900"},ft={class:"px-6 py-5"},yt={class:"mt-2 text-3xl font-bold text-green-600"},gt={class:"px-6 py-5"},vt={class:"mt-2 text-3xl font-bold text-gray-900"},ht={__name:"RevenueSummary",props:{data:{type:Object,required:!0}},setup(o){return(r,e)=>(a(),n("div",ct,[e[3]||(e[3]=t("div",{class:"px-6 py-5 border-b border-gray-100"},[t("h3",{class:"text-lg leading-6 font-medium text-gray-900"},"Revenue & Profit"),t("p",{class:"mt-1 text-sm text-gray-500"}," Last 30 days performance ")],-1)),t("div",null,[t("div",ut,[t("div",xt,[e[0]||(e[0]=t("div",{class:"text-sm font-medium text-gray-500"},"Total Revenue",-1)),t("div",pt,"$"+i((o.data.revenue_total||0).toFixed(2)),1)]),t("div",ft,[e[1]||(e[1]=t("div",{class:"text-sm font-medium text-gray-500"},"Total Profit",-1)),t("div",yt,"$"+i((o.data.profit_total||0).toFixed(2)),1)]),t("div",gt,[e[2]||(e[2]=t("div",{class:"text-sm font-medium text-gray-500"},"Profit Margin",-1)),t("div",vt,i((o.data.profit_margin||0).toFixed(1))+"%",1)])])])]))}},bt={},wt={class:"flex justify-center py-20"};function _t(o,r){return a(),n("div",wt,r[0]||(r[0]=[t("div",{class:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-500"},null,-1)]))}const kt=V(bt,[["render",_t]]),$t={class:"min-h-screen flex flex-col"},Ct={class:"flex-grow container mx-auto px-4 py-8"},Lt={key:0,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-6"},St={key:2},Rt={__name:"Dashboard",setup(o){const{loading:r,error:e,locations:s,data:l,filters:c,applyFilters:x,initializeDashboard:v,getStockLevelClass:h}=D();return F(()=>{v()}),(d,p)=>(a(),n("div",$t,[t("div",Ct,[p[0]||(p[0]=t("h1",{class:"text-2xl font-bold text-gray-900 mb-6"},"Dashboard",-1)),u(O,{filters:m(c),locations:m(s),onApplyFilters:m(x)},null,8,["filters","locations","onApplyFilters"]),m(e)?(a(),n("div",Lt,i(m(e)),1)):j("",!0),m(r)?(a(),R(kt,{key:1})):(a(),n("div",St,[u(et,{data:m(l)},null,8,["data"]),u(mt,{data:m(l),"get-stock-level-class":m(h)},null,8,["data","get-stock-level-class"]),u(ht,{data:m(l)},null,8,["data"])]))])]))}};export{Rt as default};
