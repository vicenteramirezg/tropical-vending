import{r as v,q as T,c as d,o as a,b as e,F as Z,e as ee,n as K,t as c,i as k,f as x,k as X,l as te,w as b,m as D,z as Q,g as se,j as oe,h as W,u}from"./index-DV-V0oJl.js";import{a as z}from"./api-CdhKsZ7p.js";function le(){const r=v([]),$=v(!0),p=v(null),o=v(!1),l=v(!1),g=v(!1),f=v(null),n=v(null),s=v({name:"",contact_person:"",phone:"",email:"",address:"",notes:"",is_active:!0}),m=T(()=>r.value.length),q=T(()=>r.value.filter(t=>t.is_active)),V=T(()=>r.value.filter(t=>!t.is_active)),L=()=>{s.value={name:"",contact_person:"",phone:"",email:"",address:"",notes:"",is_active:!0}},S=async(t={})=>{$.value=!0,p.value=null;try{const i=await z.getSuppliers(t);r.value=i.data,console.log("Suppliers loaded:",r.value.length)}catch(i){console.error("Error fetching suppliers:",i),p.value="Failed to load suppliers. Please try again later."}finally{$.value=!1}},O=async()=>{try{return(await z.getActiveSuppliers()).data}catch(t){throw console.error("Error fetching active suppliers:",t),new Error("Failed to load active suppliers. Please try again later.")}},E=async t=>{var i,h,y,A,H;try{console.log("Creating supplier:",t);const C=await z.createSupplier(t);return console.log("Supplier created successfully:",C.data),await S(),C.data}catch(C){console.error("Error creating supplier:",C);const M=((y=(h=(i=C.response)==null?void 0:i.data)==null?void 0:h.name)==null?void 0:y[0])||((H=(A=C.response)==null?void 0:A.data)==null?void 0:H.detail)||"Failed to create supplier. Please try again.";throw new Error(M)}},U=async(t,i)=>{var h,y,A,H,C;try{console.log("Updating supplier:",t,i);const M=await z.updateSupplier(t,i);return console.log("Supplier updated successfully:",M.data),await S(),M.data}catch(M){console.error("Error updating supplier:",M);const Y=((A=(y=(h=M.response)==null?void 0:h.data)==null?void 0:y.name)==null?void 0:A[0])||((C=(H=M.response)==null?void 0:H.data)==null?void 0:C.detail)||"Failed to update supplier. Please try again.";throw new Error(Y)}},F=async t=>{var i,h;try{await z.deleteSupplier(t),console.log("Supplier deleted successfully"),await S()}catch(y){console.error("Error deleting supplier:",y);const A=((h=(i=y.response)==null?void 0:i.data)==null?void 0:h.error)||"Failed to delete supplier. Please try again.";throw new Error(A)}},P=async t=>{try{const i=await z.toggleSupplierActive(t);return console.log("Supplier status toggled:",i.data),await S(),i.data}catch(i){console.error("Error toggling supplier status:",i);const h="Failed to toggle supplier status. Please try again.";throw new Error(h)}},G=()=>{L(),g.value=!1,n.value=null,o.value=!0},j=t=>{s.value={...t},g.value=!0,n.value=t,o.value=!0},_=()=>{o.value=!1,L(),g.value=!1,n.value=null},B=t=>{f.value=t,l.value=!0},N=()=>{l.value=!1,f.value=null};return{suppliers:r,loading:$,error:p,showModal:o,showDeleteModal:l,isEditing:g,supplierToDelete:f,selectedSupplier:n,supplierForm:s,supplierCount:m,activeSuppliers:q,inactiveSuppliers:V,fetchSuppliers:S,fetchActiveSuppliers:O,createSupplier:E,updateSupplier:U,deleteSupplier:F,toggleSupplierActive:P,openAddModal:G,editSupplier:j,closeModal:_,confirmDelete:B,closeDeleteModal:N,saveSupplier:async()=>{try{g.value?await U(n.value.id,s.value):await E(s.value),_()}catch(t){throw t}},handleDeleteSupplier:async()=>{try{await F(f.value.id),N()}catch(t){throw t}},findSupplierById:t=>r.value.find(i=>i.id===t),resetForm:L,initialize:async()=>{await S()}}}const re={class:"bg-white shadow-lg rounded-xl overflow-hidden"},ie={role:"list",class:"divide-y divide-gray-200"},ne={class:"flex flex-col sm:flex-row sm:items-center justify-between gap-4"},ae={class:"flex items-start sm:items-center"},de={class:"relative flex-shrink-0 h-14 w-14 bg-gray-100 rounded-lg overflow-hidden shadow-sm flex items-center justify-center"},ue={xmlns:"http://www.w3.org/2000/svg",class:"h-3 w-3 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},me={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},ce={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},pe={class:"ml-4"},ge={class:"text-sm font-medium text-primary-600"},ve={class:"flex flex-wrap gap-2 mt-1"},fe={key:0,class:"text-sm text-gray-500 flex items-center"},we={key:1,class:"text-sm text-gray-500 flex items-center"},he={key:2,class:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800"},xe={class:"flex flex-wrap gap-2 sm:flex-nowrap"},ye=["onClick"],be=["onClick"],ke=["onClick","disabled"],$e={__name:"SupplierList",props:{suppliers:{type:Array,required:!0}},emits:["edit","toggleActive","delete"],setup(r,{emit:$}){return(p,o)=>(a(),d("div",re,[e("ul",ie,[(a(!0),d(Z,null,ee(r.suppliers,l=>(a(),d("li",{key:l.id,class:"px-4 sm:px-6 py-4 sm:py-5 hover:bg-gray-50 transition-colors duration-150"},[e("div",ne,[e("div",ae,[e("div",de,[o[0]||(o[0]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})],-1)),e("div",{class:K(["absolute -top-2 -right-2 h-6 w-6 flex items-center justify-center rounded-full shadow-md",l.is_active?"bg-green-500":"bg-gray-400"])},[(a(),d("svg",ue,[l.is_active?(a(),d("path",me)):(a(),d("path",ce))]))],2)]),e("div",pe,[e("p",ge,c(l.name),1),e("div",ve,[l.contact_person?(a(),d("p",fe,[o[1]||(o[1]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)),x(" "+c(l.contact_person),1)])):k("",!0),l.phone?(a(),d("p",we,[o[2]||(o[2]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})],-1)),x(" "+c(l.phone),1)])):k("",!0),e("span",{class:K(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",l.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"])},c(l.is_active?"Active":"Inactive"),3),l.purchase_count>0?(a(),d("span",he,[o[3]||(o[3]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3.5 w-3.5 mr-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})],-1)),x(" "+c(l.purchase_count)+" purchases ",1)])):k("",!0)])])]),e("div",xe,[e("button",{onClick:g=>p.$emit("edit",l),class:"w-full sm:w-auto inline-flex items-center justify-center px-3 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-150"},o[4]||(o[4]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),x(" Edit ")]),8,ye),e("button",{onClick:g=>p.$emit("toggleActive",l),class:"w-full sm:w-auto inline-flex items-center justify-center px-3 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded-md text-gray-700 bg-white hover:bg-yellow-50 hover:text-yellow-700 hover:border-yellow-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500 transition-colors duration-150"},[o[5]||(o[5]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 9l4-4 4 4m0 6l-4 4-4-4"})],-1)),x(" "+c(l.is_active?"Deactivate":"Activate"),1)],8,be),e("button",{onClick:g=>p.$emit("delete",l),class:K(["w-full sm:w-auto inline-flex items-center justify-center px-3 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded-md text-gray-700 bg-white hover:bg-red-50 hover:text-red-700 hover:border-red-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors duration-150",l.purchase_count>0?"opacity-50 cursor-not-allowed":""]),disabled:l.purchase_count>0},o[6]||(o[6]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),x(" Delete ")]),10,ke)])])]))),128))])]))}},_e={key:0,class:"fixed inset-0 overflow-y-auto z-50","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},Ce={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},Se={class:"inline-block align-bottom bg-white rounded-xl text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},Me={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},je={class:"sm:flex sm:items-start"},Be={class:"mt-3 text-center sm:mt-0 sm:text-left w-full"},Ae={class:"text-lg leading-6 font-medium text-gray-900",id:"modal-title"},De={class:"mt-4 space-y-4"},Ve={class:"grid grid-cols-2 gap-4"},ze={class:"flex items-center"},Le={key:0,class:"mt-4 bg-gray-50 p-3 rounded-md"},Ee={class:"grid grid-cols-2 gap-2"},He={class:"text-sm font-medium text-primary-600"},Te={class:"text-sm font-medium text-primary-600"},Ue={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},Fe=["disabled"],Pe={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Ne=["disabled"],Ie={__name:"SupplierFormModal",props:{show:{type:Boolean,default:!1},supplier:{type:Object,default:null},loading:{type:Boolean,default:!1}},emits:["close","save"],setup(r,{emit:$}){const p=r,o=$,l=v({id:null,name:"",contact_person:"",phone:"",email:"",address:"",notes:"",is_active:!0}),g=T(()=>{var n;return!!((n=p.supplier)!=null&&n.id)});X(()=>p.supplier,n=>{n?l.value={id:n.id,name:n.name,contact_person:n.contact_person||"",phone:n.phone||"",email:n.email||"",address:n.address||"",notes:n.notes||"",is_active:n.is_active!==void 0?n.is_active:!0}:l.value={id:null,name:"",contact_person:"",phone:"",email:"",address:"",notes:"",is_active:!0}},{immediate:!0});const f=()=>{o("save",{...l.value})};return(n,s)=>r.show?(a(),d("div",_e,[e("div",Ce,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:s[0]||(s[0]=m=>n.$emit("close"))}),s[21]||(s[21]=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"​",-1)),e("div",Se,[e("form",{onSubmit:te(f,["prevent"])},[e("div",Me,[e("div",je,[e("div",Be,[e("h3",Ae,c(g.value?"Edit Supplier":"Add New Supplier"),1),e("div",De,[e("div",null,[s[9]||(s[9]=e("label",{for:"name",class:"block text-sm font-medium text-gray-700"},"Supplier Name *",-1)),b(e("input",{type:"text",name:"name",id:"name","onUpdate:modelValue":s[1]||(s[1]=m=>l.value.name=m),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",required:""},null,512),[[D,l.value.name]])]),e("div",null,[s[10]||(s[10]=e("label",{for:"contact_person",class:"block text-sm font-medium text-gray-700"},"Contact Person",-1)),b(e("input",{type:"text",name:"contact_person",id:"contact_person","onUpdate:modelValue":s[2]||(s[2]=m=>l.value.contact_person=m),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[D,l.value.contact_person]])]),e("div",Ve,[e("div",null,[s[11]||(s[11]=e("label",{for:"phone",class:"block text-sm font-medium text-gray-700"},"Phone",-1)),b(e("input",{type:"tel",name:"phone",id:"phone","onUpdate:modelValue":s[3]||(s[3]=m=>l.value.phone=m),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[D,l.value.phone]])]),e("div",null,[s[12]||(s[12]=e("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"Email",-1)),b(e("input",{type:"email",name:"email",id:"email","onUpdate:modelValue":s[4]||(s[4]=m=>l.value.email=m),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[D,l.value.email]])])]),e("div",null,[s[13]||(s[13]=e("label",{for:"address",class:"block text-sm font-medium text-gray-700"},"Address",-1)),b(e("textarea",{id:"address",name:"address",rows:"3","onUpdate:modelValue":s[5]||(s[5]=m=>l.value.address=m),class:"shadow-sm focus:ring-primary-500 focus:border-primary-500 mt-1 block w-full sm:text-sm border border-gray-300 rounded-md"},null,512),[[D,l.value.address]])]),e("div",null,[s[14]||(s[14]=e("label",{for:"notes",class:"block text-sm font-medium text-gray-700"},"Notes",-1)),b(e("textarea",{id:"notes",name:"notes",rows:"3","onUpdate:modelValue":s[6]||(s[6]=m=>l.value.notes=m),class:"shadow-sm focus:ring-primary-500 focus:border-primary-500 mt-1 block w-full sm:text-sm border border-gray-300 rounded-md"},null,512),[[D,l.value.notes]])]),e("div",null,[e("div",ze,[b(e("input",{id:"is_active",name:"is_active",type:"checkbox","onUpdate:modelValue":s[7]||(s[7]=m=>l.value.is_active=m),class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"},null,512),[[Q,l.value.is_active]]),s[15]||(s[15]=e("label",{for:"is_active",class:"ml-2 block text-sm text-gray-900"}," Active supplier ",-1))]),s[16]||(s[16]=e("p",{class:"mt-1 text-sm text-gray-500"}," Inactive suppliers won't appear in purchase forms ",-1))]),g.value&&r.supplier?(a(),d("div",Le,[s[19]||(s[19]=e("h4",{class:"text-sm font-medium text-gray-700 mb-2"},"Supplier Statistics:",-1)),e("div",Ee,[e("div",null,[s[17]||(s[17]=e("span",{class:"text-xs text-gray-500"},"Total Purchases:",-1)),e("p",He,c(r.supplier.purchase_count||0),1)]),e("div",null,[s[18]||(s[18]=e("span",{class:"text-xs text-gray-500"},"Total Spent:",-1)),e("p",Te,"$"+c(r.supplier.total_spent||"0.00"),1)])])])):k("",!0)])])])]),e("div",Ue,[e("button",{type:"submit",disabled:r.loading,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary-600 text-base font-medium text-white hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:ml-3 sm:w-auto sm:text-sm transition-colors duration-150 disabled:opacity-50 disabled:cursor-not-allowed"},[r.loading?(a(),d("svg",Pe,s[20]||(s[20]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):k("",!0),x(" "+c(r.loading?"Saving...":g.value?"Update":"Add"),1)],8,Fe),e("button",{type:"button",onClick:s[8]||(s[8]=m=>n.$emit("close")),disabled:r.loading,class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm transition-colors duration-150 disabled:opacity-50 disabled:cursor-not-allowed"}," Cancel ",8,Ne)])],32)])])])):k("",!0)}},qe={key:0,class:"fixed inset-0 overflow-y-auto z-50","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},Oe={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},Ge={class:"inline-block align-bottom bg-white rounded-xl text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},Je={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},Ke={class:"sm:flex sm:items-start"},Qe={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},Re={class:"mt-2"},We={class:"text-sm text-gray-500"},Xe={key:0,class:"text-red-600 font-medium"},Ye={key:1},Ze={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},et=["disabled"],tt={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},st=["disabled"],ot={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},lt=["disabled"],rt={__name:"DeleteConfirmationModal",props:{show:{type:Boolean,default:!1},supplier:{type:Object,default:null},loading:{type:Boolean,default:!1}},emits:["close","confirm","deactivate"],setup(r,{emit:$}){return(p,o)=>{var l,g,f;return r.show?(a(),d("div",qe,[e("div",Oe,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:o[0]||(o[0]=n=>p.$emit("close"))}),o[10]||(o[10]=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"​",-1)),e("div",Ge,[e("div",Je,[e("div",Ke,[o[7]||(o[7]=e("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10"},[e("svg",{class:"h-6 w-6 text-red-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})])],-1)),e("div",Qe,[o[6]||(o[6]=e("h3",{class:"text-lg leading-6 font-medium text-gray-900",id:"modal-title"}," Delete Supplier ",-1)),e("div",Re,[e("p",We,[o[4]||(o[4]=x(" Are you sure you want to delete ")),e("strong",null,c((l=r.supplier)==null?void 0:l.name),1),o[5]||(o[5]=x("? ")),((g=r.supplier)==null?void 0:g.purchase_count)>0?(a(),d("span",Xe," This supplier has "+c(r.supplier.purchase_count)+" purchase(s) and cannot be deleted. ",1)):(a(),d("span",Ye," This action cannot be undone. "))])])])])]),e("div",Ze,[((f=r.supplier)==null?void 0:f.purchase_count)===0?(a(),d("button",{key:0,type:"button",onClick:o[1]||(o[1]=n=>p.$emit("confirm")),disabled:r.loading,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm transition-colors duration-150 disabled:opacity-50 disabled:cursor-not-allowed"},[r.loading?(a(),d("svg",tt,o[8]||(o[8]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):k("",!0),x(" "+c(r.loading?"Deleting...":"Delete"),1)],8,et)):(a(),d("button",{key:1,type:"button",onClick:o[2]||(o[2]=n=>p.$emit("deactivate")),disabled:r.loading,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-yellow-600 text-base font-medium text-white hover:bg-yellow-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500 sm:ml-3 sm:w-auto sm:text-sm transition-colors duration-150 disabled:opacity-50 disabled:cursor-not-allowed"},[r.loading?(a(),d("svg",ot,o[9]||(o[9]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):k("",!0),x(" "+c(r.loading?"Deactivating...":"Deactivate Instead"),1)],8,st)),e("button",{type:"button",onClick:o[3]||(o[3]=n=>p.$emit("close")),disabled:r.loading,class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm transition-colors duration-150 disabled:opacity-50 disabled:cursor-not-allowed"}," Cancel ",8,lt)])])])])):k("",!0)}}},it={class:"flex justify-between items-center mb-6"},nt={class:"mb-6 bg-white shadow-sm rounded-lg p-4"},at={class:"flex flex-wrap gap-4 items-center"},dt={class:"flex-1 min-w-64"},ut={class:"relative"},mt={class:"flex items-center space-x-4"},ct={class:"flex items-center"},pt={class:"flex items-center"},gt={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6"},vt={class:"bg-white overflow-hidden shadow rounded-lg"},ft={class:"p-5"},wt={class:"flex items-center"},ht={class:"ml-5 w-0 flex-1"},xt={class:"text-lg font-medium text-gray-900"},yt={class:"bg-white overflow-hidden shadow rounded-lg"},bt={class:"p-5"},kt={class:"flex items-center"},$t={class:"ml-5 w-0 flex-1"},_t={class:"text-lg font-medium text-gray-900"},Ct={class:"bg-white overflow-hidden shadow rounded-lg"},St={class:"p-5"},Mt={class:"flex items-center"},jt={class:"ml-5 w-0 flex-1"},Bt={class:"text-lg font-medium text-gray-900"},At={key:0,class:"mb-6 bg-red-50 border border-red-200 rounded-md p-4"},Dt={class:"flex"},Vt={class:"ml-3"},zt={class:"text-sm text-red-800"},Lt={key:1,class:"flex justify-center items-center py-12"},Et={key:2,class:"text-center py-12"},Ht={class:"mt-1 text-sm text-gray-500"},Tt={class:"mt-6"},Pt={__name:"Suppliers",setup(r){const{suppliers:$,loading:p,error:o,showModal:l,showDeleteModal:g,supplierToDelete:f,selectedSupplier:n,supplierCount:s,activeSuppliers:m,inactiveSuppliers:q,openAddModal:V,editSupplier:L,closeModal:S,confirmDelete:O,closeDeleteModal:E,saveSupplier:U,handleDeleteSupplier:F,toggleSupplierActive:P,initialize:G}=le(),j=v(""),_=v(!0),B=v(!0),N=v(!1),I=v(!1),J=T(()=>{let w=$.value;if(j.value){const t=j.value.toLowerCase();w=w.filter(i=>{var h,y;return i.name.toLowerCase().includes(t)||((h=i.contact_person)==null?void 0:h.toLowerCase().includes(t))||((y=i.email)==null?void 0:y.toLowerCase().includes(t))})}return _.value&&!B.value?w=w.filter(t=>t.is_active):!_.value&&B.value&&(w=w.filter(t=>!t.is_active)),w}),R=async()=>{if(f.value){I.value=!0;try{await P(f.value.id),E()}catch(w){console.error("Error deactivating supplier:",w)}finally{I.value=!1}}};return se(async()=>{await G()}),X([_,B],([w,t])=>{!w&&!t&&(_.value=!0)}),(w,t)=>(a(),d("div",null,[e("div",it,[t[6]||(t[6]=e("h1",{class:"text-2xl font-semibold text-gray-900"},"Suppliers",-1)),e("button",{onClick:t[0]||(t[0]=(...i)=>u(V)&&u(V)(...i)),class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},t[5]||(t[5]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),x(" Add Supplier ")]))]),e("div",nt,[e("div",at,[e("div",dt,[t[8]||(t[8]=e("label",{for:"search",class:"sr-only"},"Search suppliers",-1)),e("div",ut,[t[7]||(t[7]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),b(e("input",{id:"search","onUpdate:modelValue":t[1]||(t[1]=i=>j.value=i),type:"search",placeholder:"Search suppliers...",class:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[D,j.value]])])]),e("div",mt,[e("div",ct,[b(e("input",{id:"show-active","onUpdate:modelValue":t[2]||(t[2]=i=>_.value=i),type:"checkbox",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"},null,512),[[Q,_.value]]),t[9]||(t[9]=e("label",{for:"show-active",class:"ml-2 block text-sm text-gray-900"}," Active only ",-1))]),e("div",pt,[b(e("input",{id:"show-inactive","onUpdate:modelValue":t[3]||(t[3]=i=>B.value=i),type:"checkbox",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"},null,512),[[Q,B.value]]),t[10]||(t[10]=e("label",{for:"show-inactive",class:"ml-2 block text-sm text-gray-900"}," Inactive only ",-1))])])])]),e("div",gt,[e("div",vt,[e("div",ft,[e("div",wt,[t[12]||(t[12]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-6 w-6 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})])],-1)),e("div",ht,[e("dl",null,[t[11]||(t[11]=e("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Total Suppliers",-1)),e("dd",xt,c(u(s)),1)])])])])]),e("div",yt,[e("div",bt,[e("div",kt,[t[14]||(t[14]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-6 w-6 text-green-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",$t,[e("dl",null,[t[13]||(t[13]=e("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Active Suppliers",-1)),e("dd",_t,c(u(m).length),1)])])])])]),e("div",Ct,[e("div",St,[e("div",Mt,[t[16]||(t[16]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-6 w-6 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728L5.636 5.636m12.728 12.728L18.364 5.636M5.636 18.364l12.728-12.728"})])],-1)),e("div",jt,[e("dl",null,[t[15]||(t[15]=e("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Inactive Suppliers",-1)),e("dd",Bt,c(u(q).length),1)])])])])])]),u(o)?(a(),d("div",At,[e("div",Dt,[t[17]||(t[17]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),e("div",Vt,[e("p",zt,c(u(o)),1)])])])):k("",!0),u(p)?(a(),d("div",Lt,t[18]||(t[18]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"},null,-1),e("span",{class:"ml-2 text-gray-600"},"Loading suppliers...",-1)]))):J.value.length===0?(a(),d("div",Et,[t[20]||(t[20]=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})],-1)),t[21]||(t[21]=e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No suppliers found",-1)),e("p",Ht,c(j.value?"Try adjusting your search terms.":"Get started by adding a new supplier."),1),e("div",Tt,[e("button",{onClick:t[4]||(t[4]=(...i)=>u(V)&&u(V)(...i)),class:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},t[19]||(t[19]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),x(" Add Supplier ")]))])])):(a(),oe($e,{key:3,suppliers:J.value,onEdit:u(L),onToggleActive:u(P),onDelete:u(O)},null,8,["suppliers","onEdit","onToggleActive","onDelete"])),W(Ie,{show:u(l),supplier:u(n),loading:N.value,onClose:u(S),onSave:u(U)},null,8,["show","supplier","loading","onClose","onSave"]),W(rt,{show:u(g),supplier:u(f),loading:I.value,onClose:u(E),onConfirm:u(F),onDeactivate:R},null,8,["show","supplier","loading","onClose","onConfirm"])]))}};export{Pt as default};
