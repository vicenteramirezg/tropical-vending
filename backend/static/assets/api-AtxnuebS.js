import{k as h,u as i}from"./index-W4rCa7Es.js";const n=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1";let l=n?"http://localhost:8000/api":"/api",p=n?"http://localhost:8000/media":"/media";console.log("API Service - Current hostname:",window.location.hostname);console.log("API Service - isLocalhost:",n);console.log("API Service - API_URL:",l);console.log("API Service - MEDIA_URL:",p);console.log("API Service - Environment:","production");const t=h.create({baseURL:l,headers:{"Content-Type":"application/json"}});t.interceptors.request.use(e=>{const r=i();return r.token&&(e.headers.Authorization=`Bearer ${r.token}`),console.log("API Request:",e.method,e.url),e},e=>(console.error("API Request Error:",e),Promise.reject(e)));t.interceptors.response.use(e=>(console.log("API Response:",e.status,e.config.url),e),async e=>{var o,c,a;console.error("API Response Error:",(o=e==null?void 0:e.response)==null?void 0:o.status,(c=e==null?void 0:e.config)==null?void 0:c.url,e.message);const r=e.config,s=i();if(((a=e.response)==null?void 0:a.status)===401&&!r._retry&&s.refreshToken){r._retry=!0;try{if((await s.refreshUserToken()).success)return r.headers.Authorization=`Bearer ${s.token}`,t(r)}catch(u){return s.logout(),window.location.href="/login",Promise.reject(u)}}return Promise.reject(e)});const g={getLocations(){return t.get("/locations/")},getLocation(e){return t.get(`/locations/${e}/`)},createLocation(e){return t.post("/locations/",e)},updateLocation(e,r){return t.put(`/locations/${e}/`,r)},deleteLocation(e){return t.delete(`/locations/${e}/`)},getMachines(e={}){return t.get("/machines/",{params:e})},getMachine(e){return t.get(`/machines/${e}/`)},createMachine(e){return t.post("/machines/",e)},updateMachine(e,r){return t.put(`/machines/${e}/`,r)},deleteMachine(e){return t.delete(`/machines/${e}/`)},getProducts(e={}){return t.get("/products/",{params:e})},getProduct(e){return t.get(`/products/${e}/`)},createProduct(e){return t.post("/products/",e)},updateProduct(e,r){return t.put(`/products/${e}/`,r)},deleteProduct(e){return t.delete(`/products/${e}/`)},getMachineItems(e={}){return t.get("/machine-items/",{params:e})},getMachineItem(e){return t.get(`/machine-items/${e}/`)},createMachineItem(e){return t.post("/machine-items/",e)},updateMachineItem(e,r){return t.put(`/machine-items/${e}/`,r)},deleteMachineItem(e){return t.delete(`/machine-items/${e}/`)},getPurchases(e={}){return t.get("/purchases/",{params:e})},getPurchase(e){return t.get(`/purchases/${e}/`)},createPurchase(e){return t.post("/purchases/",e)},updatePurchase(e,r){return t.put(`/purchases/${e}/`,r)},deletePurchase(e){return t.delete(`/purchases/${e}/`)},getVisits(e={}){return t.get("/visits/",{params:e})},getVisit(e){return t.get(`/visits/${e}/`)},createVisit(e){return t.post("/visits/",e)},updateVisit(e,r){return t.put(`/visits/${e}/`,r)},deleteVisit(e){return t.delete(`/visits/${e}/`)},getRestocks(e={}){return t.get("/restocks/",{params:e})},getRestock(e){return t.get(`/restocks/${e}/`)},createRestock(e){return t.post("/restocks/",e)},updateRestock(e,r){return t.put(`/restocks/${e}/`,r)},deleteRestock(e){return t.delete(`/restocks/${e}/`)},getRestockEntries(e={}){return t.get("/restock-entries/",{params:e})},getRestockEntry(e){return t.get(`/restock-entries/${e}/`)},createRestockEntry(e){return t.post("/restock-entries/",e)},updateRestockEntry(e,r){return t.put(`/restock-entries/${e}/`,r)},deleteRestockEntry(e){return t.delete(`/restock-entries/${e}/`)},getDashboardData(){return t.get("/dashboard/")},getStockLevels(e={}){return t.get("/analytics/stock-levels/",{params:e})},getDemandAnalysis(e={}){return t.get("/analytics/demand/",{params:e})},getRevenueProfitData(e={}){return t.get("/analytics/revenue-profit/",{params:e})}};export{g as a};
