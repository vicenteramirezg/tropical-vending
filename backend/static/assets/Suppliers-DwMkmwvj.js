import{r as h,c as z,b as m,o as u,d as e,F as X,g as Y,n as W,t as v,h as _,e as y,l as Q,y as Z,w as $,j as A,i as J,s as ee,u as te,p as K,x as p}from"./index-CbGJeSZD.js";import{a as D}from"./api-BDI7RR6G.js";function se(){const r=h([]),C=h(!0),f=h(null),o=h(!1),l=h(!1),w=h(!1),x=h(null),n=h(null),s=z(()=>r.value.length),g=z(()=>r.value.filter(i=>i.is_active)),N=z(()=>r.value.filter(i=>!i.is_active)),k=async(i={})=>{C.value=!0,f.value=null;try{const d=await D.getSuppliers(i);r.value=d.data.results||d.data,console.log("Suppliers loaded:",r.value.length)}catch(d){console.error("Error fetching suppliers:",d),f.value="Failed to load suppliers. Please try again later."}finally{C.value=!1}},I=async()=>{try{return(await D.getActiveSuppliers()).data}catch(i){throw console.error("Error fetching active suppliers:",i),new Error("Failed to load active suppliers. Please try again later.")}},E=async i=>{var d,a,t,c,M;try{console.log("Creating supplier:",i);const b=await D.createSupplier(i);return console.log("Supplier created successfully:",b.data),await k(),b.data}catch(b){console.error("Error creating supplier:",b);const j=((t=(a=(d=b.response)==null?void 0:d.data)==null?void 0:a.name)==null?void 0:t[0])||((M=(c=b.response)==null?void 0:c.data)==null?void 0:M.detail)||"Failed to create supplier. Please try again.";throw new Error(j)}},H=async(i,d)=>{var a,t,c,M,b;try{console.log("Updating supplier:",i,d);const j=await D.updateSupplier(i,d);return console.log("Supplier updated successfully:",j.data),await k(),j.data}catch(j){console.error("Error updating supplier:",j);const R=((c=(t=(a=j.response)==null?void 0:a.data)==null?void 0:t.name)==null?void 0:c[0])||((b=(M=j.response)==null?void 0:M.data)==null?void 0:b.detail)||"Failed to update supplier. Please try again.";throw new Error(R)}},L=async i=>{var d,a;try{await D.deleteSupplier(i),console.log("Supplier deleted successfully"),await k()}catch(t){console.error("Error deleting supplier:",t);const c=((a=(d=t.response)==null?void 0:d.data)==null?void 0:a.error)||"Failed to delete supplier. Please try again.";throw new Error(c)}},q=async i=>{try{const d=await D.toggleSupplierActive(i);return console.log("Supplier status toggled:",d.data),await k(),d.data}catch(d){console.error("Error toggling supplier status:",d);const a="Failed to toggle supplier status. Please try again.";throw new Error(a)}},O=()=>{w.value=!1,n.value=null,o.value=!0},T=i=>{w.value=!0,n.value=i,o.value=!0},U=()=>{o.value=!1,w.value=!1,n.value=null},B=i=>{x.value=i,l.value=!0},S=()=>{l.value=!1,x.value=null};return{suppliers:r,loading:C,error:f,showModal:o,showDeleteModal:l,isEditing:w,supplierToDelete:x,selectedSupplier:n,supplierCount:s,activeSuppliers:g,inactiveSuppliers:N,fetchSuppliers:k,fetchActiveSuppliers:I,createSupplier:E,updateSupplier:H,deleteSupplier:L,toggleSupplierActive:q,openAddModal:O,editSupplier:T,closeModal:U,confirmDelete:B,closeDeleteModal:S,saveSupplier:async i=>{try{w.value?await H(n.value.id,i):await E(i),U()}catch(d){throw d}},handleDeleteSupplier:async()=>{try{await L(x.value.id),S()}catch(i){throw i}},findSupplierById:i=>r.value.find(d=>d.id===i),initialize:async()=>{await k()}}}const oe={class:"bg-white shadow-lg rounded-xl overflow-hidden"},le={role:"list",class:"divide-y divide-gray-200"},re={class:"flex flex-col sm:flex-row sm:items-center justify-between gap-4"},ie={class:"flex items-start sm:items-center"},ne={class:"relative flex-shrink-0 h-14 w-14 bg-gray-100 rounded-lg overflow-hidden shadow-sm flex items-center justify-center"},ae={xmlns:"http://www.w3.org/2000/svg",class:"h-3 w-3 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},de={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},ue={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},me={class:"ml-4"},ce={class:"text-sm font-medium text-primary-600"},pe={class:"flex flex-wrap gap-2 mt-1"},ge={key:0,class:"text-sm text-gray-500 flex items-center"},ve={key:1,class:"text-sm text-gray-500 flex items-center"},fe={key:2,class:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800"},we={class:"flex flex-wrap gap-2 sm:flex-nowrap"},he=["onClick"],xe=["onClick"],ye=["onClick","disabled"],be={__name:"SupplierList",props:{suppliers:{type:Array,required:!0}},emits:["edit","toggleActive","delete"],setup(r,{emit:C}){return(f,o)=>(u(),m("div",oe,[e("ul",le,[(u(!0),m(X,null,Y(r.suppliers,l=>(u(),m("li",{key:l.id,class:"px-4 sm:px-6 py-4 sm:py-5 hover:bg-gray-50 transition-colors duration-150"},[e("div",re,[e("div",ie,[e("div",ne,[o[0]||(o[0]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})],-1)),e("div",{class:W(["absolute -top-2 -right-2 h-6 w-6 flex items-center justify-center rounded-full shadow-md",l.is_active?"bg-green-500":"bg-gray-400"])},[(u(),m("svg",ae,[l.is_active?(u(),m("path",de)):(u(),m("path",ue))]))],2)]),e("div",me,[e("p",ce,v(l.name),1),e("div",pe,[l.contact_person?(u(),m("p",ge,[o[1]||(o[1]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)),y(" "+v(l.contact_person),1)])):_("",!0),l.phone?(u(),m("p",ve,[o[2]||(o[2]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})],-1)),y(" "+v(l.phone),1)])):_("",!0),e("span",{class:W(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",l.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"])},v(l.is_active?"Active":"Inactive"),3),l.purchase_count>0?(u(),m("span",fe,[o[3]||(o[3]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3.5 w-3.5 mr-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})],-1)),y(" "+v(l.purchase_count)+" purchases ",1)])):_("",!0)])])]),e("div",we,[e("button",{onClick:w=>f.$emit("edit",l),class:"w-full sm:w-auto inline-flex items-center justify-center px-3 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-150"},o[4]||(o[4]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),y(" Edit ")]),8,he),e("button",{onClick:w=>f.$emit("toggleActive",l),class:"w-full sm:w-auto inline-flex items-center justify-center px-3 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded-md text-gray-700 bg-white hover:bg-yellow-50 hover:text-yellow-700 hover:border-yellow-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500 transition-colors duration-150"},[o[5]||(o[5]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 9l4-4 4 4m0 6l-4 4-4-4"})],-1)),y(" "+v(l.is_active?"Deactivate":"Activate"),1)],8,xe),e("button",{onClick:w=>f.$emit("delete",l),class:W(["w-full sm:w-auto inline-flex items-center justify-center px-3 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded-md text-gray-700 bg-white hover:bg-red-50 hover:text-red-700 hover:border-red-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors duration-150",l.purchase_count>0?"opacity-50 cursor-not-allowed":""]),disabled:l.purchase_count>0},o[6]||(o[6]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),y(" Delete ")]),10,ye)])])]))),128))])]))}},ke={key:0,class:"fixed inset-0 overflow-y-auto z-50","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},$e={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},_e={class:"inline-block align-bottom bg-white rounded-xl text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},Ce={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},Se={class:"sm:flex sm:items-start"},Me={class:"mt-3 text-center sm:mt-0 sm:text-left w-full"},je={class:"text-lg leading-6 font-medium text-gray-900",id:"modal-title"},Be={class:"mt-4 space-y-4"},Ae={class:"grid grid-cols-2 gap-4"},Ve={class:"flex items-center"},De={key:0,class:"mt-4 bg-gray-50 p-3 rounded-md"},Le={class:"grid grid-cols-2 gap-2"},ze={class:"text-sm font-medium text-primary-600"},Ee={class:"text-sm font-medium text-primary-600"},He={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},Te=["disabled"],Ue={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Fe=["disabled"],Pe={__name:"SupplierFormModal",props:{show:{type:Boolean,default:!1},supplier:{type:Object,default:null},loading:{type:Boolean,default:!1}},emits:["close","save"],setup(r,{emit:C}){const f=r,o=C,l=h({id:null,name:"",contact_person:"",phone:"",email:"",address:"",notes:"",is_active:!0}),w=z(()=>{var n;return!!((n=f.supplier)!=null&&n.id)});Q(()=>f.supplier,n=>{n?l.value={id:n.id,name:n.name,contact_person:n.contact_person||"",phone:n.phone||"",email:n.email||"",address:n.address||"",notes:n.notes||"",is_active:n.is_active!==void 0?n.is_active:!0}:l.value={id:null,name:"",contact_person:"",phone:"",email:"",address:"",notes:"",is_active:!0}},{immediate:!0});const x=()=>{o("save",{...l.value})};return(n,s)=>r.show?(u(),m("div",ke,[e("div",$e,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:s[0]||(s[0]=g=>n.$emit("close"))}),s[21]||(s[21]=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"​",-1)),e("div",_e,[e("form",{onSubmit:Z(x,["prevent"])},[e("div",Ce,[e("div",Se,[e("div",Me,[e("h3",je,v(w.value?"Edit Supplier":"Add New Supplier"),1),e("div",Be,[e("div",null,[s[9]||(s[9]=e("label",{for:"name",class:"block text-sm font-medium text-gray-700"},"Supplier Name *",-1)),$(e("input",{type:"text",name:"name",id:"name","onUpdate:modelValue":s[1]||(s[1]=g=>l.value.name=g),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",required:""},null,512),[[A,l.value.name]])]),e("div",null,[s[10]||(s[10]=e("label",{for:"contact_person",class:"block text-sm font-medium text-gray-700"},"Contact Person",-1)),$(e("input",{type:"text",name:"contact_person",id:"contact_person","onUpdate:modelValue":s[2]||(s[2]=g=>l.value.contact_person=g),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[A,l.value.contact_person]])]),e("div",Ae,[e("div",null,[s[11]||(s[11]=e("label",{for:"phone",class:"block text-sm font-medium text-gray-700"},"Phone",-1)),$(e("input",{type:"tel",name:"phone",id:"phone","onUpdate:modelValue":s[3]||(s[3]=g=>l.value.phone=g),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[A,l.value.phone]])]),e("div",null,[s[12]||(s[12]=e("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"Email",-1)),$(e("input",{type:"email",name:"email",id:"email","onUpdate:modelValue":s[4]||(s[4]=g=>l.value.email=g),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[A,l.value.email]])])]),e("div",null,[s[13]||(s[13]=e("label",{for:"address",class:"block text-sm font-medium text-gray-700"},"Address",-1)),$(e("textarea",{id:"address",name:"address",rows:"3","onUpdate:modelValue":s[5]||(s[5]=g=>l.value.address=g),class:"shadow-sm focus:ring-primary-500 focus:border-primary-500 mt-1 block w-full sm:text-sm border border-gray-300 rounded-md"},null,512),[[A,l.value.address]])]),e("div",null,[s[14]||(s[14]=e("label",{for:"notes",class:"block text-sm font-medium text-gray-700"},"Notes",-1)),$(e("textarea",{id:"notes",name:"notes",rows:"3","onUpdate:modelValue":s[6]||(s[6]=g=>l.value.notes=g),class:"shadow-sm focus:ring-primary-500 focus:border-primary-500 mt-1 block w-full sm:text-sm border border-gray-300 rounded-md"},null,512),[[A,l.value.notes]])]),e("div",null,[e("div",Ve,[$(e("input",{id:"is_active",name:"is_active",type:"checkbox","onUpdate:modelValue":s[7]||(s[7]=g=>l.value.is_active=g),class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"},null,512),[[J,l.value.is_active]]),s[15]||(s[15]=e("label",{for:"is_active",class:"ml-2 block text-sm text-gray-900"}," Active supplier ",-1))]),s[16]||(s[16]=e("p",{class:"mt-1 text-sm text-gray-500"}," Inactive suppliers won't appear in purchase forms ",-1))]),w.value&&r.supplier?(u(),m("div",De,[s[19]||(s[19]=e("h4",{class:"text-sm font-medium text-gray-700 mb-2"},"Supplier Statistics:",-1)),e("div",Le,[e("div",null,[s[17]||(s[17]=e("span",{class:"text-xs text-gray-500"},"Total Purchases:",-1)),e("p",ze,v(r.supplier.purchase_count||0),1)]),e("div",null,[s[18]||(s[18]=e("span",{class:"text-xs text-gray-500"},"Total Spent:",-1)),e("p",Ee,"$"+v(r.supplier.total_spent||"0.00"),1)])])])):_("",!0)])])])]),e("div",He,[e("button",{type:"submit",disabled:r.loading,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary-600 text-base font-medium text-white hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:ml-3 sm:w-auto sm:text-sm transition-colors duration-150 disabled:opacity-50 disabled:cursor-not-allowed"},[r.loading?(u(),m("svg",Ue,s[20]||(s[20]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):_("",!0),y(" "+v(r.loading?"Saving...":w.value?"Update":"Add"),1)],8,Te),e("button",{type:"button",onClick:s[8]||(s[8]=g=>n.$emit("close")),disabled:r.loading,class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm transition-colors duration-150 disabled:opacity-50 disabled:cursor-not-allowed"}," Cancel ",8,Fe)])],32)])])])):_("",!0)}},Ne={key:0,class:"fixed inset-0 overflow-y-auto z-50","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},Ie={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},qe={class:"inline-block align-bottom bg-white rounded-xl text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},Oe={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},Ge={class:"sm:flex sm:items-start"},We={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},Je={class:"mt-2"},Ke={class:"text-sm text-gray-500"},Qe={key:0,class:"text-red-600 font-medium"},Re={key:1},Xe={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},Ye=["disabled"],Ze={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},et=["disabled"],tt={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},st=["disabled"],ot={__name:"DeleteConfirmationModal",props:{show:{type:Boolean,default:!1},supplier:{type:Object,default:null},loading:{type:Boolean,default:!1}},emits:["close","confirm","deactivate"],setup(r,{emit:C}){return(f,o)=>{var l,w,x;return r.show?(u(),m("div",Ne,[e("div",Ie,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:o[0]||(o[0]=n=>f.$emit("close"))}),o[10]||(o[10]=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"​",-1)),e("div",qe,[e("div",Oe,[e("div",Ge,[o[7]||(o[7]=e("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10"},[e("svg",{class:"h-6 w-6 text-red-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})])],-1)),e("div",We,[o[6]||(o[6]=e("h3",{class:"text-lg leading-6 font-medium text-gray-900",id:"modal-title"}," Delete Supplier ",-1)),e("div",Je,[e("p",Ke,[o[4]||(o[4]=y(" Are you sure you want to delete ")),e("strong",null,v((l=r.supplier)==null?void 0:l.name),1),o[5]||(o[5]=y("? ")),((w=r.supplier)==null?void 0:w.purchase_count)>0?(u(),m("span",Qe," This supplier has "+v(r.supplier.purchase_count)+" purchase(s) and cannot be deleted. ",1)):(u(),m("span",Re," This action cannot be undone. "))])])])])]),e("div",Xe,[((x=r.supplier)==null?void 0:x.purchase_count)===0?(u(),m("button",{key:0,type:"button",onClick:o[1]||(o[1]=n=>f.$emit("confirm")),disabled:r.loading,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm transition-colors duration-150 disabled:opacity-50 disabled:cursor-not-allowed"},[r.loading?(u(),m("svg",Ze,o[8]||(o[8]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):_("",!0),y(" "+v(r.loading?"Deleting...":"Delete"),1)],8,Ye)):(u(),m("button",{key:1,type:"button",onClick:o[2]||(o[2]=n=>f.$emit("deactivate")),disabled:r.loading,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-yellow-600 text-base font-medium text-white hover:bg-yellow-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500 sm:ml-3 sm:w-auto sm:text-sm transition-colors duration-150 disabled:opacity-50 disabled:cursor-not-allowed"},[r.loading?(u(),m("svg",tt,o[9]||(o[9]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):_("",!0),y(" "+v(r.loading?"Deactivating...":"Deactivate Instead"),1)],8,et)),e("button",{type:"button",onClick:o[3]||(o[3]=n=>f.$emit("close")),disabled:r.loading,class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm transition-colors duration-150 disabled:opacity-50 disabled:cursor-not-allowed"}," Cancel ",8,st)])])])])):_("",!0)}}},lt={class:"flex justify-between items-center mb-6"},rt={class:"mb-6 bg-white shadow-sm rounded-lg p-4"},it={class:"flex flex-wrap gap-4 items-center"},nt={class:"flex-1 min-w-64"},at={class:"relative"},dt={class:"flex items-center space-x-4"},ut={class:"flex items-center"},mt={class:"flex items-center"},ct={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6"},pt={class:"bg-white overflow-hidden shadow rounded-lg"},gt={class:"p-5"},vt={class:"flex items-center"},ft={class:"ml-5 w-0 flex-1"},wt={class:"text-lg font-medium text-gray-900"},ht={class:"bg-white overflow-hidden shadow rounded-lg"},xt={class:"p-5"},yt={class:"flex items-center"},bt={class:"ml-5 w-0 flex-1"},kt={class:"text-lg font-medium text-gray-900"},$t={class:"bg-white overflow-hidden shadow rounded-lg"},_t={class:"p-5"},Ct={class:"flex items-center"},St={class:"ml-5 w-0 flex-1"},Mt={class:"text-lg font-medium text-gray-900"},jt={key:0,class:"mb-6 bg-red-50 border border-red-200 rounded-md p-4"},Bt={class:"flex"},At={class:"ml-3"},Vt={class:"text-sm text-red-800"},Dt={key:1,class:"flex justify-center items-center py-12"},Lt={key:2,class:"text-center py-12"},zt={class:"mt-1 text-sm text-gray-500"},Et={class:"mt-6"},Ut={__name:"Suppliers",setup(r){const{suppliers:C,loading:f,error:o,showModal:l,showDeleteModal:w,supplierToDelete:x,selectedSupplier:n,supplierCount:s,activeSuppliers:g,inactiveSuppliers:N,openAddModal:k,editSupplier:I,closeModal:E,confirmDelete:H,closeDeleteModal:L,saveSupplier:q,handleDeleteSupplier:O,toggleSupplierActive:T,initialize:U}=se(),B=h(""),S=h(!0),V=h(!0),F=h(!1),P=h(!1),G=z(()=>{let a=C.value;if(B.value){const t=B.value.toLowerCase();a=a.filter(c=>{var M,b;return c.name.toLowerCase().includes(t)||((M=c.contact_person)==null?void 0:M.toLowerCase().includes(t))||((b=c.email)==null?void 0:b.toLowerCase().includes(t))})}return S.value&&!V.value?a=a.filter(t=>t.is_active):!S.value&&V.value&&(a=a.filter(t=>!t.is_active)),a}),i=async a=>{F.value=!0;try{await q(a)}catch(t){console.error("Error saving supplier:",t)}finally{F.value=!1}},d=async()=>{if(x.value){P.value=!0;try{await T(x.value.id),L()}catch(a){console.error("Error deactivating supplier:",a)}finally{P.value=!1}}};return ee(async()=>{await U()}),Q([S,V],([a,t])=>{!a&&!t&&(S.value=!0)}),(a,t)=>(u(),m("div",null,[e("div",lt,[t[6]||(t[6]=e("h1",{class:"text-2xl font-semibold text-gray-900"},"Suppliers",-1)),e("button",{onClick:t[0]||(t[0]=(...c)=>p(k)&&p(k)(...c)),class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},t[5]||(t[5]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),y(" Add Supplier ")]))]),e("div",rt,[e("div",it,[e("div",nt,[t[8]||(t[8]=e("label",{for:"search",class:"sr-only"},"Search suppliers",-1)),e("div",at,[t[7]||(t[7]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),$(e("input",{id:"search","onUpdate:modelValue":t[1]||(t[1]=c=>B.value=c),type:"search",placeholder:"Search suppliers...",class:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[A,B.value]])])]),e("div",dt,[e("div",ut,[$(e("input",{id:"show-active","onUpdate:modelValue":t[2]||(t[2]=c=>S.value=c),type:"checkbox",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"},null,512),[[J,S.value]]),t[9]||(t[9]=e("label",{for:"show-active",class:"ml-2 block text-sm text-gray-900"}," Active only ",-1))]),e("div",mt,[$(e("input",{id:"show-inactive","onUpdate:modelValue":t[3]||(t[3]=c=>V.value=c),type:"checkbox",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"},null,512),[[J,V.value]]),t[10]||(t[10]=e("label",{for:"show-inactive",class:"ml-2 block text-sm text-gray-900"}," Inactive only ",-1))])])])]),e("div",ct,[e("div",pt,[e("div",gt,[e("div",vt,[t[12]||(t[12]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-6 w-6 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})])],-1)),e("div",ft,[e("dl",null,[t[11]||(t[11]=e("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Total Suppliers",-1)),e("dd",wt,v(p(s)),1)])])])])]),e("div",ht,[e("div",xt,[e("div",yt,[t[14]||(t[14]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-6 w-6 text-green-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",bt,[e("dl",null,[t[13]||(t[13]=e("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Active Suppliers",-1)),e("dd",kt,v(p(g).length),1)])])])])]),e("div",$t,[e("div",_t,[e("div",Ct,[t[16]||(t[16]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-6 w-6 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728L5.636 5.636m12.728 12.728L18.364 5.636M5.636 18.364l12.728-12.728"})])],-1)),e("div",St,[e("dl",null,[t[15]||(t[15]=e("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Inactive Suppliers",-1)),e("dd",Mt,v(p(N).length),1)])])])])])]),p(o)?(u(),m("div",jt,[e("div",Bt,[t[17]||(t[17]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),e("div",At,[e("p",Vt,v(p(o)),1)])])])):_("",!0),p(f)?(u(),m("div",Dt,t[18]||(t[18]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"},null,-1),e("span",{class:"ml-2 text-gray-600"},"Loading suppliers...",-1)]))):G.value.length===0?(u(),m("div",Lt,[t[20]||(t[20]=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})],-1)),t[21]||(t[21]=e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No suppliers found",-1)),e("p",zt,v(B.value?"Try adjusting your search terms.":"Get started by adding a new supplier."),1),e("div",Et,[e("button",{onClick:t[4]||(t[4]=(...c)=>p(k)&&p(k)(...c)),class:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},t[19]||(t[19]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),y(" Add Supplier ")]))])])):(u(),te(be,{key:3,suppliers:G.value,onEdit:p(I),onToggleActive:p(T),onDelete:p(H)},null,8,["suppliers","onEdit","onToggleActive","onDelete"])),K(Pe,{show:p(l),supplier:p(n),loading:F.value,onClose:p(E),onSave:i},null,8,["show","supplier","loading","onClose"]),K(ot,{show:p(w),supplier:p(x),loading:P.value,onClose:p(L),onConfirm:p(O),onDeactivate:d},null,8,["show","supplier","loading","onClose","onConfirm"])]))}};export{Ut as default};
