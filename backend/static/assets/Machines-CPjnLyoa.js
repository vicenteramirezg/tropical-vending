import{r,o as E,c as n,a as e,e as b,t as i,F as h,b as w,w as L,f as y,v as P,h as k,d as a}from"./index-D9zG8uyo.js";import{a as p}from"./api-DAHrCf8K.js";const U={key:0,class:"flex justify-center"},B={key:1,class:"bg-red-50 border-l-4 border-red-400 p-4 mb-4"},F={class:"flex"},$={class:"ml-3"},T={class:"text-sm text-red-700"},q={key:2,class:"bg-white shadow overflow-hidden sm:rounded-lg"},G={key:3,class:"bg-white shadow overflow-hidden sm:rounded-lg"},z={role:"list",class:"divide-y divide-gray-200"},O={class:"flex items-center justify-between"},H={class:"flex items-center"},J={class:"text-sm font-medium text-primary-600 truncate"},K={class:"ml-2 text-sm text-gray-500"},Q={class:"text-sm text-gray-500"},W={key:0,class:"text-sm text-gray-500"},X={class:"flex space-x-2"},Y=["onClick"],Z=["onClick"],ee={key:4,class:"fixed inset-0 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},te={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},oe={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},se={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},ne={class:"sm:flex sm:items-start"},ae={class:"mt-3 text-center sm:mt-0 sm:text-left w-full"},le={class:"text-lg leading-6 font-medium text-gray-900",id:"modal-title"},ie={class:"mt-4 space-y-4"},re=["value"],de=["value"],me={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},ue={type:"submit",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary-600 text-base font-medium text-white hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:ml-3 sm:w-auto sm:text-sm"},ce={key:5,class:"fixed inset-0 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},fe={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},pe={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},ye={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},xe={class:"sm:flex sm:items-start"},ve={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},ge={class:"mt-2"},be={class:"text-sm text-gray-500"},he={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},Se={__name:"Machines",setup(we){const x=r([]),_=r([]),v=r(!0),m=r(null),D=r(["Dixie Narco 368 12","AMS 39640","Royal Vendor 650-10","Snack Shop 6600","Dixie Narco 501E","Snack Shop LCM2","Royal Vendor 630-10","Royal Vendor 390-9","Crane 181","Royal Vendor 660-8","Snack Shop 111","Royal Vendor 804-9","Crane 172","Royal Vendor 660-9","AMS-LB9 Combo","Crane 784","Crane 168","USA 3129","3D14","AP Studio 3","Royal Vendor 660-9","Royal Vendor 804-13","Crane 452","Snack Mart 111 3000/Model: 301A","Dixie Narco 368","Crane 148","Royal Vendor 462-9","Royal Vendor 804-","Royal Vendor 550-6","AP Snack Shop 133","AP Snack Shop 111","Crane 157","Lektro Vending V599C Serie II","Dixie Narco","Snack Shop III 400 / Model:3014","Snack Shop 6000","Crane 180","USI 3014A","Royal Vendor 660","USI 3166","AP Snack Shop 6600","AP Snack Shop III D20C","Dixie Narco 36812","ISI 3177","Dixie Narco 276E","Snack Shop 113","Dixie Narco 348C","Crane 158","AP Snack Shop 152-D","Dixie Narco 414 CC","AMS GB624","Dixie Narco 368 R","Dixie Narco 501-C","Crane 147","Snack Shop 111 D206"]),d=r(!1),u=r(!1),c=r(!1),f=r(null),l=r({id:null,name:"",location:"",machine_type:"",model:""}),g=async()=>{v.value=!0;try{const s=await p.getMachines();x.value=s.data}catch(s){console.error("Error fetching machines:",s),m.value="Failed to load machines. Please try again later."}finally{v.value=!1}},V=async()=>{try{const s=await p.getLocations();_.value=s.data}catch(s){console.error("Error fetching locations:",s)}},S=()=>{c.value=!1,l.value={id:null,name:"",location:"",machine_type:"",model:""},d.value=!0},A=s=>{c.value=!0,l.value={id:s.id,name:s.name,location:s.location,machine_type:s.machine_type,model:s.model},d.value=!0},N=async()=>{try{c.value?await p.updateMachine(l.value.id,l.value):await p.createMachine(l.value),d.value=!1,await g()}catch(s){console.error("Error saving machine:",s),m.value="Failed to save machine. Please try again."}},R=s=>{f.value=s,u.value=!0},I=async()=>{if(f.value)try{await p.deleteMachine(f.value.id),u.value=!1,await g()}catch(s){console.error("Error deleting machine:",s),m.value="Failed to delete machine. Please try again."}};return E(async()=>{await Promise.all([g(),V()])}),(s,t)=>{var M,C;return a(),n("div",null,[e("div",{class:"flex justify-between items-center mb-6"},[t[8]||(t[8]=e("h1",{class:"text-2xl font-semibold text-gray-900"},"Machines",-1)),e("button",{onClick:S,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"}," Add Machine ")]),v.value?(a(),n("div",U,t[9]||(t[9]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-500"},null,-1)]))):m.value?(a(),n("div",B,[e("div",F,[t[10]||(t[10]=e("div",{class:"flex-shrink-0"},[e("span",{class:"text-red-400"},"⚠")],-1)),e("div",$,[e("p",T,i(m.value),1)])])])):x.value.length===0?(a(),n("div",q,[e("div",{class:"px-4 py-5 sm:p-6 text-center"},[t[11]||(t[11]=e("h3",{class:"text-lg leading-6 font-medium text-gray-900"},"No machines found",-1)),t[12]||(t[12]=e("div",{class:"mt-2 max-w-xl text-sm text-gray-500"},[e("p",null,"Get started by adding your first machine.")],-1)),e("div",{class:"mt-5"},[e("button",{onClick:S,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"}," Add Machine ")])])])):(a(),n("div",G,[e("ul",z,[(a(!0),n(h,null,w(x.value,o=>(a(),n("li",{key:o.id,class:"px-4 py-4 sm:px-6"},[e("div",O,[e("div",null,[e("div",H,[e("p",J,i(o.name),1),e("p",K,i(o.machine_type),1)]),e("p",Q,"Location: "+i(o.location_name),1),o.model?(a(),n("p",W,"Model: "+i(o.model),1)):b("",!0)]),e("div",X,[e("button",{onClick:j=>A(o),class:"inline-flex items-center px-2.5 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"}," Edit ",8,Y),e("button",{onClick:j=>R(o),class:"inline-flex items-center px-2.5 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"}," Delete ",8,Z)])])]))),128))])])),d.value?(a(),n("div",ee,[e("div",te,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:t[0]||(t[0]=o=>d.value=!1)}),t[20]||(t[20]=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"​",-1)),e("div",oe,[e("form",{onSubmit:L(N,["prevent"])},[e("div",se,[e("div",ne,[e("div",ae,[e("h3",le,i(c.value?"Edit Machine":"Add New Machine"),1),e("div",ie,[e("div",null,[t[13]||(t[13]=e("label",{for:"name",class:"block text-sm font-medium text-gray-700"},"Machine Name",-1)),y(e("input",{type:"text",name:"name",id:"name","onUpdate:modelValue":t[1]||(t[1]=o=>l.value.name=o),placeholder:"e.g. Building A Snack Machine",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",required:""},null,512),[[P,l.value.name]])]),e("div",null,[t[15]||(t[15]=e("label",{for:"location",class:"block text-sm font-medium text-gray-700"},"Location",-1)),y(e("select",{id:"location",name:"location","onUpdate:modelValue":t[2]||(t[2]=o=>l.value.location=o),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md",required:""},[t[14]||(t[14]=e("option",{value:"",disabled:""},"Select a location",-1)),(a(!0),n(h,null,w(_.value,o=>(a(),n("option",{key:o.id,value:o.id},i(o.name),9,re))),128))],512),[[k,l.value.location]])]),e("div",null,[t[17]||(t[17]=e("label",{for:"machine_type",class:"block text-sm font-medium text-gray-700"},"Machine Type",-1)),y(e("select",{id:"machine_type",name:"machine_type","onUpdate:modelValue":t[3]||(t[3]=o=>l.value.machine_type=o),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md",required:""},t[16]||(t[16]=[e("option",{value:"",disabled:""},"Select a machine type",-1),e("option",{value:"Snack"},"Snack",-1),e("option",{value:"Soda"},"Soda",-1),e("option",{value:"Combo"},"Combo",-1)]),512),[[k,l.value.machine_type]])]),e("div",null,[t[19]||(t[19]=e("label",{for:"model",class:"block text-sm font-medium text-gray-700"},"Model (Optional)",-1)),y(e("select",{id:"model",name:"model","onUpdate:modelValue":t[4]||(t[4]=o=>l.value.model=o),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[t[18]||(t[18]=e("option",{value:""},"Select a model (optional)",-1)),(a(!0),n(h,null,w(D.value,o=>(a(),n("option",{key:o,value:o},i(o),9,de))),128))],512),[[k,l.value.model]])])])])])]),e("div",me,[e("button",ue,i(c.value?"Update":"Add"),1),e("button",{type:"button",onClick:t[5]||(t[5]=o=>d.value=!1),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"}," Cancel ")])],32)])])])):b("",!0),u.value?(a(),n("div",ce,[e("div",fe,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:t[6]||(t[6]=o=>u.value=!1)}),t[23]||(t[23]=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"​",-1)),e("div",pe,[e("div",ye,[e("div",xe,[t[22]||(t[22]=e("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10"},[e("svg",{class:"h-6 w-6 text-red-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1)),e("div",ve,[t[21]||(t[21]=e("h3",{class:"text-lg leading-6 font-medium text-gray-900",id:"modal-title"}," Delete Machine ",-1)),e("div",ge,[e("p",be," Are you sure you want to delete the "+i((M=f.value)==null?void 0:M.name)+" ("+i((C=f.value)==null?void 0:C.machine_type)+")? This action cannot be undone. ",1)])])])]),e("div",he,[e("button",{type:"button",onClick:I,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm"}," Delete "),e("button",{type:"button",onClick:t[7]||(t[7]=o=>u.value=!1),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"}," Cancel ")])])])])):b("",!0)])}}};export{Se as default};
