import{a as U}from"./api-BumTtRSs.js";import{r as w,c as $,b as m,o as u,d as e,l as M,w as j,s as N,v as ee,g as S,t as p,F as H,f as L,n as W,p as te,q as xe,u as x,k as we,i as J,m as G,x as ae}from"./index-QwUTnthM.js";import{f as he}from"./dateUtils-CXdyRzwD.js";function be(){const t=w([]),y=w(!0),a=w(null),d=w(1),r=w(50),n=w(0),g=w(1),v=$(()=>t.value.length),s=$(()=>d.value<g.value),l=$(()=>d.value>1),o=async(f=1,k=r.value,_={})=>{y.value=!0,a.value=null;try{const B={page:f,page_size:k,..._},h=await U.getProducts(B);h.data.results?(t.value=h.data.results,n.value=h.data.count||0,g.value=Math.ceil(n.value/k),d.value=f,r.value=k):(t.value=h.data,n.value=h.data.length||0,g.value=1,d.value=1),console.log("Products loaded:",t.value.length),console.log("Pagination info:",{page:f,size:k,totalCount:n.value,totalPages:g.value}),console.log("Filter params:",_),t.value.forEach(F=>{F.image_url||console.warn("Product missing image URL:",F.name)})}catch(B){console.error("Error fetching products:",B),a.value="Failed to load products. Please try again later."}finally{y.value=!1}},i=async f=>{f>=1&&f<=g.value&&f!==d.value&&await o(f,r.value)};return{products:t,loading:y,error:a,currentPage:d,pageSize:r,totalCount:n,totalPages:g,productCount:v,hasNextPage:s,hasPreviousPage:l,fetchProducts:o,goToPage:i,changePageSize:async f=>{f!==r.value&&await o(1,f)},nextPage:async()=>{s.value&&await i(d.value+1)},previousPage:async()=>{l.value&&await i(d.value-1)},resetToFirstPage:async()=>{await o(1,r.value)},createProduct:async f=>{var k,_,B;try{console.log("Sending product data:",JSON.stringify(f));const h=await U.createProduct(f);return console.log("Product created successfully:",h.data),await o(d.value,r.value),h.data}catch(h){console.error("Error creating product:",h),console.error("Error details:",((k=h.response)==null?void 0:k.data)||h.message);const F=((B=(_=h.response)==null?void 0:_.data)==null?void 0:B.detail)||"Failed to create product. Please try again.";throw new Error(F)}},updateProduct:async(f,k)=>{var _,B,h;try{console.log("Product form data before updating:",JSON.stringify(k));const F=await U.updateProduct(f,k);return console.log("Product updated successfully:",F.data),await o(d.value,r.value),F.data}catch(F){console.error("Error updating product:",F),console.error("Error details:",((_=F.response)==null?void 0:_.data)||F.message);const E=((h=(B=F.response)==null?void 0:B.data)==null?void 0:h.detail)||"Failed to update product. Please try again.";throw new Error(E)}},deleteProduct:async f=>{try{await U.deleteProduct(f),t.value.length===1&&d.value>1?await i(d.value-1):await o(d.value,r.value)}catch(k){console.error("Error deleting product:",k);const _="Failed to delete product. Please try again.";throw new Error(_)}},getProductCostHistory:async f=>{try{return(await U.getProductCostHistory(f)).data}catch(k){console.error("Error fetching cost history:",k);const _="Failed to load cost history. Please try again later.";throw new Error(_)}},findProductById:f=>t.value.find(k=>k.id===f)}}function ke(){const t=w(""),y=w(""),a=o=>{let i=o||[];if(t.value.trim()){const c=t.value.toLowerCase().trim();i=i.filter(P=>P.name.toLowerCase().includes(c))}return y.value&&(i=i.filter(c=>c.product_type===y.value)),i},d=()=>{const o={};return t.value.trim()&&(o.search=t.value.trim()),y.value&&(o.product_type=y.value),o},r=$(()=>!!(t.value||y.value)),n=$(()=>{const o=[];return t.value&&o.push({type:"search",label:`Name: "${t.value}"`,value:t.value,color:"blue"}),y.value&&o.push({type:"productType",label:`Type: ${y.value}`,value:y.value,color:"green"}),o}),g=()=>{t.value=""},v=()=>{y.value=""};return{searchQuery:t,selectedProductType:y,hasActiveFilters:r,activeFilters:n,getFilteredProducts:a,getFilterParams:d,clearSearch:g,clearProductType:v,clearAllFilters:()=>{t.value="",y.value=""},removeFilter:o=>{switch(o){case"search":g();break;case"productType":v();break}}}}const $e={class:"mb-6"},Ce={class:"flex flex-col sm:flex-row gap-4"},Pe={class:"flex-1 max-w-md"},_e={class:"relative"},Fe={key:0,class:"absolute inset-y-0 right-0 pr-3 flex items-center"},Se={class:"sm:w-48"},Me={class:"relative"},Be={key:0,class:"sm:w-auto"},ze={key:0,class:"mt-3 text-sm text-gray-600"},je={class:"flex flex-wrap items-center gap-2"},He=["onClick"],Ae={__name:"ProductFilters",props:{searchQuery:{type:String,required:!0},selectedProductType:{type:String,required:!0},hasActiveFilters:{type:Boolean,default:!1},activeFilters:{type:Array,default:()=>[]},filteredCount:{type:Number,default:0},totalCount:{type:Number,default:0}},emits:["update:searchQuery","update:selectedProductType","clearSearch","clearAllFilters","removeFilter"],setup(t,{emit:y}){const a=t,d=y,r=$({get:()=>a.searchQuery,set:i=>d("update:searchQuery",i)}),n=$({get:()=>a.selectedProductType,set:i=>d("update:selectedProductType",i)}),g=$(()=>a.hasActiveFilters&&a.filteredCount!==a.totalCount),v=()=>{d("clearSearch")},s=()=>{d("clearAllFilters")},l=i=>{d("removeFilter",i)},o=i=>({blue:"bg-blue-100 text-blue-800",green:"bg-green-100 text-green-800",purple:"bg-purple-100 text-purple-800",red:"bg-red-100 text-red-800"})[i]||"bg-gray-100 text-gray-800";return(i,c)=>(u(),m("div",$e,[e("div",Ce,[e("div",Pe,[e("div",_e,[c[3]||(c[3]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),j(e("input",{type:"text","onUpdate:modelValue":c[0]||(c[0]=P=>r.value=P),placeholder:"Search products by name...",class:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[N,r.value]]),r.value?(u(),m("div",Fe,[e("button",{onClick:v,class:"text-gray-400 hover:text-gray-600 focus:outline-none"},c[2]||(c[2]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])):M("",!0)])]),e("div",Se,[e("div",Me,[j(e("select",{"onUpdate:modelValue":c[1]||(c[1]=P=>n.value=P),class:"block w-full pl-3 pr-10 py-2 text-base border border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md bg-white"},c[4]||(c[4]=[e("option",{value:""},"All Product Types",-1),e("option",{value:"Soda"},"Soda",-1),e("option",{value:"Snack"},"Snack",-1)]),512),[[ee,n.value]]),c[5]||(c[5]=e("div",{class:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})])],-1))])]),t.hasActiveFilters?(u(),m("div",Be,[e("button",{onClick:s,class:"w-full sm:w-auto inline-flex items-center justify-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-150"},c[6]||(c[6]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),S(" Clear Filters ")]))])):M("",!0)]),g.value?(u(),m("div",ze,[e("div",je,[e("span",null,"Showing "+p(t.filteredCount)+" of "+p(t.totalCount)+" products",1),(u(!0),m(H,null,L(t.activeFilters,P=>(u(),m("span",{key:P.type,class:W(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",o(P.color)])},[S(p(P.label)+" ",1),e("button",{onClick:z=>l(P.type),class:"ml-1 text-current hover:text-opacity-75 focus:outline-none"},c[7]||(c[7]=[e("svg",{class:"h-3 w-3",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)]),8,He)],2))),128))])])):M("",!0)]))}},Te={class:"bg-white shadow-lg rounded-xl overflow-hidden"},Ne={role:"list",class:"divide-y divide-gray-200"},Le={class:"flex flex-col sm:flex-row sm:items-center justify-between gap-4"},Ve={class:"flex items-start sm:items-center"},Ee={class:"relative flex-shrink-0 h-14 w-14 bg-gray-100 rounded-lg overflow-hidden shadow-sm"},qe=["src","alt","onError"],Ue={key:1,class:"h-full w-full flex items-center justify-center text-gray-400"},Ie={class:"absolute -top-2 -right-2 h-6 w-6 flex items-center justify-center bg-purple-500 text-white text-xs font-bold rounded-full shadow-md"},De={class:"ml-4"},Qe={class:"text-sm font-medium text-primary-600"},Oe={class:"flex flex-wrap gap-2 mt-1"},Re={class:"text-sm text-gray-500 flex items-center"},Je={class:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-purple-100 text-purple-800"},Ge={class:"flex flex-wrap gap-2 sm:flex-nowrap"},We=["onClick"],Ke=["onClick"],Xe=["onClick"],Ye={__name:"ProductList",props:{products:{type:Array,required:!0}},emits:["edit","viewCostHistory","delete"],setup(t,{emit:y}){const a=(r,n)=>{console.error("Image load error:",r.target.src),n&&console.warn(`Failed to load image for product: ${n.name}`,n.image_url)},d=r=>r==="Soda"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800";return(r,n)=>(u(),m("div",Te,[e("ul",Ne,[(u(!0),m(H,null,L(t.products,g=>(u(),m("li",{key:g.id,class:"px-4 sm:px-6 py-4 sm:py-5 hover:bg-gray-50 transition-colors duration-150"},[e("div",Le,[e("div",Ve,[e("div",Ee,[g.image_url?(u(),m("img",{key:0,src:g.image_url,alt:g.name,class:"h-full w-full object-cover",onError:v=>a(v,g)},null,40,qe)):(u(),m("div",Ue,n[0]||(n[0]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)]))),e("div",Ie,p(g.inventory_quantity||0),1)]),e("div",De,[e("p",Qe,p(g.name),1),e("div",Oe,[e("p",Re,[n[1]||(n[1]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),S(" $"+p(g.cost_price.toFixed(2)),1)]),e("span",{class:W(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",d(g.product_type)])},p(g.product_type),3),e("span",Je,[n[2]||(n[2]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3.5 w-3.5 mr-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})],-1)),S(" "+p(g.inventory_quantity||0)+" in stock ",1)])])])]),e("div",Ge,[e("button",{onClick:v=>r.$emit("edit",g),class:"w-full sm:w-auto inline-flex items-center justify-center px-3 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-150"},n[3]||(n[3]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),S(" Edit ")]),8,We),e("button",{onClick:v=>r.$emit("viewCostHistory",g),class:"w-full sm:w-auto inline-flex items-center justify-center px-3 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded-md text-gray-700 bg-white hover:bg-indigo-50 hover:text-indigo-700 hover:border-indigo-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors duration-150"},n[4]||(n[4]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})],-1),S(" Cost History ")]),8,Ke),e("button",{onClick:v=>r.$emit("delete",g),class:"w-full sm:w-auto inline-flex items-center justify-center px-3 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded-md text-gray-700 bg-white hover:bg-red-50 hover:text-red-700 hover:border-red-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors duration-150"},n[5]||(n[5]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),S(" Delete ")]),8,Xe)])])]))),128))])]))}},Ze={key:0,class:"fixed inset-0 overflow-y-auto z-50","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},et={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},tt={class:"inline-block align-bottom bg-white rounded-xl text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},st={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},ot={class:"sm:flex sm:items-start"},rt={class:"mt-3 text-center sm:mt-0 sm:text-left w-full"},lt={class:"text-lg leading-6 font-medium text-gray-900",id:"modal-title"},nt={class:"mt-4 space-y-4"},it={class:"grid grid-cols-2 gap-4"},at={key:0,class:"mt-4 bg-gray-50 p-3 rounded-md"},dt={class:"grid grid-cols-2 gap-2"},ut={class:"text-sm font-medium text-primary-600"},ct={class:"text-sm font-medium text-primary-600"},mt={key:1,class:"mt-3"},gt={class:"h-32 w-32 rounded-lg overflow-hidden bg-gray-100 shadow-sm"},pt=["src"],yt={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},vt=["disabled"],ft={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},xt=["disabled"],wt={__name:"ProductFormModal",props:{show:{type:Boolean,default:!1},product:{type:Object,default:null},loading:{type:Boolean,default:!1}},emits:["close","save"],setup(t,{emit:y}){const a=t,d=y,r=w({id:null,name:"",product_type:"Soda",description:"",cost_price:0,inventory_quantity:0,image_url:""}),n=$(()=>{var s;return!!((s=a.product)!=null&&s.id)});te(()=>a.product,s=>{s?r.value={id:s.id,name:s.name,product_type:s.product_type||"Soda",description:s.description||"",cost_price:s.cost_price,inventory_quantity:s.inventory_quantity||0,image_url:s.image_url||""}:r.value={id:null,name:"",product_type:"Soda",description:"",cost_price:0,inventory_quantity:0,image_url:""}},{immediate:!0});const g=()=>{d("save",{...r.value})},v=s=>{console.error("Image load error:",s.target.src)};return(s,l)=>t.show?(u(),m("div",Ze,[e("div",et,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:l[0]||(l[0]=o=>s.$emit("close"))}),l[20]||(l[20]=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"​",-1)),e("div",tt,[e("form",{onSubmit:xe(g,["prevent"])},[e("div",st,[e("div",ot,[e("div",rt,[e("h3",lt,p(n.value?"Edit Product":"Add New Product"),1),e("div",nt,[e("div",null,[l[8]||(l[8]=e("label",{for:"name",class:"block text-sm font-medium text-gray-700"},"Product Name",-1)),j(e("input",{type:"text",name:"name",id:"name","onUpdate:modelValue":l[1]||(l[1]=o=>r.value.name=o),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",required:""},null,512),[[N,r.value.name]])]),e("div",null,[l[10]||(l[10]=e("label",{for:"product_type",class:"block text-sm font-medium text-gray-700"},"Product Type",-1)),j(e("select",{id:"product_type",name:"product_type","onUpdate:modelValue":l[2]||(l[2]=o=>r.value.product_type=o),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md",required:""},l[9]||(l[9]=[e("option",{value:"Soda"},"Soda",-1),e("option",{value:"Snack"},"Snack",-1)]),512),[[ee,r.value.product_type]])]),e("div",it,[e("div",null,[l[11]||(l[11]=e("label",{for:"cost_price",class:"block text-sm font-medium text-gray-700"},"Cost ($)",-1)),j(e("input",{type:"number",name:"cost_price",id:"cost_price","onUpdate:modelValue":l[3]||(l[3]=o=>r.value.cost_price=o),min:"0",step:"0.01",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",required:""},null,512),[[N,r.value.cost_price]])]),e("div",null,[l[12]||(l[12]=e("label",{for:"inventory_quantity",class:"block text-sm font-medium text-gray-700"},"Inventory",-1)),j(e("input",{type:"number",name:"inventory_quantity",id:"inventory_quantity","onUpdate:modelValue":l[4]||(l[4]=o=>r.value.inventory_quantity=o),min:"0",step:"1",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[N,r.value.inventory_quantity]])])]),e("div",null,[l[13]||(l[13]=e("label",{for:"description",class:"block text-sm font-medium text-gray-700"},"Description",-1)),j(e("textarea",{id:"description",name:"description",rows:"3","onUpdate:modelValue":l[5]||(l[5]=o=>r.value.description=o),class:"shadow-sm focus:ring-primary-500 focus:border-primary-500 mt-1 block w-full sm:text-sm border border-gray-300 rounded-md"},null,512),[[N,r.value.description]])]),e("div",null,[l[14]||(l[14]=e("label",{for:"image_url",class:"block text-sm font-medium text-gray-700"},"Image URL",-1)),j(e("input",{type:"url",name:"image_url",id:"image_url","onUpdate:modelValue":l[6]||(l[6]=o=>r.value.image_url=o),placeholder:"https://example.com/image.jpg",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[N,r.value.image_url]])]),n.value&&t.product?(u(),m("div",at,[l[17]||(l[17]=e("h4",{class:"text-sm font-medium text-gray-700 mb-2"},"Additional Information:",-1)),e("div",dt,[e("div",null,[l[15]||(l[15]=e("span",{class:"text-xs text-gray-500"},"Latest Unit Cost:",-1)),e("p",ut,"$"+p(t.product.latest_cost||"0.00"),1)]),e("div",null,[l[16]||(l[16]=e("span",{class:"text-xs text-gray-500"},"Average Cost:",-1)),e("p",ct,"$"+p(t.product.average_cost||"0.00"),1)])])])):M("",!0),r.value.image_url?(u(),m("div",mt,[l[18]||(l[18]=e("h4",{class:"text-sm font-medium text-gray-700 mb-2"},"Image Preview:",-1)),e("div",gt,[e("img",{src:r.value.image_url,class:"h-full w-full object-cover",onError:v},null,40,pt)])])):M("",!0)])])])]),e("div",yt,[e("button",{type:"submit",disabled:t.loading,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary-600 text-base font-medium text-white hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:ml-3 sm:w-auto sm:text-sm transition-colors duration-150 disabled:opacity-50 disabled:cursor-not-allowed"},[t.loading?(u(),m("svg",ft,l[19]||(l[19]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):M("",!0),S(" "+p(t.loading?"Saving...":n.value?"Update":"Add"),1)],8,vt),e("button",{type:"button",onClick:l[7]||(l[7]=o=>s.$emit("close")),disabled:t.loading,class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm transition-colors duration-150 disabled:opacity-50 disabled:cursor-not-allowed"}," Cancel ",8,xt)])],32)])])])):M("",!0)}},ht={key:0,class:"fixed inset-0 overflow-y-auto z-50","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},bt={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},kt={class:"inline-block align-bottom bg-white rounded-xl text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},$t={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},Ct={class:"sm:flex sm:items-start"},Pt={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},_t={class:"text-lg leading-6 font-medium text-gray-900",id:"modal-title"},Ft={class:"mt-2"},St={class:"text-sm text-gray-500"},Mt={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},Bt=["disabled"],zt={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},jt=["disabled"],Ht={__name:"DeleteConfirmationModal",props:{show:{type:Boolean,default:!1},title:{type:String,default:"Delete Item"},message:{type:String,default:"Are you sure you want to delete this item? This action cannot be undone."},confirmButtonText:{type:String,default:"Delete"},loading:{type:Boolean,default:!1}},emits:["close","confirm"],setup(t,{emit:y}){return(a,d)=>t.show?(u(),m("div",ht,[e("div",bt,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:d[0]||(d[0]=r=>a.$emit("close"))}),d[5]||(d[5]=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"​",-1)),e("div",kt,[e("div",$t,[e("div",Ct,[d[3]||(d[3]=e("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10"},[e("svg",{class:"h-6 w-6 text-red-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1)),e("div",Pt,[e("h3",_t,p(t.title),1),e("div",Ft,[e("p",St,p(t.message),1)])])])]),e("div",Mt,[e("button",{type:"button",onClick:d[1]||(d[1]=r=>a.$emit("confirm")),disabled:t.loading,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm transition-colors duration-150 disabled:opacity-50 disabled:cursor-not-allowed"},[t.loading?(u(),m("svg",zt,d[4]||(d[4]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):M("",!0),S(" "+p(t.loading?"Deleting...":t.confirmButtonText),1)],8,Bt),e("button",{type:"button",onClick:d[2]||(d[2]=r=>a.$emit("close")),disabled:t.loading,class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm transition-colors duration-150 disabled:opacity-50 disabled:cursor-not-allowed"}," Cancel ",8,jt)])])])])):M("",!0)}},At={key:0,class:"fixed inset-0 overflow-y-auto z-50","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},Tt={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},Nt={class:"inline-block align-bottom bg-white rounded-xl text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-3xl sm:w-full"},Lt={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},Vt={class:"sm:flex sm:items-start"},Et={class:"mt-3 text-center sm:mt-0 sm:text-left w-full"},qt={class:"text-lg leading-6 font-medium text-gray-900",id:"modal-title"},Ut={class:"mt-4"},It={key:0,class:"flex justify-center py-10"},Dt={key:1,class:"bg-red-50 border-l-4 border-red-400 p-4 rounded-r-lg shadow-sm"},Qt={class:"flex"},Ot={class:"ml-3"},Rt={class:"text-sm text-red-700"},Jt={key:2,class:"py-8 text-center"},Gt={key:3},Wt={class:"overflow-x-auto"},Kt={class:"min-w-full divide-y divide-gray-200"},Xt={class:"bg-white divide-y divide-gray-200"},Yt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Zt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},es={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ts={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ss={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},os={class:"px-6 py-4 text-sm text-gray-500"},rs={key:0,class:"mt-6 bg-gray-50 rounded-lg p-4"},ls={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},ns={class:"text-center"},is={class:"text-lg font-semibold text-primary-600"},as={class:"text-center"},ds={class:"text-lg font-semibold text-green-600"},us={class:"text-center"},cs={class:"text-lg font-semibold text-red-600"},ms={class:"text-center"},gs={class:"text-lg font-semibold text-blue-600"},ps={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},ys={__name:"CostHistoryModal",props:{show:{type:Boolean,default:!1},product:{type:Object,default:null},costHistory:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1},error:{type:String,default:null}},emits:["close"],setup(t,{emit:y}){const a=t,d=$(()=>a.costHistory.length===0?"0.00":(a.costHistory.reduce((s,l)=>s+Number(l.unit_cost),0)/a.costHistory.length).toFixed(2)),r=$(()=>a.costHistory.length===0?"0.00":Math.min(...a.costHistory.map(s=>Number(s.unit_cost))).toFixed(2)),n=$(()=>a.costHistory.length===0?"0.00":Math.max(...a.costHistory.map(s=>Number(s.unit_cost))).toFixed(2)),g=$(()=>a.costHistory.length===0?0:a.costHistory.reduce((v,s)=>v+Number(s.quantity),0));return(v,s)=>{var l;return t.show?(u(),m("div",At,[e("div",Tt,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:s[0]||(s[0]=o=>v.$emit("close"))}),s[11]||(s[11]=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"​",-1)),e("div",Nt,[e("div",Lt,[e("div",Vt,[e("div",Et,[e("h3",qt," Cost History for "+p(((l=t.product)==null?void 0:l.name)||"Product"),1),e("div",Ut,[t.loading?(u(),m("div",It,s[2]||(s[2]=[e("div",{class:"animate-spin rounded-full h-10 w-10 border-t-2 border-b-2 border-primary-500"},null,-1)]))):t.error?(u(),m("div",Dt,[e("div",Qt,[s[3]||(s[3]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})])],-1)),e("div",Ot,[e("p",Rt,p(t.error),1)])])])):t.costHistory.length===0?(u(),m("div",Jt,s[4]||(s[4]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-12 w-12 mx-auto text-gray-400 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),e("h3",{class:"text-base font-medium text-gray-900"},"No cost history found",-1),e("p",{class:"mt-1 text-sm text-gray-500"},"This product has no recorded cost history.",-1)]))):(u(),m("div",Gt,[e("div",Wt,[e("table",Kt,[s[5]||(s[5]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Quantity"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Unit Cost"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Total Cost"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Supplier"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Notes")])],-1)),e("tbody",Xt,[(u(!0),m(H,null,L(t.costHistory,o=>(u(),m("tr",{key:o.id,class:"hover:bg-gray-50"},[e("td",Yt,p(x(he)(o.date)),1),e("td",Zt,p(o.quantity),1),e("td",es," $"+p(Number(o.unit_cost).toFixed(2)),1),e("td",ts," $"+p(Number(o.total_cost).toFixed(2)),1),e("td",ss,p(o.supplier||"N/A"),1),e("td",os,p(o.purchase_notes||"N/A"),1)]))),128))])])]),t.costHistory.length>0?(u(),m("div",rs,[s[10]||(s[10]=e("h4",{class:"text-sm font-medium text-gray-700 mb-3"},"Summary Statistics",-1)),e("div",ls,[e("div",ns,[e("p",is,"$"+p(d.value),1),s[6]||(s[6]=e("p",{class:"text-xs text-gray-500"},"Average Unit Cost",-1))]),e("div",as,[e("p",ds,"$"+p(r.value),1),s[7]||(s[7]=e("p",{class:"text-xs text-gray-500"},"Lowest Unit Cost",-1))]),e("div",us,[e("p",cs,"$"+p(n.value),1),s[8]||(s[8]=e("p",{class:"text-xs text-gray-500"},"Highest Unit Cost",-1))]),e("div",ms,[e("p",gs,p(g.value),1),s[9]||(s[9]=e("p",{class:"text-xs text-gray-500"},"Total Quantity",-1))])])])):M("",!0)]))])])])]),e("div",ps,[e("button",{type:"button",onClick:s[1]||(s[1]=o=>v.$emit("close")),class:"w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:ml-3 sm:w-auto sm:text-sm transition-colors duration-150"}," Close ")])])])])):M("",!0)}}},vs={class:"bg-white shadow-lg rounded-xl overflow-hidden"},fs={class:"px-6 py-8 text-center"},xs={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-16 w-16 mx-auto text-gray-400 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},ws={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-16 w-16 mx-auto text-gray-400 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},hs={key:2,xmlns:"http://www.w3.org/2000/svg",class:"h-16 w-16 mx-auto text-gray-400 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},bs={class:"text-lg leading-6 font-medium text-gray-900 mb-2"},ks={class:"mt-2 max-w-xl text-sm text-gray-500 mx-auto mb-6"},$s={key:0,class:"mt-2 flex flex-wrap justify-center gap-2"},de={__name:"EmptyState",props:{type:{type:String,default:"empty",validator:t=>["empty","no-results","error"].includes(t)},title:{type:String,default:""},description:{type:String,default:""},buttonText:{type:String,default:"Add Item"},showButton:{type:Boolean,default:!1},showClearFilters:{type:Boolean,default:!1},activeFilters:{type:Array,default:()=>[]}},emits:["action","clearFilters"],setup(t,{emit:y}){const a=t;$(()=>({empty:"svg","no-results":"svg",error:"svg"})[a.type]||"svg"),$(()=>(a.type==="empty","svg"));const d=r=>({blue:"bg-blue-100 text-blue-800",green:"bg-green-100 text-green-800",purple:"bg-purple-100 text-purple-800",red:"bg-red-100 text-red-800"})[r]||"bg-gray-100 text-gray-800";return(r,n)=>(u(),m("div",vs,[e("div",fs,[t.type==="empty"?(u(),m("svg",xs,n[2]||(n[2]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"},null,-1)]))):t.type==="no-results"?(u(),m("svg",ws,n[3]||(n[3]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"},null,-1)]))):t.type==="error"?(u(),m("svg",hs,n[4]||(n[4]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)]))):M("",!0),e("h3",bs,p(t.title),1),e("div",ks,[e("p",null,p(t.description),1),t.activeFilters.length>0?(u(),m("div",$s,[(u(!0),m(H,null,L(t.activeFilters,g=>(u(),m("span",{key:g.type,class:W(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",d(g.color)])},p(g.label),3))),128))])):M("",!0)]),t.showButton?(u(),m("button",{key:3,onClick:n[0]||(n[0]=g=>r.$emit("action")),class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-150"},[n[5]||(n[5]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)),S(" "+p(t.buttonText),1)])):t.showClearFilters?(u(),m("button",{key:4,onClick:n[1]||(n[1]=g=>r.$emit("clearFilters")),class:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-150"},n[6]||(n[6]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),S(" Clear All Filters ")]))):M("",!0)])]))}},Cs={class:"flex items-center justify-between px-4 py-3 bg-white border-t border-gray-200 sm:px-6"},Ps={class:"flex justify-between items-center w-full sm:hidden"},_s=["disabled"],Fs={class:"text-sm text-gray-700"},Ss=["disabled"],Ms={class:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},Bs={class:"text-sm text-gray-700"},zs={class:"font-medium"},js={class:"font-medium"},Hs={class:"font-medium"},As={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination"},Ts=["disabled"],Ns={key:0,class:"relative inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300"},Ls=["onClick"],Vs=["disabled"],Es={class:"hidden sm:block"},qs=["value"],Us={__name:"Pagination",props:{currentPage:{type:Number,required:!0},totalPages:{type:Number,required:!0},totalItems:{type:Number,required:!0},pageSize:{type:Number,required:!0},pageSizeOptions:{type:Array,default:()=>[10,20,50,100]}},emits:["page-change","page-size-change"],setup(t,{emit:y}){const a=t,d=y,r=w(a.pageSize);te(()=>a.pageSize,o=>{r.value=o});const n=$(()=>(a.currentPage-1)*a.pageSize+1),g=$(()=>Math.min(a.currentPage*a.pageSize,a.totalItems)),v=$(()=>{const o=[],i=a.totalPages;if(i<=7)for(let c=1;c<=i;c++)o.push(c);else{o.push(1),a.currentPage>3&&o.push("...");const c=Math.max(2,a.currentPage-1),P=Math.min(i-1,a.currentPage+1);for(let z=c;z<=P;z++)z>1&&z<i&&o.push(z);a.currentPage<i-2&&o.push("..."),i>1&&o.push(i)}return o}),s=o=>{o>=1&&o<=a.totalPages&&o!==a.currentPage&&d("page-change",o)},l=()=>{d("page-size-change",r.value)};return(o,i)=>(u(),m("div",Cs,[e("div",Ps,[e("button",{onClick:i[0]||(i[0]=c=>s(t.currentPage-1)),disabled:t.currentPage<=1,class:"relative inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"}," Previous ",8,_s),e("span",Fs," Page "+p(t.currentPage)+" of "+p(t.totalPages),1),e("button",{onClick:i[1]||(i[1]=c=>s(t.currentPage+1)),disabled:t.currentPage>=t.totalPages,class:"relative inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"}," Next ",8,Ss)]),e("div",Ms,[e("div",null,[e("p",Bs,[i[5]||(i[5]=S(" Showing ")),e("span",zs,p(n.value),1),i[6]||(i[6]=S(" to ")),e("span",js,p(g.value),1),i[7]||(i[7]=S(" of ")),e("span",Hs,p(t.totalItems),1),i[8]||(i[8]=S(" results "))])]),e("div",null,[e("nav",As,[e("button",{onClick:i[2]||(i[2]=c=>s(t.currentPage-1)),disabled:t.currentPage<=1,class:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},i[9]||(i[9]=[e("span",{class:"sr-only"},"Previous",-1),e("svg",{class:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1)]),8,Ts),(u(!0),m(H,null,L(v.value,c=>(u(),m(H,{key:c},[c==="..."?(u(),m("span",Ns," ... ")):(u(),m("button",{key:1,onClick:P=>s(c),class:W([c===t.currentPage?"z-10 bg-primary-50 border-primary-500 text-primary-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50","relative inline-flex items-center px-4 py-2 text-sm font-medium border"])},p(c),11,Ls))],64))),128)),e("button",{onClick:i[3]||(i[3]=c=>s(t.currentPage+1)),disabled:t.currentPage>=t.totalPages,class:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},i[10]||(i[10]=[e("span",{class:"sr-only"},"Next",-1),e("svg",{class:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})],-1)]),8,Vs)])])]),e("div",Es,[i[11]||(i[11]=e("label",{for:"page-size",class:"sr-only"},"Items per page",-1)),j(e("select",{id:"page-size","onUpdate:modelValue":i[4]||(i[4]=c=>r.value=c),onChange:l,class:"relative inline-flex items-center px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},[(u(!0),m(H,null,L(t.pageSizeOptions,c=>(u(),m("option",{key:c,value:c},p(c)+" per page ",9,qs))),128))],544),[[ee,r.value]])])]))}},Is={key:0,class:"flex justify-center py-20"},Ds={key:1,class:"bg-red-50 border-l-4 border-red-400 p-4 mb-6 rounded-r-lg shadow-sm"},Qs={class:"flex"},Os={class:"ml-3"},Rs={class:"text-sm text-red-700"},Ks={__name:"Products",setup(t){const{products:y,loading:a,error:d,currentPage:r,pageSize:n,totalCount:g,totalPages:v,fetchProducts:s,createProduct:l,updateProduct:o,deleteProduct:i,getProductCostHistory:c,resetToFirstPage:P}=be(),{searchQuery:z,selectedProductType:V,hasActiveFilters:I,activeFilters:K,getFilteredProducts:se,getFilterParams:oe,clearSearch:re,clearAllFilters:f,removeFilter:k}=ke(),_=$(()=>se(y.value));te([z,V],async()=>{I.value&&await P()});const B=async(C=1,b=n.value)=>{const T=oe();await s(C,b,T)},h=w(!1),F=w(!1),E=w(!1),D=w(!1),Q=w(!1),X=w(!1),A=w(null),q=w(null),Y=w(null),O=w([]),R=w(null),le=()=>{A.value=null,h.value=!0},ue=C=>{A.value=C,h.value=!0},ne=()=>{h.value=!1,A.value=null,D.value=!1},ce=C=>{q.value=C,F.value=!0},ie=()=>{F.value=!1,q.value=null,Q.value=!1},me=async C=>{Y.value=C,E.value=!0,X.value=!0,R.value=null,O.value=[];try{const b=await c(C.id);O.value=b}catch(b){R.value=b.message}finally{X.value=!1}},ge=()=>{E.value=!1,Y.value=null,O.value=[],R.value=null},pe=async C=>{await B(C,n.value)},ye=async C=>{await B(1,C)},ve=async C=>{var b;D.value=!0;try{(b=A.value)!=null&&b.id?await o(A.value.id,C):await l(C),ne()}catch(T){console.error("Error saving product:",T.message)}finally{D.value=!1}},fe=async()=>{if(q.value){Q.value=!0;try{await i(q.value.id),ie()}catch(C){console.error("Error deleting product:",C.message)}finally{Q.value=!1}}};return we(()=>{B()}),(C,b)=>{var T;return u(),m("div",null,[e("div",{class:"flex justify-between items-center mb-6"},[b[3]||(b[3]=e("h1",{class:"text-2xl font-semibold text-gray-900"},"Products",-1)),e("button",{onClick:le,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-150"},b[2]||(b[2]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),S(" Add Product ")]))]),J(Ae,{searchQuery:x(z),"onUpdate:searchQuery":b[0]||(b[0]=Z=>ae(z)?z.value=Z:null),selectedProductType:x(V),"onUpdate:selectedProductType":b[1]||(b[1]=Z=>ae(V)?V.value=Z:null),hasActiveFilters:x(I),activeFilters:x(K),filteredCount:_.value.length,totalCount:x(g),onClearSearch:x(re),onClearAllFilters:x(f),onRemoveFilter:x(k)},null,8,["searchQuery","selectedProductType","hasActiveFilters","activeFilters","filteredCount","totalCount","onClearSearch","onClearAllFilters","onRemoveFilter"]),x(a)?(u(),m("div",Is,b[4]||(b[4]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-500"},null,-1)]))):x(d)?(u(),m("div",Ds,[e("div",Qs,[b[5]||(b[5]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})])],-1)),e("div",Os,[e("p",Rs,p(x(d)),1)])])])):_.value.length===0&&x(I)?(u(),G(de,{key:2,type:"no-results",title:"No products found",description:"No products match your current filters.",activeFilters:x(K),showClearFilters:!0,onClearFilters:x(f)},null,8,["activeFilters","onClearFilters"])):x(y).length===0?(u(),G(de,{key:3,type:"empty",title:"No products found",description:"Get started by adding your first product.",buttonText:"Add Product",showButton:!0,onAction:le})):(u(),G(Ye,{key:4,products:_.value,onEdit:ue,onViewCostHistory:me,onDelete:ce},null,8,["products"])),x(v)>1&&!x(a)&&!x(d)?(u(),G(Us,{key:5,"current-page":x(r),"total-pages":x(v),"total-items":x(g),"page-size":x(n),"page-size-options":[10,20,50,100],onPageChange:pe,onPageSizeChange:ye},null,8,["current-page","total-pages","total-items","page-size"])):M("",!0),J(wt,{show:h.value,product:A.value,loading:D.value,onClose:ne,onSave:ve},null,8,["show","product","loading"]),J(Ht,{show:F.value,title:"Delete Product",message:`Are you sure you want to delete ${(T=q.value)==null?void 0:T.name}? This action cannot be undone.`,loading:Q.value,onClose:ie,onConfirm:fe},null,8,["show","message","loading"]),J(ys,{show:E.value,product:Y.value,costHistory:O.value,loading:X.value,error:R.value,onClose:ge},null,8,["show","product","costHistory","loading","error"])])}}};export{Ks as default};
