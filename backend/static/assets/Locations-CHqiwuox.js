import{r as l,o as E,c as i,a as e,e as w,t as d,F as M,b as F,w as N,f as h,v as _,g as k,d as r}from"./index-D9zG8uyo.js";import{a as x}from"./api-DAHrCf8K.js";const $={key:0,class:"flex justify-center"},V={key:1,class:"bg-red-50 border-l-4 border-red-400 p-4 mb-4"},B={class:"flex"},T={class:"ml-3"},P={class:"text-sm text-red-700"},U={key:2,class:"bg-white shadow overflow-hidden sm:rounded-lg"},q={key:3,class:"bg-white shadow overflow-hidden sm:rounded-lg"},S={role:"list",class:"divide-y divide-gray-200"},z={class:"flex items-center justify-between"},G={class:"text-sm font-medium text-primary-600 truncate"},H={class:"text-sm text-gray-500"},I={class:"flex space-x-2"},J=["onClick"],K=["onClick"],O={key:4,class:"fixed inset-0 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},Q={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},R={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},W={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},X={class:"sm:flex sm:items-start"},Y={class:"mt-3 text-center sm:mt-0 sm:text-left w-full"},Z={class:"text-lg leading-6 font-medium text-gray-900",id:"modal-title"},ee={class:"mt-4 space-y-4"},te={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},se={type:"submit",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary-600 text-base font-medium text-white hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:ml-3 sm:w-auto sm:text-sm"},oe={key:5,class:"fixed inset-0 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},ne={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},ie={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},re={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},le={class:"sm:flex sm:items-start"},ae={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},de={class:"mt-2"},me={class:"text-sm text-gray-500"},ue={class:"font-medium"},ce={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},ve={__name:"Locations",setup(fe){const g=l([]),v=l(!0),m=l(null),a=l(!1),u=l(!1),c=l(!1),f=l(null),n=l({id:null,name:"",address:""}),p=async()=>{v.value=!0;try{const s=await x.getLocations();g.value=s.data}catch(s){console.error("Error fetching locations:",s),m.value="Failed to load locations. Please try again later."}finally{v.value=!1}},y=()=>{c.value=!1,n.value={id:null,name:"",address:""},a.value=!0},L=s=>{c.value=!0,n.value={id:s.id,name:s.name,address:s.address},a.value=!0},C=async()=>{try{c.value?await x.updateLocation(n.value.id,n.value):await x.createLocation(n.value),a.value=!1,await p()}catch(s){console.error("Error saving location:",s),m.value="Failed to save location. Please try again."}},j=s=>{f.value=s,u.value=!0},D=async()=>{if(f.value)try{await x.deleteLocation(f.value.id),u.value=!1,await p()}catch(s){console.error("Error deleting location:",s),m.value="Failed to delete location. Please try again."}};return E(p),(s,t)=>{var b;return r(),i("div",null,[e("div",{class:"flex justify-between items-center mb-6"},[t[6]||(t[6]=e("h1",{class:"text-2xl font-semibold text-gray-900"},"Locations",-1)),e("button",{onClick:y,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"}," Add Location ")]),v.value?(r(),i("div",$,t[7]||(t[7]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-500"},null,-1)]))):m.value?(r(),i("div",V,[e("div",B,[t[8]||(t[8]=e("div",{class:"flex-shrink-0"},[e("span",{class:"text-red-400"},"⚠")],-1)),e("div",T,[e("p",P,d(m.value),1)])])])):g.value.length===0?(r(),i("div",U,[e("div",{class:"px-4 py-5 sm:p-6 text-center"},[t[9]||(t[9]=e("h3",{class:"text-lg leading-6 font-medium text-gray-900"},"No locations found",-1)),t[10]||(t[10]=e("div",{class:"mt-2 max-w-xl text-sm text-gray-500"},[e("p",null,"Get started by adding your first location.")],-1)),e("div",{class:"mt-5"},[e("button",{onClick:y,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"}," Add Location ")])])])):(r(),i("div",q,[e("ul",S,[(r(!0),i(M,null,F(g.value,o=>(r(),i("li",{key:o.id,class:"px-4 py-4 sm:px-6"},[e("div",z,[e("div",null,[e("p",G,d(o.name),1),e("p",H,d(o.address),1)]),e("div",I,[e("button",{onClick:A=>L(o),class:"inline-flex items-center px-2.5 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"}," Edit ",8,J),e("button",{onClick:A=>j(o),class:"inline-flex items-center px-2.5 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"}," Delete ",8,K)])])]))),128))])])),a.value?(r(),i("div",O,[e("div",Q,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:t[0]||(t[0]=o=>a.value=!1)}),t[13]||(t[13]=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"​",-1)),e("div",R,[e("form",{onSubmit:N(C,["prevent"])},[e("div",W,[e("div",X,[e("div",Y,[e("h3",Z,d(c.value?"Edit Location":"Add New Location"),1),e("div",ee,[e("div",null,[t[11]||(t[11]=e("label",{for:"name",class:"block text-sm font-medium text-gray-700"},"Name",-1)),h(e("input",{type:"text",name:"name",id:"name","onUpdate:modelValue":t[1]||(t[1]=o=>n.value.name=o),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",required:""},null,512),[[_,n.value.name]])]),e("div",null,[t[12]||(t[12]=e("label",{for:"address",class:"block text-sm font-medium text-gray-700"},"Address",-1)),h(e("textarea",{id:"address",name:"address",rows:"3","onUpdate:modelValue":t[2]||(t[2]=o=>n.value.address=o),class:"shadow-sm focus:ring-primary-500 focus:border-primary-500 mt-1 block w-full sm:text-sm border border-gray-300 rounded-md",required:""},null,512),[[_,n.value.address]])])])])])]),e("div",te,[e("button",se,d(c.value?"Update":"Add"),1),e("button",{type:"button",onClick:t[3]||(t[3]=o=>a.value=!1),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"}," Cancel ")])],32)])])])):w("",!0),u.value?(r(),i("div",oe,[e("div",ne,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:t[4]||(t[4]=o=>u.value=!1)}),t[18]||(t[18]=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"​",-1)),e("div",ie,[e("div",re,[e("div",le,[t[17]||(t[17]=e("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10"},[e("svg",{class:"h-6 w-6 text-red-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1)),e("div",ae,[t[16]||(t[16]=e("h3",{class:"text-lg leading-6 font-medium text-gray-900",id:"modal-title"}," Delete Location ",-1)),e("div",de,[e("p",me,[t[14]||(t[14]=k(" Are you sure you want to delete ")),e("span",ue,d((b=f.value)==null?void 0:b.name),1),t[15]||(t[15]=k("? This action cannot be undone. "))])])])])]),e("div",ce,[e("button",{type:"button",onClick:D,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm"}," Delete "),e("button",{type:"button",onClick:t[5]||(t[5]=o=>u.value=!1),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"}," Cancel ")])])])])):w("",!0)])}}};export{ve as default};
