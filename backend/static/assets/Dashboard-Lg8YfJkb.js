import{r as m,o as k,c as n,a as t,b as T,w as c,v as x,d as L,F as v,e as g,f as C,t as s,n as f,_ as R,g as i}from"./index-DasmOlQa.js";import{a as y}from"./api-Dk8E0-vH.js";const S={class:"min-h-screen flex flex-col"},V={class:"flex-grow container mx-auto px-4 py-8"},F={class:"bg-white p-4 sm:p-5 shadow-lg rounded-xl mb-6"},M={class:"flex flex-col sm:flex-row flex-wrap items-start sm:items-center gap-4"},j={class:"w-full sm:w-auto"},D={class:"w-full sm:w-auto"},P=["value"],B={class:"w-full sm:w-auto"},N={key:0,class:"flex justify-center py-20"},A={key:1},z={class:"grid grid-cols-1 gap-4 sm:gap-5 sm:grid-cols-2 lg:grid-cols-4 mb-8"},E={class:"bg-gradient-to-br from-white to-gray-50 overflow-hidden shadow-lg rounded-xl transition-transform duration-300 hover:scale-105 hover:shadow-xl"},U={class:"px-4 py-5 sm:p-6"},$={class:"mt-2 text-2xl sm:text-3xl font-bold text-primary-600"},I={class:"bg-gradient-to-br from-white to-gray-50 overflow-hidden shadow-lg rounded-xl transition-transform duration-300 hover:scale-105 hover:shadow-xl"},Y={class:"px-4 py-5 sm:p-6"},G={class:"mt-2 text-2xl sm:text-3xl font-bold text-primary-600"},H={class:"bg-gradient-to-br from-white to-gray-50 overflow-hidden shadow-lg rounded-xl transition-transform duration-300 hover:scale-105 hover:shadow-xl"},J={class:"px-4 py-5 sm:p-6"},K={class:"mt-2 text-2xl sm:text-3xl font-bold text-primary-600"},O={class:"bg-gradient-to-br from-white to-gray-50 overflow-hidden shadow-lg rounded-xl transition-transform duration-300 hover:scale-105 hover:shadow-xl"},Q={class:"px-4 py-5 sm:p-6"},W={class:"mt-2 text-2xl sm:text-3xl font-bold text-primary-600"},X={class:"bg-white shadow-lg overflow-hidden sm:rounded-xl mb-8 transition-all duration-300 hover:shadow-xl"},Z={class:"px-6 py-5 border-b border-gray-100 flex justify-between items-center"},q={key:0,class:"px-6 py-8 text-center text-gray-500"},tt={key:1,role:"list",class:"divide-y divide-gray-200"},et={class:"flex items-center justify-between"},ot={class:"text-sm font-medium text-primary-600 truncate"},st={class:"text-sm text-gray-500"},lt={class:"bg-white shadow-lg overflow-hidden sm:rounded-xl transition-all duration-300 hover:shadow-xl"},at={class:"grid grid-cols-1 md:grid-cols-3 divide-y md:divide-y-0 md:divide-x divide-gray-200"},rt={class:"px-6 py-5"},nt={class:"mt-2 text-3xl font-bold text-gray-900"},it={class:"px-6 py-5"},dt={class:"mt-2 text-3xl font-bold text-green-600"},mt={class:"px-6 py-5"},ut={class:"mt-2 text-3xl font-bold text-gray-900"},vt={__name:"Dashboard",setup(ct){const u=m(!0),w=m(null),p=m([]),l=m({locations:0,machines:0,products:0,low_stock_items:[],low_stock_count:0,recent_restocks:0,revenue_total:0,profit_total:0,profit_margin:0}),r=m({timeRange:"30",location:"",machineType:""}),h=a=>a<=0?"bg-red-100 text-red-800":a<=3?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800",b=async()=>{try{const a=await y.getLocations();p.value=a.data}catch(a){console.error("Error fetching locations:",a)}},d=async()=>{u.value=!0;try{const a={days:r.value.timeRange,location:r.value.location||void 0,machine_type:r.value.machineType||void 0},e=await y.getDashboardData(a);l.value=e.data}catch(a){console.error("Error fetching dashboard data:",a),w.value="Failed to load dashboard data"}finally{u.value=!1}};return k(async()=>{await b(),await d()}),(a,e)=>(i(),n("div",S,[t("div",V,[e[21]||(e[21]=t("h1",{class:"text-2xl font-bold text-gray-900 mb-6"},"Dashboard",-1)),t("div",F,[t("div",M,[t("div",j,[e[4]||(e[4]=t("label",{for:"timeRange",class:"block text-sm font-medium text-gray-700 mb-1"},"Time Period",-1)),c(t("select",{id:"timeRange","onUpdate:modelValue":e[0]||(e[0]=o=>r.value.timeRange=o),class:"block w-full sm:w-48 border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm",onChange:d},e[3]||(e[3]=[L('<option value="today">Today</option><option value="yesterday">Yesterday</option><option value="7">Last 7 days</option><option value="30">Last 30 days</option><option value="90">Last 90 days</option>',5)]),544),[[x,r.value.timeRange]])]),t("div",D,[e[6]||(e[6]=t("label",{for:"location",class:"block text-sm font-medium text-gray-700 mb-1"},"Location",-1)),c(t("select",{id:"location","onUpdate:modelValue":e[1]||(e[1]=o=>r.value.location=o),class:"block w-full sm:w-48 border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm",onChange:d},[e[5]||(e[5]=t("option",{value:""},"All Locations",-1)),(i(!0),n(v,null,g(p.value,o=>(i(),n("option",{key:o.id,value:o.id},s(o.name),9,P))),128))],544),[[x,r.value.location]])]),t("div",B,[e[8]||(e[8]=t("label",{for:"machineType",class:"block text-sm font-medium text-gray-700 mb-1"},"Machine Type",-1)),c(t("select",{id:"machineType","onUpdate:modelValue":e[2]||(e[2]=o=>r.value.machineType=o),class:"block w-full sm:w-48 border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm",onChange:d},e[7]||(e[7]=[t("option",{value:""},"All Types",-1),t("option",{value:"Snack"},"Snack",-1),t("option",{value:"Soda"},"Soda",-1),t("option",{value:"Combo"},"Combo",-1)]),544),[[x,r.value.machineType]])]),t("div",{class:"w-full sm:w-auto mt-2 sm:mt-0"},[t("button",{type:"button",onClick:d,class:"w-full sm:w-auto inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-150"},e[9]||(e[9]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})],-1),C(" Apply Filters ")]))])])]),u.value?(i(),n("div",N,e[10]||(e[10]=[t("div",{class:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-500"},null,-1)]))):(i(),n("div",A,[t("div",z,[t("div",E,[t("div",U,[t("dl",null,[e[11]||(e[11]=t("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Total Locations",-1)),t("dd",$,s(l.value.locations),1)])])]),t("div",I,[t("div",Y,[t("dl",null,[e[12]||(e[12]=t("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Total Machines",-1)),t("dd",G,s(l.value.machines),1)])])]),t("div",H,[t("div",J,[t("dl",null,[e[13]||(e[13]=t("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Total Products",-1)),t("dd",K,s(l.value.products),1)])])]),t("div",O,[t("div",Q,[t("dl",null,[e[14]||(e[14]=t("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Recent Restocks",-1)),t("dd",W,s(l.value.recent_restocks),1)])])])]),t("div",X,[t("div",Z,[e[15]||(e[15]=t("div",null,[t("h3",{class:"text-lg leading-6 font-medium text-gray-900"},"Low Stock Items"),t("p",{class:"mt-1 text-sm text-gray-500"}," Products with stock level below threshold ")],-1)),t("span",{class:f(["inline-flex items-center px-3.5 py-1 rounded-full text-sm font-medium",l.value.low_stock_count>0?"bg-red-100 text-red-800":"bg-green-100 text-green-800"])},s(l.value.low_stock_count)+" items ",3)]),t("div",null,[l.value.low_stock_items.length===0?(i(),n("div",q,e[16]||(e[16]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-12 w-12 mx-auto text-green-400 mb-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),t("p",{class:"text-lg font-medium"},"No low stock items - everything is well stocked!",-1)]))):(i(),n("ul",tt,[(i(!0),n(v,null,g(l.value.low_stock_items,(o,_)=>(i(),n("li",{key:_,class:"px-6 py-4 hover:bg-gray-50 transition-colors duration-150"},[t("div",et,[t("div",null,[t("p",ot,s(o.product),1),t("p",st,s(o.machine)+" ("+s(o.location)+")",1)]),t("div",null,[t("span",{class:f(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",h(o.current_stock)])}," Stock: "+s(o.current_stock),3)])])]))),128))]))])]),t("div",lt,[e[20]||(e[20]=t("div",{class:"px-6 py-5 border-b border-gray-100"},[t("h3",{class:"text-lg leading-6 font-medium text-gray-900"},"Revenue & Profit"),t("p",{class:"mt-1 text-sm text-gray-500"}," Last 30 days performance ")],-1)),t("div",null,[t("div",at,[t("div",rt,[e[17]||(e[17]=t("div",{class:"text-sm font-medium text-gray-500"},"Total Revenue",-1)),t("div",nt,"$"+s((l.value.revenue_total||0).toFixed(2)),1)]),t("div",it,[e[18]||(e[18]=t("div",{class:"text-sm font-medium text-gray-500"},"Total Profit",-1)),t("div",dt,"$"+s((l.value.profit_total||0).toFixed(2)),1)]),t("div",mt,[e[19]||(e[19]=t("div",{class:"text-sm font-medium text-gray-500"},"Profit Margin",-1)),t("div",ut,s((l.value.profit_margin||0).toFixed(1))+"%",1)])])])])]))]),T(R)]))}};export{vt as default};
